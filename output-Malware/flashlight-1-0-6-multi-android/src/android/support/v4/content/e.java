// 
// Decompiled by Procyon v0.5.30
// 

package android.support.v4.content;

import java.util.Set;
import android.net.Uri;
import android.util.Log;
import android.content.Intent;
import android.content.IntentFilter;
import android.content.BroadcastReceiver;
import android.os.Message;
import android.os.Looper;
import android.os.Handler;
import java.util.ArrayList;
import java.util.HashMap;
import android.content.Context;

public final class e
{
    private static final Object f;
    private static e g;
    private final Context a;
    private final HashMap b;
    private final HashMap c;
    private final ArrayList d;
    private final Handler e;
    
    static {
        f = new Object();
    }
    
    private e(final Context a) {
        this.b = new HashMap();
        this.c = new HashMap();
        this.d = new ArrayList();
        this.a = a;
        this.e = new Handler(a.getMainLooper()) {
            public final void handleMessage(final Message message) {
                switch (message.what) {
                    default: {
                        super.handleMessage(message);
                    }
                    case 1: {
                        android.support.v4.content.e.a(android.support.v4.content.e.this);
                    }
                }
            }
        };
    }
    
    public static e a(final Context context) {
        synchronized (e.f) {
            if (e.g == null) {
                e.g = new e(context.getApplicationContext());
            }
            return e.g;
        }
    }
    
    static /* synthetic */ void a(final e e) {
    Label_0050_Outer:
        while (true) {
            while (true) {
                int n;
                synchronized (e.b) {
                    final int size = e.d.size();
                    if (size <= 0) {
                        return;
                    }
                    final f[] array = new f[size];
                    e.d.toArray(array);
                    e.d.clear();
                    // monitorexit(e.b)
                    n = 0;
                    if (n >= array.length) {
                        continue Label_0050_Outer;
                    }
                    final f f = array[n];
                    for (int i = 0; i < f.b.size(); ++i) {
                        ((g)f.b.get(i)).b.onReceive(e.a, f.a);
                    }
                }
                ++n;
                continue;
            }
        }
    }
    
    public final void a(final BroadcastReceiver broadcastReceiver) {
    Label_0028_Outer:
        while (true) {
        Label_0028:
            while (true) {
                int n3 = 0;
            Label_0094_Outer:
                while (true) {
                    int n = 0;
                Label_0189:
                    while (true) {
                        int n4 = 0;
                        Label_0180: {
                            Label_0174: {
                                int n2;
                                synchronized (this.b) {
                                    final ArrayList<IntentFilter> list = this.b.remove(broadcastReceiver);
                                    if (list == null) {
                                        return;
                                    }
                                    break Label_0174;
                                    Label_0159: {
                                        return;
                                    }
                                    // iftrue(Label_0195:, n >= intentFilter.countActions())
                                    // iftrue(Label_0138:, n2 >= list2.size())
                                    // iftrue(Label_0159:, n3 >= list.size())
                                    // iftrue(Label_0189:, list2.size() > 0)
                                    // iftrue(Label_0189:, list2 == null)
                                    // iftrue(Label_0167:, (g)list2.get(n2).b != broadcastReceiver)
                                    Block_4: {
                                        ArrayList<g> list2 = null;
                                        Block_8: {
                                            String action = null;
                                            Block_9: {
                                                Block_7: {
                                                    while (true) {
                                                        Block_5: {
                                                            break Block_5;
                                                            break Block_7;
                                                            break Block_4;
                                                            Label_0138:
                                                            break Block_9;
                                                            n2 = 0;
                                                            continue Label_0028_Outer;
                                                        }
                                                        final IntentFilter intentFilter;
                                                        action = intentFilter.getAction(n);
                                                        list2 = (ArrayList<g>)this.c.get(action);
                                                        continue;
                                                    }
                                                }
                                                break Block_8;
                                            }
                                            this.c.remove(action);
                                            break Label_0189;
                                        }
                                        list2.remove(n2);
                                        n4 = n2 - 1;
                                        break Label_0180;
                                    }
                                    final IntentFilter intentFilter = list.get(n3);
                                    n = 0;
                                    continue Label_0094_Outer;
                                }
                                Label_0167: {
                                    n4 = n2;
                                }
                                break Label_0180;
                            }
                            n3 = 0;
                            continue Label_0028;
                        }
                        int n2 = n4 + 1;
                        continue Label_0028_Outer;
                    }
                    ++n;
                    continue Label_0094_Outer;
                }
                Label_0195: {
                    ++n3;
                }
                continue Label_0028;
            }
        }
    }
    
    public final void a(final BroadcastReceiver broadcastReceiver, final IntentFilter intentFilter) {
        synchronized (this.b) {
            final g g = new g(intentFilter, broadcastReceiver);
            ArrayList<IntentFilter> list = this.b.get(broadcastReceiver);
            if (list == null) {
                list = new ArrayList<IntentFilter>(1);
                this.b.put(broadcastReceiver, list);
            }
            list.add(intentFilter);
            for (int i = 0; i < intentFilter.countActions(); ++i) {
                final String action = intentFilter.getAction(i);
                ArrayList<?> list2 = this.c.get(action);
                if (list2 == null) {
                    list2 = new ArrayList<Object>(1);
                    this.c.put(action, list2);
                }
                list2.add(g);
            }
        }
    }
    
    public final boolean a(final Intent intent) {
        // monitorexit(hashMap)
        while (true) {
            while (true) {
                String action;
                String resolveTypeIfNeeded;
                Uri data;
                String scheme;
                Set categories;
                int n;
                ArrayList<g> list;
                g g;
                int match;
                int n2;
                ArrayList<g> list2;
                ArrayList<g> list3 = null;
                String s;
                int i;
                Label_0490_Outer:Block_4_Outer:Label_0428_Outer:
                while (true) {
                Label_0490:
                    while (true) {
                        Block_17_Outer:Label_0309_Outer:Label_0156_Outer:
                        while (true) {
                            Label_0500: {
                                while (true) {
                                Block_13_Outer:
                                    while (true) {
                                        synchronized (this.b) {
                                            action = intent.getAction();
                                            resolveTypeIfNeeded = intent.resolveTypeIfNeeded(this.a.getContentResolver());
                                            data = intent.getData();
                                            scheme = intent.getScheme();
                                            categories = intent.getCategories();
                                            if ((0x8 & intent.getFlags()) == 0x0) {
                                                break Label_0500;
                                            }
                                            n = 1;
                                            if (n != 0) {
                                                Log.v("LocalBroadcastManager", "Resolving type " + resolveTypeIfNeeded + " scheme " + scheme + " of intent " + intent);
                                            }
                                            list = this.c.get(intent.getAction());
                                            if (list == null) {
                                                break;
                                            }
                                            if (n != 0) {
                                                Log.v("LocalBroadcastManager", "Action list: " + list);
                                            }
                                            break Block_13_Outer;
                                            Label_0237: {
                                                match = g.a.match(action, resolveTypeIfNeeded, scheme, data, categories, "LocalBroadcastManager");
                                            }
                                            // iftrue(Label_0331:, match < 0)
                                            // iftrue(Label_0209:, n == 0)
                                            // iftrue(Label_0541:, n2 >= list.size())
                                            // iftrue(Label_0474:, list3 != null)
                                            // iftrue(Label_0506:, n == 0)
                                            // iftrue(Label_0295:, n == 0)
                                            while (true) {
                                                Label_0209: {
                                                    while (true) {
                                                        Block_15: {
                                                            break Block_15;
                                                            while (true) {
                                                                while (true) {
                                                                    while (true) {
                                                                        g = list.get(n2);
                                                                        Block_12: {
                                                                            break Block_12;
                                                                            list2 = new ArrayList<g>();
                                                                            list2.add(g);
                                                                            g.c = true;
                                                                            break Label_0490;
                                                                        }
                                                                        Log.v("LocalBroadcastManager", "Matching against filter " + g.a);
                                                                        break Label_0209;
                                                                        Log.v("LocalBroadcastManager", "  Filter's target already added");
                                                                        list2 = list3;
                                                                        break Label_0490;
                                                                        continue Block_17_Outer;
                                                                    }
                                                                    continue Label_0309_Outer;
                                                                }
                                                                continue Label_0156_Outer;
                                                            }
                                                        }
                                                        Log.v("LocalBroadcastManager", "  Filter matched!  match=0x" + Integer.toHexString(match));
                                                        continue Block_13_Outer;
                                                    }
                                                }
                                                continue Block_4_Outer;
                                            }
                                        }
                                        // iftrue(Label_0237:, !g.c)
                                        Label_0331: {
                                            if (n != 0) {
                                                switch (match) {
                                                    default: {
                                                        s = "unknown reason";
                                                        break;
                                                    }
                                                    case -3: {
                                                        s = "action";
                                                        break;
                                                    }
                                                    case -4: {
                                                        s = "category";
                                                        break;
                                                    }
                                                    case -2: {
                                                        s = "data";
                                                        break;
                                                    }
                                                    case -1: {
                                                        s = "type";
                                                        break;
                                                    }
                                                }
                                                Log.v("LocalBroadcastManager", "  Filter did not match: " + s);
                                            }
                                        }
                                        break Block_17_Outer;
                                        Label_0474:
                                        list2 = list3;
                                        continue Label_0490_Outer;
                                    }
                                    list3 = null;
                                    n2 = 0;
                                    continue Block_4_Outer;
                                    ++n2;
                                    list3 = list2;
                                    continue Block_4_Outer;
                                }
                            }
                            n = 0;
                            continue Label_0490_Outer;
                        }
                        list2 = list3;
                        continue Label_0490;
                    }
                    // iftrue(Label_0466:, this.e.hasMessages(1))
                    Label_0466: {
                        while (true) {
                            while (true) {
                                this.e.sendEmptyMessage(1);
                                break Label_0466;
                                this.d.add(new f(intent, list3));
                                continue Label_0428_Outer;
                            }
                            while (i < list3.size()) {
                                list3.get(i).c = false;
                                ++i;
                            }
                            continue;
                        }
                    }
                    // monitorexit(hashMap)
                    return true;
                }
                return false;
                Label_0541: {
                    if (list3 != null) {
                        i = 0;
                        continue;
                    }
                }
                break;
            }
            continue;
        }
    }
}
