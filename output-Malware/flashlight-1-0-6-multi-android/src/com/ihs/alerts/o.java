// 
// Decompiled by Procyon v0.5.30
// 

package com.ihs.alerts;

import android.app.Activity;
import android.content.Context;
import com.ihs.g.c;
import com.ihs.g.d;
import java.util.Random;
import java.util.Date;
import com.ihs.h.a;
import java.util.Map;

public final class o extends j
{
    private static o f;
    private int a;
    private int b;
    private int c;
    private double d;
    private Map e;
    private boolean g;
    
    private o() {
        this.a = 5;
        this.b = 0;
        this.g = false;
    }
    
    public static o a() {
        synchronized (o.class) {
            if (o.f == null) {
                o.f = new o();
            }
            return o.f;
        }
    }
    
    private boolean f() {
        if (this.e != null && !this.e.isEmpty()) {
            final a a = com.ihs.h.a.a();
            final int n = (int)((new Date().getTime() - a.h().getTime()) / 1000L);
            final boolean c = com.ihs.g.j.c("HSRateAlertNoPopUpForever");
            final int nextInt = new Random().nextInt(100);
            if (!c && n >= 86400 * this.c && a.i() >= 60.0 * this.d && a.j() >= this.a && nextInt < this.b) {
                return true;
            }
        }
        return false;
    }
    
    public final void a(final Map map) {
        final Map d = com.ihs.g.d.d(map, "RateAlert");
        if (d != null) {
            final Map a = com.ihs.alerts.d.a(d);
            if (a != null) {
                this.b = com.ihs.g.d.e(a, "Probability");
                this.c = com.ihs.g.d.e(a, "DaysFromFirstUse");
                this.d = com.ihs.g.d.e(a, "AccumulatedUseTime");
                this.a = com.ihs.g.d.e(a, "UseCount");
            }
            com.ihs.g.c.a("rate alert show conditions: probability =  " + this.b + ",days = " + this.c + ", used time = " + this.d + ", used count = " + this.a);
            this.e = com.ihs.g.d.d(d, "Alert");
            com.ihs.g.c.a("rate alert = " + this.e.toString());
        }
    }
    
    public final void b() {
        this.g = false;
    }
    
    public final void c() {
        if (this.e != null) {
            this.e.clear();
        }
        this.g = false;
    }
    
    @Override
    protected final Object clone() {
        throw new CloneNotSupportedException();
    }
    
    public final h d() {
        this.g = this.f();
        com.ihs.g.c.a("check show rate alert result is = " + this.g);
        if (this.g) {
            com.ihs.a.d.a();
            com.ihs.a.d.c("HSRateAlert_Showed");
            com.ihs.a.d.a().a("iHandyAlerts_Events", "iHandyAlerts_RateAlert_Showed", com.ihs.g.a.a.getPackageName());
            return j.a(this.e, com.ihs.alerts.e.a);
        }
        return null;
    }
    
    public final com.ihs.alerts.a e() {
        this.g = this.f();
        if (this.g) {
            com.ihs.a.d.a();
            com.ihs.a.d.c("HSRateAlert_Showed");
            com.ihs.a.d.a().a("iHandyAlerts_Events", "iHandyAlerts_RateAlert_Showed", com.ihs.g.a.a.getPackageName());
            final Activity b = com.ihs.g.a.b;
            final Map e = this.e;
            com.ihs.alerts.d.a();
            final com.ihs.alerts.a a = new com.ihs.alerts.a((Context)b, e);
            a.show();
            return a;
        }
        return null;
    }
}
