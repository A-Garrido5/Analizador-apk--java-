// 
// Decompiled by Procyon v0.5.30
// 

package com.ihs.alerts;

import java.util.Random;
import java.util.Date;
import com.ihs.h.a;
import com.ihs.g.c;
import com.ihs.g.d;
import java.util.Map;

public final class k extends j
{
    private static k f;
    private int a;
    private int b;
    private int c;
    private double d;
    private Map e;
    
    private k() {
        this.a = 5;
        this.b = 0;
    }
    
    public static k a() {
        synchronized (k.class) {
            if (k.f == null) {
                k.f = new k();
            }
            return k.f;
        }
    }
    
    public final void a(final Map map) {
        final Map d = com.ihs.g.d.d(map, "ExitAlert");
        if (d != null) {
            final Map a = com.ihs.alerts.d.a(d);
            if (a != null) {
                this.b = com.ihs.g.d.e(a, "Probability");
                this.c = com.ihs.g.d.e(a, "DaysFromFirstUse");
                this.d = com.ihs.g.d.e(a, "AccumulatedUseTime");
                this.a = com.ihs.g.d.e(a, "UseCount");
            }
            this.e = com.ihs.g.d.d(d, "Alert");
            com.ihs.g.c.a("testing", "rate alert = " + this.e.toString());
        }
    }
    
    public final boolean b() {
        if (this.e != null && !this.e.isEmpty()) {
            final a a = com.ihs.h.a.a();
            final int n = (int)((new Date().getTime() - a.h().getTime()) / 1000L);
            final boolean c = com.ihs.g.j.c("HSRateAlertNoPopUpForever");
            final int nextInt = new Random().nextInt(100);
            if (!c && n >= 86400 * this.c && a.i() >= 60.0 * this.d && a.j() >= this.a && nextInt < this.b) {
                return true;
            }
        }
        return false;
    }
    
    public final void c() {
        if (this.e != null) {
            this.e.clear();
        }
    }
    
    @Override
    protected final Object clone() {
        throw new CloneNotSupportedException();
    }
    
    public final h d() {
        com.ihs.a.d.a();
        com.ihs.a.d.c("HSExitAlert_Showed");
        com.ihs.a.d.a().a("iHandyAlerts_Events", "iHandyAlerts_ExitAlert_Showed", com.ihs.g.a.a.getPackageName());
        return j.a(this.e, com.ihs.alerts.e.f);
    }
}
