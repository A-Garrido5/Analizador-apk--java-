// 
// Decompiled by Procyon v0.5.30
// 

package com.ihs.session;

import android.view.Window;
import com.ihs.g.a;
import android.app.Activity;
import com.ihs.g.e;
import android.text.TextUtils;
import com.ihs.g.j;
import com.ihs.g.c;
import android.net.Uri;
import android.content.Intent;
import android.content.Context;
import android.os.Bundle;

public class HSPushActionActivity extends HSActivity
{
    protected static HSPushActionActivity b;
    public static Bundle d;
    private static /* synthetic */ int[] f;
    private boolean a;
    protected Bundle c;
    private boolean e;
    
    static {
        HSPushActionActivity.d = new Bundle();
    }
    
    public HSPushActionActivity() {
        this.a = false;
        this.e = false;
    }
    
    private static void a(final Context context, final String s, final String s2) {
        if (s == null || s2 == null) {
            return;
        }
        try {
            c("StartActivity");
            final Intent intent = new Intent();
            intent.setClassName(s, s2);
            intent.setFlags(335544320);
            context.startActivity(intent);
        }
        catch (Exception ex) {
            ex.printStackTrace();
        }
    }
    
    private static void a(final Context context, final String s, final String s2, final String s3) {
        if (s == null) {
            return;
        }
        try {
            c("SendEmail");
            final Intent intent = new Intent("android.intent.action.SENDTO", Uri.parse("mailto:" + s));
            if (s2 != null) {
                intent.putExtra("android.intent.extra.SUBJECT", s2);
            }
            if (s3 != null) {
                intent.putExtra("android.intent.extra.TEXT", s3);
            }
            intent.setFlags(335544320);
            context.startActivity(intent);
        }
        catch (Exception ex) {
            ex.printStackTrace();
        }
    }
    
    private void a(final Bundle bundle) {
        this.e = false;
        final String string = bundle.getString("Actions");
        Label_0296: {
            Label_0217: {
                Label_0200: {
                    Label_0173: {
                        try {
                            final String[] split = string.split(",");
                            com.ihs.g.c.a("ihsgcmpart", "zero action is  " + split[0]);
                            final d d = com.ihs.session.d.values()[Integer.valueOf(split[0])];
                            com.ihs.g.c.a("ihsgcmpart", "action type is " + d);
                            switch (c()[d.ordinal()]) {
                                case 3: {
                                    final String string2 = bundle.getString("URL");
                                    if (string2 != null) {
                                        this.a(string2);
                                    }
                                    return;
                                }
                                case 5: {
                                    break;
                                }
                                case 4: {
                                    break Label_0173;
                                }
                                case 6: {
                                    break Label_0200;
                                }
                                case 7: {
                                    break Label_0217;
                                }
                                case 8: {
                                    break Label_0296;
                                }
                                default: {
                                    return;
                                }
                            }
                        }
                        catch (Exception ex) {
                            ex.printStackTrace();
                            return;
                        }
                        com.ihs.alerts.d.a();
                        j.a("HSRateAlertNoPopUpForever", true);
                        return;
                    }
                    this.a(bundle.getString("Market"), bundle.getString("Package"));
                    com.ihs.alerts.d.a();
                    j.a("HSRateAlertNoPopUpForever", true);
                    return;
                }
                this.a(bundle.getString("Market"), bundle.getString("Package"));
                return;
            }
            final String string3 = bundle.getString("Mailto");
            final String string4 = bundle.getString("MailSubject");
            final String string5 = bundle.getString("MailBody");
            final StringBuffer sb = new StringBuffer();
            sb.append("\n");
            sb.append("\n");
            sb.append("\n");
            sb.append(string5);
            a((Context)this, string3, string4, sb.toString());
            return;
        }
        final String string6 = bundle.getString("Package");
        final String string7 = bundle.getString("Activity");
        final String string8 = bundle.getString("IntentFilter");
        if (string6 != null && string6.length() > 3 && string7 != null && string7.length() > 4) {
            a((Context)this, string6, string7);
        }
        else if (string8 != null) {
            this.b(string8);
        }
        this.e = true;
    }
    
    private void a(final String s) {
        try {
            this.getApplicationContext();
            c("GotoUrl");
            this.startActivity(new Intent("android.intent.action.VIEW", Uri.parse(s)));
        }
        catch (Exception ex) {
            ex.printStackTrace();
        }
    }
    
    private void a(final String s, final String s2) {
        if (TextUtils.isEmpty((CharSequence)s) || TextUtils.isEmpty((CharSequence)s2)) {
            return;
        }
        com.ihs.g.e.a().a(this, s, s2);
    }
    
    private void b(final String action) {
        if (action == null) {
            return;
        }
        try {
            com.ihs.g.c.a("ihsgcmpart", "use intent filter to start activity, action is " + action);
            c("StartActivity");
            final Intent intent = new Intent();
            intent.setAction(action);
            this.startActivity(intent);
        }
        catch (Exception ex) {
            ex.printStackTrace();
        }
    }
    
    private static void c(final String s) {
        com.ihs.a.d.a();
        com.ihs.a.d.c("HSPushAlert_Message_" + s + "_Clicked");
        com.ihs.a.d.a().a("iHandyAlerts_Events", "iHandyAlerts_PushAlert_MarketingType_" + s + "_Invoked", a.a.getPackageName());
    }
    
    private static /* synthetic */ int[] c() {
        final int[] f = HSPushActionActivity.f;
        if (f != null) {
            return f;
        }
        final int[] f2 = new int[com.ihs.session.d.values().length];
        while (true) {
            try {
                f2[com.ihs.session.d.b.ordinal()] = 2;
                try {
                    f2[com.ihs.session.d.f.ordinal()] = 6;
                    try {
                        f2[com.ihs.session.d.g.ordinal()] = 7;
                        try {
                            f2[com.ihs.session.d.e.ordinal()] = 5;
                            try {
                                f2[com.ihs.session.d.a.ordinal()] = 1;
                                try {
                                    f2[com.ihs.session.d.h.ordinal()] = 8;
                                    try {
                                        f2[com.ihs.session.d.d.ordinal()] = 4;
                                        try {
                                            f2[com.ihs.session.d.c.ordinal()] = 3;
                                            return HSPushActionActivity.f = f2;
                                        }
                                        catch (NoSuchFieldError noSuchFieldError) {}
                                    }
                                    catch (NoSuchFieldError noSuchFieldError2) {}
                                }
                                catch (NoSuchFieldError noSuchFieldError3) {}
                            }
                            catch (NoSuchFieldError noSuchFieldError4) {}
                        }
                        catch (NoSuchFieldError noSuchFieldError5) {}
                    }
                    catch (NoSuchFieldError noSuchFieldError6) {}
                }
                catch (NoSuchFieldError noSuchFieldError7) {}
            }
            catch (NoSuchFieldError noSuchFieldError8) {
                continue;
            }
            break;
        }
    }
    
    protected void a() {
    }
    
    protected final void b(final int n) {
        final d d = com.ihs.session.d.values()[n];
        this.e = false;
        switch (c()[d.ordinal()]) {
            case 3: {
                final String string = this.c.getString("URL");
                if (string != null) {
                    this.a(string);
                    break;
                }
                break;
            }
            case 5: {
                com.ihs.alerts.d.a();
                j.a("HSRateAlertNoPopUpForever", true);
                break;
            }
            case 4: {
                this.a(this.c.getString("Market"), this.c.getString("Package"));
                com.ihs.alerts.d.a();
                j.a("HSRateAlertNoPopUpForever", true);
                break;
            }
            case 6: {
                this.a(this.c.getString("Market"), this.c.getString("Package"));
                break;
            }
            case 7: {
                final String string2 = this.c.getString("Mailto");
                final String string3 = this.c.getString("MailSubject");
                final String string4 = this.c.getString("MailBody");
                final StringBuffer sb = new StringBuffer();
                sb.append("\n");
                sb.append("\n");
                sb.append("\n");
                sb.append(string4);
                a((Context)this, string2, string3, sb.toString());
                break;
            }
            case 8: {
                final String string5 = this.c.getString("Package");
                final String string6 = this.c.getString("Activity");
                final String string7 = this.c.getString("IntentFilter");
                if (string5 != null && string5.length() > 3 && string6 != null && string6.length() > 4) {
                    a((Context)this, string5, string6);
                }
                else if (string7 != null) {
                    this.b(string7);
                }
                this.e = true;
                break;
            }
        }
        HSPushActionActivity.b = null;
    }
    
    public final boolean b() {
        return this.a;
    }
    
    @Override
    protected void onCreate(final Bundle bundle) {
        super.onCreate(bundle);
        (HSPushActionActivity.b = this).requestWindowFeature(1);
        final Window window = this.getWindow();
        window.addFlags(4718592);
        window.addFlags(2097280);
    }
    
    @Override
    protected void onDestroy() {
        this.e = false;
        super.onDestroy();
        if (this.c != null) {
            this.c.clear();
        }
        this.getIntent().removeExtra(String.valueOf(this.getPackageName()) + "iHSPushTag");
        HSPushActionActivity.d.clear();
    }
    
    @Override
    protected void onResume() {
        super.onResume();
        this.a = false;
        final Bundle bundleExtra = this.getIntent().getBundleExtra(String.valueOf(this.getPackageName()) + "iHSPushTag");
        if (bundleExtra != null) {
            this.c = bundleExtra;
            switch (bundleExtra.getInt("AlertType")) {
                default: {
                    this.a();
                    return;
                }
                case 1: {
                    this.a = true;
                    return;
                }
                case 2: {
                    com.ihs.g.c.a("ihsgcmpart", "received bundle data is " + bundleExtra.toString());
                    this.getApplicationContext();
                    this.a(bundleExtra);
                    break;
                }
            }
        }
        else if (HSPushActionActivity.d != null) {
            this.getApplicationContext();
            this.a(HSPushActionActivity.d);
        }
        this.a();
    }
    
    @Override
    protected void onStop() {
        if (this.e) {
            String s;
            if (this.c != null) {
                s = this.c.getString("OpenView");
            }
            else {
                s = HSPushActionActivity.d.getString("OpenView");
            }
            com.ihs.g.c.a("ihsPushOpenView", "start activity, open view = " + s);
            if (!TextUtils.isEmpty((CharSequence)s)) {
                final Intent intent = new Intent("com.ihs.open.view.ACTION");
                intent.addCategory(this.getPackageName());
                intent.putExtra("OpenView", s);
                this.sendBroadcast(intent);
            }
            this.e = false;
        }
        super.onStop();
    }
}
