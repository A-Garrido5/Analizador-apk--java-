// 
// Decompiled by Procyon v0.5.30
// 

package com.ihs.gcm;

import android.app.PendingIntent;
import android.os.SystemClock;
import android.app.AlarmManager;
import android.content.Intent;
import com.ihs.msg.push.a;
import com.ihs.g.c;
import java.util.Map;
import com.ihs.a.d;
import java.util.HashMap;
import android.content.Context;
import java.util.concurrent.TimeUnit;
import java.util.Random;
import android.app.IntentService;

public abstract class GCMRegisteToken extends IntentService
{
    private static int a;
    private static final Random b;
    private static final int c;
    private static final String d;
    
    static {
        GCMRegisteToken.a = 0;
        b = new Random();
        c = (int)TimeUnit.SECONDS.toMillis(3600L);
        d = Long.toBinaryString(GCMRegisteToken.b.nextLong());
    }
    
    public static void a(final Context context, final String s) {
        final HashMap<String, String> hashMap = new HashMap<String, String>();
        hashMap.put("Error Msg", s);
        com.ihs.a.d.a();
        com.ihs.a.d.a("GCM_Get_Token_Failed", hashMap);
        com.ihs.g.c.a("iHSGCMPart", "Registration error: " + s);
        if ("SERVICE_NOT_AVAILABLE".equals(s)) {
            final int e = com.ihs.msg.push.a.e(context);
            final int n = e / 2 + GCMRegisteToken.b.nextInt(e);
            com.ihs.g.c.a("iHSGCMPart", "Scheduling registration retry, backoff = " + n + " (" + e + ")");
            final Intent intent = new Intent("com.google.android.gcm.intent.RETRY");
            intent.putExtra("token", GCMRegisteToken.d);
            ((AlarmManager)context.getSystemService("alarm")).set(3, SystemClock.elapsedRealtime() + n, PendingIntent.getBroadcast(context, 0, intent, 0));
            if (e < GCMRegisteToken.c) {
                com.ihs.msg.push.a.a(context, e * 2);
            }
        }
    }
}
