// 
// Decompiled by Procyon v0.5.30
// 

package com.ihs.i;

import org.apache.http.client.HttpClient;
import org.apache.http.Header;
import org.apache.http.StatusLine;
import org.apache.http.HttpResponse;
import org.json.JSONObject;
import java.io.OutputStream;
import java.io.ByteArrayOutputStream;
import org.apache.http.client.methods.HttpUriRequest;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import android.os.AsyncTask;

final class ah extends AsyncTask
{
    String a;
    final /* synthetic */ ag b;
    
    ah(final ag b) {
        this.b = b;
        this.a = null;
    }
    
    private String a(final String... array) {
        final DefaultHttpClient defaultHttpClient = new DefaultHttpClient();
        HttpResponse execute;
        StatusLine statusLine;
        try {
            execute = ((HttpClient)defaultHttpClient).execute((HttpUriRequest)new HttpGet(array[0]));
            statusLine = execute.getStatusLine();
            if (statusLine.getStatusCode() == 200) {
                final ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
                execute.getEntity().writeTo((OutputStream)byteArrayOutputStream);
                byteArrayOutputStream.close();
                final JSONObject jsonObject = new JSONObject(byteArrayOutputStream.toString());
                if (jsonObject.getInt("code") == 0) {
                    return jsonObject.getJSONObject("data").getString("url");
                }
                this.a = "response read code != 0";
                return null;
            }
        }
        catch (Exception ex) {
            this.a = ex.getMessage();
            return null;
        }
        if (statusLine.getStatusCode() != 301 && statusLine.getStatusCode() != 302) {
            execute.getEntity().getContent().close();
            this.a = statusLine.getReasonPhrase();
            throw new p(statusLine.getReasonPhrase());
        }
        final Header firstHeader = execute.getFirstHeader("Location");
        if (firstHeader != null) {
            return firstHeader.getValue();
        }
        this.a = "status code is SC_MOVED, and location is null";
        return null;
    }
}
