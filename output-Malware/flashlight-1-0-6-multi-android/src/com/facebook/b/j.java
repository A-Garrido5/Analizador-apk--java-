// 
// Decompiled by Procyon v0.5.30
// 

package com.facebook.b;

import org.json.JSONException;
import java.io.IOException;
import com.facebook.ak;
import org.json.JSONTokener;
import org.json.JSONObject;
import java.io.InputStream;

final class j
{
    static JSONObject a(final InputStream inputStream) {
        int n = 0;
        if (inputStream.read() != 0) {
            return null;
        }
        int n2 = 0;
        int n3 = 0;
    Label_0025_Outer:
        while (true) {
            Label_0099: {
                if (n2 < 3) {
                    break Label_0099;
                }
                final byte[] array = new byte[n3];
                JSONTokener jsonTokener;
                Object nextValue;
                int read;
                int read2;
                Block_8_Outer:Block_7_Outer:
                while (true) {
                    Label_0142: {
                        if (n < array.length) {
                            break Label_0142;
                        }
                        jsonTokener = new JSONTokener(new String(array));
                        try {
                            nextValue = jsonTokener.nextValue();
                            if (!(nextValue instanceof JSONObject)) {
                                v.a(ak.d, c.a, "readHeader: expected JSONObject, got " + ((JSONObject)nextValue).getClass().getCanonicalName());
                                return null;
                            }
                            return (JSONObject)nextValue;
                            Label_0202: {
                                n += read;
                            }
                            continue Block_8_Outer;
                            Label_0124:
                            n3 = (n3 << 8) + (read2 & 0xFF);
                            ++n2;
                            continue Label_0025_Outer;
                            // iftrue(Label_0202:, read > 0)
                            while (true) {
                                while (true) {
                                    v.a(ak.d, c.a, "readHeader: stream.read stopped at " + (Object)n + " when expected " + array.length);
                                    return null;
                                    v.a(ak.d, c.a, "readHeader: stream.read returned -1 while reading header size");
                                    return null;
                                    read = inputStream.read(array, n, array.length - n);
                                    continue Block_7_Outer;
                                }
                                read2 = inputStream.read();
                                continue;
                            }
                        }
                        // iftrue(Label_0124:, read2 != -1)
                        catch (JSONException ex) {
                            throw new IOException(ex.getMessage());
                        }
                    }
                    break;
                }
            }
        }
    }
}
