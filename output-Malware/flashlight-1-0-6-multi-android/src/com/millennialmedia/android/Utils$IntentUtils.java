// 
// Decompiled by Procyon v0.5.30
// 

package com.millennialmedia.android;

import java.io.File;
import android.app.Activity;
import android.net.Uri;
import android.text.TextUtils;
import android.content.Intent;
import android.content.Context;

class Utils$IntentUtils
{
    private static void fixDataAndTypeForVideo(final Context context, final Intent intent) {
        final Uri data = intent.getData();
        if (data != null) {
            final String lastPathSegment = data.getLastPathSegment();
            if (TextUtils.isEmpty((CharSequence)intent.getStringExtra("class")) && !TextUtils.isEmpty((CharSequence)lastPathSegment) && (lastPathSegment.endsWith(".mp4") || lastPathSegment.endsWith(".3gp") || lastPathSegment.endsWith(".mkv") || lastPathSegment.endsWith("content.once"))) {
                intent.setDataAndType(intent.getData(), "video/*");
            }
        }
    }
    
    static Intent getIntentForUri(final HttpRedirection$RedirectionListenerImpl httpRedirection$RedirectionListenerImpl) {
        if (httpRedirection$RedirectionListenerImpl == null) {
            return null;
        }
        final Uri destinationUri = httpRedirection$RedirectionListenerImpl.destinationUri;
        final Context context = (Context)httpRedirection$RedirectionListenerImpl.weakContext.get();
        if (context != null) {
            while (true) {
                Label_0788: {
                    if (destinationUri == null) {
                        break Label_0788;
                    }
                    final String scheme = destinationUri.getScheme();
                    if (scheme == null) {
                        break Label_0788;
                    }
                    Intent intent2;
                    if (scheme.equalsIgnoreCase("market")) {
                        MMLog.v("Utils", "Creating Android Market intent.");
                        final Intent intent = new Intent("android.intent.action.VIEW", destinationUri);
                        MMSDK$Event.intentStarted(context, "market", httpRedirection$RedirectionListenerImpl.creatorAdImplInternalId);
                        intent2 = intent;
                    }
                    else if (scheme.equalsIgnoreCase("rtsp")) {
                        MMLog.v("Utils", "Creating streaming video player intent.");
                        final Intent intent3 = new Intent(context, (Class)MMActivity.class);
                        intent3.setData(destinationUri);
                        intent3.putExtra("class", "com.millennialmedia.android.VideoPlayerActivity");
                        intent2 = intent3;
                    }
                    else if (scheme.equalsIgnoreCase("tel")) {
                        MMLog.v("Utils", "Creating telephone intent.");
                        final Intent intent4 = new Intent("android.intent.action.DIAL", destinationUri);
                        MMSDK$Event.intentStarted(context, "tel", httpRedirection$RedirectionListenerImpl.creatorAdImplInternalId);
                        intent2 = intent4;
                    }
                    else if (scheme.equalsIgnoreCase("sms")) {
                        MMLog.v("Utils", "Creating txt message intent.");
                        final String schemeSpecificPart = destinationUri.getSchemeSpecificPart();
                        String replace = "";
                        final int index = schemeSpecificPart.indexOf("?body=");
                        if (index != -1 && schemeSpecificPart.length() > index) {
                            replace = schemeSpecificPart.substring(0, index).replace(',', ';');
                        }
                        final Intent intent5 = new Intent("android.intent.action.VIEW", Uri.parse("sms:" + replace));
                        if (index == -1) {
                            intent5.putExtra("sms_body", schemeSpecificPart.substring(index + 6));
                        }
                        MMSDK$Event.intentStarted(context, "sms", httpRedirection$RedirectionListenerImpl.creatorAdImplInternalId);
                        intent2 = intent5;
                    }
                    else if (scheme.equalsIgnoreCase("mailto")) {
                        final Intent intent6 = new Intent("android.intent.action.VIEW", destinationUri);
                        MMSDK$Event.intentStarted(context, "email", httpRedirection$RedirectionListenerImpl.creatorAdImplInternalId);
                        intent2 = intent6;
                    }
                    else if (scheme.equalsIgnoreCase("geo")) {
                        MMLog.v("Utils", "Creating Google Maps intent.");
                        final Intent intent7 = new Intent("android.intent.action.VIEW", destinationUri);
                        MMSDK$Event.intentStarted(context, "geo", httpRedirection$RedirectionListenerImpl.creatorAdImplInternalId);
                        intent2 = intent7;
                    }
                    else if (scheme.equalsIgnoreCase("https")) {
                        MMLog.v("Utils", "Creating launch browser intent.");
                        final Intent intent8 = new Intent("android.intent.action.VIEW", destinationUri);
                        MMSDK$Event.intentStarted(context, "browser", httpRedirection$RedirectionListenerImpl.creatorAdImplInternalId);
                        intent2 = intent8;
                    }
                    else if (scheme.equalsIgnoreCase("mmbrowser")) {
                        String s = destinationUri.toString().substring(12);
                        if (s != null && !s.contains("://")) {
                            s = s.replaceFirst("//", "://");
                        }
                        MMLog.v("Utils", "MMBrowser - Creating launch browser intent.");
                        final Intent intent9 = new Intent("android.intent.action.VIEW", Uri.parse(s));
                        MMSDK$Event.intentStarted(context, "browser", httpRedirection$RedirectionListenerImpl.creatorAdImplInternalId);
                        intent2 = intent9;
                    }
                    else if (scheme.equalsIgnoreCase("http")) {
                        if (destinationUri.getLastPathSegment() != null && (destinationUri.getLastPathSegment().endsWith(".mp4") || destinationUri.getLastPathSegment().endsWith(".3gp"))) {
                            MMLog.v("Utils", "Creating video player intent.");
                            final Intent intent10 = new Intent(context, (Class)MMActivity.class);
                            intent10.setData(destinationUri);
                            intent10.putExtra("class", "com.millennialmedia.android.VideoPlayerActivity");
                            MMSDK$Event.intentStarted(context, "streamingVideo", httpRedirection$RedirectionListenerImpl.creatorAdImplInternalId);
                            intent2 = intent10;
                        }
                        else {
                            if (httpRedirection$RedirectionListenerImpl.canOpenOverlay()) {
                                MMLog.v("Utils", "Creating launch overlay intent.");
                                final Intent intent11 = new Intent(context, (Class)MMActivity.class);
                                intent11.putExtra("class", AdViewOverlayActivity.class.getCanonicalName());
                                intent11.setData(destinationUri);
                                return intent11;
                            }
                            MMLog.v("Utils", "Creating launch browser intent.");
                            MMSDK$Event.intentStarted(context, "browser", httpRedirection$RedirectionListenerImpl.creatorAdImplInternalId);
                            intent2 = new Intent("android.intent.action.VIEW", destinationUri);
                        }
                    }
                    else {
                        MMLog.v("Utils", String.format("Creating intent for unrecognized URI. %s", destinationUri));
                        intent2 = new Intent("android.intent.action.VIEW", destinationUri);
                    }
                    if (intent2 != null) {
                        MMLog.v("Utils", String.format("%s resolved to Intent: %s", destinationUri, intent2));
                        return intent2;
                    }
                    MMLog.v("Utils", String.format("%s", destinationUri));
                    return intent2;
                }
                Intent intent2 = null;
                continue;
            }
        }
        return null;
    }
    
    static void startActionView(final Context context, final String s) {
        startActivity(context, new Intent("android.intent.action.VIEW", Uri.parse(s)));
    }
    
    static void startActivity(final Context context, final Intent intent) {
        if (!(context instanceof Activity)) {
            intent.addFlags(268435456);
        }
        fixDataAndTypeForVideo(context, intent);
        context.startActivity(intent);
    }
    
    static void startAdViewOverlayActivity(final Context context) {
        final Intent intent = new Intent(context, (Class)MMActivity.class);
        intent.putExtra("class", "com.millennialmedia.android.AdViewOverlayActivity");
        startActivity(context, intent);
    }
    
    static void startAdViewOverlayActivity(final Context context, final Intent intent) {
        intent.setClass(context, (Class)MMActivity.class);
        intent.putExtra("class", "com.millennialmedia.android.AdViewOverlayActivity");
        startActivity(context, intent);
    }
    
    static void startAdViewOverlayActivityWithData(final Context context, final String s) {
        final Intent intent = new Intent(context, (Class)MMActivity.class);
        intent.putExtra("class", "com.millennialmedia.android.AdViewOverlayActivity");
        intent.setData(Uri.parse(s));
        startActivity(context, intent);
    }
    
    static void startCachedVideoPlayerActivity(final Context context, final Intent intent) {
        intent.setClass(context, (Class)MMActivity.class);
        intent.putExtra("class", "com.millennialmedia.android.CachedVideoPlayerActivity");
        startActivity(context, intent);
    }
    
    static void startPickerActivity(final Context context, final File file, final String s) {
        final Intent intent = new Intent(context, (Class)MMActivity.class);
        intent.setData(Uri.fromFile(file));
        intent.putExtra("type", s);
        intent.putExtra("class", "com.millennialmedia.android.BridgeMMMedia$PickerActivity");
        startActivity(context, intent);
    }
    
    static void startVideoPlayerActivityWithData(final Context context, final Uri data) {
        final Intent intent = new Intent(context, (Class)MMActivity.class);
        intent.setData(data);
        intent.putExtra("class", "com.millennialmedia.android.VideoPlayerActivity");
        startActivity(context, intent);
    }
    
    static void startVideoPlayerActivityWithData(final Context context, final File file) {
        startVideoPlayerActivityWithData(context, Uri.fromFile(file));
    }
    
    static void startVideoPlayerActivityWithData(final Context context, final String s) {
        startVideoPlayerActivityWithData(context, Uri.parse(s));
    }
}
