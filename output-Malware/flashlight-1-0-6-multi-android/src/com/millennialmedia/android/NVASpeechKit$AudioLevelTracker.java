// 
// Decompiled by Procyon v0.5.30
// 

package com.millennialmedia.android;

class NVASpeechKit$AudioLevelTracker
{
    private static final double MAX = 80.0;
    private static final double MIN = 40.0;
    private static final double NORMALIZE_FACTOR = 4.004004004004004;
    private static final double SCALE = 9.99;
    double audioLevel;
    int audioLevelCount;
    double averageLevel;
    boolean isTrackingAudioSample;
    
    public NVASpeechKit$AudioLevelTracker() {
        this.reset();
    }
    
    private static double normalize(final double n) {
        return Math.min(9.99, Math.max(Math.floor(n - 40.0) / 4.004004004004004, 0.0));
    }
    
    public boolean isTrackingAudioSample() {
        return this.isTrackingAudioSample;
    }
    
    public void reset() {
        this.averageLevel = 0.0;
        this.audioLevelCount = 0;
        this.isTrackingAudioSample = false;
    }
    
    public void startTrackingAudioSample() {
        this.reset();
        this.isTrackingAudioSample = true;
    }
    
    public boolean update(final double audioLevel) {
        final double averageLevel = this.averageLevel;
        final double audioLevel2 = this.audioLevel;
        this.audioLevel = audioLevel;
        ++this.audioLevelCount;
        this.averageLevel = (audioLevel + averageLevel * (-1 + this.audioLevelCount)) / this.audioLevelCount;
        return !this.isTrackingAudioSample && this.audioLevel != audioLevel2;
    }
}
