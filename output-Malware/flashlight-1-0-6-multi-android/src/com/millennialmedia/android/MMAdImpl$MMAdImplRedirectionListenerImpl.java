// 
// Decompiled by Procyon v0.5.30
// 

package com.millennialmedia.android;

import android.content.Context;
import android.app.Activity;
import android.net.Uri;
import java.lang.ref.WeakReference;

class MMAdImpl$MMAdImplRedirectionListenerImpl extends HttpRedirection$RedirectionListenerImpl
{
    WeakReference adImplRef;
    
    public MMAdImpl$MMAdImplRedirectionListenerImpl(final MMAdImpl mmAdImpl) {
        if (mmAdImpl != null) {
            this.adImplRef = new WeakReference((T)mmAdImpl);
            this.creatorAdImplInternalId = mmAdImpl.internalId;
        }
    }
    
    @Override
    public boolean isActivityStartable(final Uri uri) {
        final MMAdImpl mmAdImpl = (MMAdImpl)this.adImplRef.get();
        if (mmAdImpl != null) {
            final Context context = mmAdImpl.getContext();
            if (context != null && context instanceof Activity && ((Activity)context).isFinishing()) {
                return false;
            }
        }
        return true;
    }
    
    @Override
    public void startingActivity(final Uri uri) {
        super.startingActivity(uri);
        if (uri.getScheme().equalsIgnoreCase("http") || uri.getScheme().equalsIgnoreCase("https")) {
            final MMAdImpl mmAdImpl = (MMAdImpl)this.adImplRef.get();
            if (mmAdImpl != null) {
                MMSDK$Event.overlayOpened(mmAdImpl);
            }
        }
    }
    
    @Override
    public void updateLastVideoViewedTime() {
        final MMAdImpl mmAdImpl = (MMAdImpl)this.adImplRef.get();
        if (mmAdImpl != null && mmAdImpl.adType != null) {
            HandShake.sharedHandShake(mmAdImpl.getContext()).updateLastVideoViewedTime(mmAdImpl.getContext(), mmAdImpl.adType);
        }
    }
}
