// 
// Decompiled by Procyon v0.5.30
// 

package com.nexage.android.internal;

import android.content.SharedPreferences$Editor;
import android.content.SharedPreferences;

public class SessionDepthManager
{
    private static final String LAST_DISPLAY_KEY = "LastDisplayKey";
    private static final String SESSION_DEPTH_KEY = "SessionDepthKey";
    private static final String SESSION_DEPTH_PREFS = "com.nexage.SessionDepth";
    private static final int SESSION_TIMEOUT = 15;
    private static final String TAG = "SessionDepthManager";
    private static long lastDisplayTime;
    private static int sessionDepth;
    
    static {
        SessionDepthManager.sessionDepth = 1;
        SessionDepthManager.lastDisplayTime = 0L;
    }
    
    public static int getSessionDepth() {
        readPrefs();
        if (System.currentTimeMillis() - SessionDepthManager.lastDisplayTime > 900000L) {
            SessionDepthManager.sessionDepth = 1;
            writePrefs();
        }
        return SessionDepthManager.sessionDepth;
    }
    
    public static void incrementSessionDepth() {
        ++SessionDepthManager.sessionDepth;
        writePrefs();
    }
    
    private static void readPrefs() {
        final SharedPreferences sharedPreferences = NexageContext.s_Context.getSharedPreferences("com.nexage.SessionDepth", 0);
        SessionDepthManager.sessionDepth = sharedPreferences.getInt("SessionDepthKey", 1);
        SessionDepthManager.lastDisplayTime = sharedPreferences.getLong("LastDisplayKey", 0L);
    }
    
    private static void writePrefs() {
        final SharedPreferences$Editor edit = NexageContext.s_Context.getSharedPreferences("com.nexage.SessionDepth", 0).edit();
        final long currentTimeMillis = System.currentTimeMillis();
        edit.putInt("SessionDepthKey", SessionDepthManager.sessionDepth);
        edit.putLong("LastDisplayKey", currentTimeMillis);
        edit.commit();
    }
}
