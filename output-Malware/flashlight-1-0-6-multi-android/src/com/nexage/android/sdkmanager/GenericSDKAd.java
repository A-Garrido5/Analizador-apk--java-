// 
// Decompiled by Procyon v0.5.30
// 

package com.nexage.android.sdkmanager;

import com.nexage.android.internal.NexageGlobalHandler;
import com.nexage.android.internal.AdLayout;
import com.nexage.android.internal.NexageLog;
import com.nexage.android.rules.AdTag;
import com.nexage.android.reports2.AdService2;
import com.nexage.android.internal.NexageContext;
import android.view.View;
import android.app.Activity;
import com.nexage.android.internal.Ad;

public class GenericSDKAd extends Ad
{
    private static final String TAG = "GenericSDKAd";
    private final Activity activity;
    private View adView;
    private long endTime;
    private boolean isAlreadyClicked;
    private SDKProvider provider;
    private int status;
    
    public GenericSDKAd(final NexageContext p0, final AdService2 p1, final AdTag p2, final int p3) {
        // 
        // This method could not be decompiled.
        // 
        // Original Bytecode:
        // 
        //     0: aload_0        
        //     1: aload_1        
        //     2: aload_2        
        //     3: invokespecial   com/nexage/android/internal/Ad.<init>:(Lcom/nexage/android/internal/NexageContext;Lcom/nexage/android/reports2/AdService2;)V
        //     6: aload_0        
        //     7: bipush          -3
        //     9: putfield        com/nexage/android/sdkmanager/GenericSDKAd.status:I
        //    12: aload_0        
        //    13: iconst_0       
        //    14: putfield        com/nexage/android/sdkmanager/GenericSDKAd.isAlreadyClicked:Z
        //    17: invokestatic    java/lang/System.currentTimeMillis:()J
        //    20: lstore          5
        //    22: ldc             "GenericSDKAd"
        //    24: new             Ljava/lang/StringBuilder;
        //    27: dup            
        //    28: ldc             "startTime "
        //    30: invokespecial   java/lang/StringBuilder.<init>:(Ljava/lang/String;)V
        //    33: lload           5
        //    35: invokevirtual   java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
        //    38: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //    41: invokestatic    com/nexage/android/internal/NexageLog.d:(Ljava/lang/String;Ljava/lang/String;)V
        //    44: aload_0        
        //    45: aload_3        
        //    46: putfield        com/nexage/android/sdkmanager/GenericSDKAd.tag:Lcom/nexage/android/rules/AdTag;
        //    49: aload_0        
        //    50: aload_1        
        //    51: invokevirtual   com/nexage/android/internal/NexageContext.getActivity:()Landroid/app/Activity;
        //    54: putfield        com/nexage/android/sdkmanager/GenericSDKAd.activity:Landroid/app/Activity;
        //    57: aload_0        
        //    58: aload_1        
        //    59: invokevirtual   com/nexage/android/internal/NexageContext.getView:()Landroid/view/View;
        //    62: checkcast       Lcom/nexage/android/NexageAdView;
        //    65: putfield        com/nexage/android/sdkmanager/GenericSDKAd.nexageAdView:Lcom/nexage/android/NexageAdView;
        //    68: aload_0        
        //    69: getfield        com/nexage/android/sdkmanager/GenericSDKAd.nexageAdView:Lcom/nexage/android/NexageAdView;
        //    72: ifnull          86
        //    75: aload_0        
        //    76: aload_0        
        //    77: getfield        com/nexage/android/sdkmanager/GenericSDKAd.nexageAdView:Lcom/nexage/android/NexageAdView;
        //    80: invokevirtual   com/nexage/android/NexageAdView.getListener:()Lcom/nexage/android/NexageAdViewListener;
        //    83: putfield        com/nexage/android/sdkmanager/GenericSDKAd.nexageAdViewListener:Lcom/nexage/android/NexageAdViewListener;
        //    86: aload_0        
        //    87: getfield        com/nexage/android/sdkmanager/GenericSDKAd.width:I
        //    90: sipush          320
        //    93: if_icmplt       345
        //    96: aload_0        
        //    97: getfield        com/nexage/android/sdkmanager/GenericSDKAd.width:I
        //   100: istore          7
        //   102: aload_0        
        //   103: iload           7
        //   105: putfield        com/nexage/android/sdkmanager/GenericSDKAd.width:I
        //   108: aload_0        
        //   109: getfield        com/nexage/android/sdkmanager/GenericSDKAd.height:I
        //   112: bipush          50
        //   114: if_icmplt       353
        //   117: aload_0        
        //   118: getfield        com/nexage/android/sdkmanager/GenericSDKAd.height:I
        //   121: istore          8
        //   123: aload_0        
        //   124: iload           8
        //   126: putfield        com/nexage/android/sdkmanager/GenericSDKAd.height:I
        //   129: new             Lcom/nexage/android/sdkmanager/GenericSDKAd$1;
        //   132: dup            
        //   133: aload_0        
        //   134: invokestatic    android/os/Looper.getMainLooper:()Landroid/os/Looper;
        //   137: invokespecial   com/nexage/android/sdkmanager/GenericSDKAd$1.<init>:(Lcom/nexage/android/sdkmanager/GenericSDKAd;Landroid/os/Looper;)V
        //   140: astore          9
        //   142: aload_3        
        //   143: getfield        com/nexage/android/rules/AdTag.networkId:Ljava/lang/String;
        //   146: ldc             "ADMOB"
        //   148: invokevirtual   java/lang/String.equals:(Ljava/lang/Object;)Z
        //   151: ifeq            360
        //   154: aload_0        
        //   155: new             Lcom/nexage/android/sdks/GoogleProvider;
        //   158: dup            
        //   159: aload_0        
        //   160: getfield        com/nexage/android/sdkmanager/GenericSDKAd.activity:Landroid/app/Activity;
        //   163: aload           9
        //   165: invokespecial   com/nexage/android/sdks/GoogleProvider.<init>:(Landroid/content/Context;Landroid/os/Handler;)V
        //   168: putfield        com/nexage/android/sdkmanager/GenericSDKAd.provider:Lcom/nexage/android/sdkmanager/SDKProvider;
        //   171: aload_0        
        //   172: getfield        com/nexage/android/sdkmanager/GenericSDKAd.provider:Lcom/nexage/android/sdkmanager/SDKProvider;
        //   175: ifnull          344
        //   178: aload_0        
        //   179: getfield        com/nexage/android/sdkmanager/GenericSDKAd.provider:Lcom/nexage/android/sdkmanager/SDKProvider;
        //   182: invokevirtual   com/nexage/android/sdkmanager/SDKProvider.isSdkInitialized:()Z
        //   185: ifeq            344
        //   188: aload_0        
        //   189: monitorenter   
        //   190: aload_0        
        //   191: aload_3        
        //   192: getfield        com/nexage/android/rules/AdTag.siteId:Ljava/lang/String;
        //   195: invokespecial   com/nexage/android/sdkmanager/GenericSDKAd.createThirdPartyAd:(Ljava/lang/String;)V
        //   198: ldc             "GenericSDKAd"
        //   200: ldc             "waiting..."
        //   202: invokestatic    com/nexage/android/internal/NexageLog.d:(Ljava/lang/String;Ljava/lang/String;)V
        //   205: iload           4
        //   207: i2l            
        //   208: lstore          11
        //   210: aload_0        
        //   211: lload           11
        //   213: invokevirtual   java/lang/Object.wait:(J)V
        //   216: ldc             "GenericSDKAd"
        //   218: new             Ljava/lang/StringBuilder;
        //   221: dup            
        //   222: ldc             "done waiting "
        //   224: invokespecial   java/lang/StringBuilder.<init>:(Ljava/lang/String;)V
        //   227: aload_0        
        //   228: getfield        com/nexage/android/sdkmanager/GenericSDKAd.endTime:J
        //   231: invokevirtual   java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
        //   234: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //   237: invokestatic    com/nexage/android/internal/NexageLog.d:(Ljava/lang/String;Ljava/lang/String;)V
        //   240: aload_0        
        //   241: getfield        com/nexage/android/sdkmanager/GenericSDKAd.endTime:J
        //   244: lconst_0       
        //   245: lcmp           
        //   246: ifne            454
        //   249: ldc             "GenericSDKAd"
        //   251: ldc             "timed out"
        //   253: invokestatic    com/nexage/android/internal/NexageLog.d:(Ljava/lang/String;Ljava/lang/String;)V
        //   256: aload_0        
        //   257: aload_0        
        //   258: getfield        com/nexage/android/sdkmanager/GenericSDKAd.provider:Lcom/nexage/android/sdkmanager/SDKProvider;
        //   261: invokespecial   com/nexage/android/sdkmanager/GenericSDKAd.cancelLoad:(Lcom/nexage/android/sdkmanager/SDKProvider;)V
        //   264: aload_0        
        //   265: bipush          -2
        //   267: putfield        com/nexage/android/sdkmanager/GenericSDKAd.status:I
        //   270: aload_0        
        //   271: iload           4
        //   273: i2l            
        //   274: putfield        com/nexage/android/sdkmanager/GenericSDKAd.responseTime:J
        //   277: aload_0        
        //   278: getfield        com/nexage/android/sdkmanager/GenericSDKAd.responseTime:J
        //   281: lconst_0       
        //   282: lcmp           
        //   283: ifne            297
        //   286: aload_0        
        //   287: aload_0        
        //   288: getfield        com/nexage/android/sdkmanager/GenericSDKAd.endTime:J
        //   291: lload           5
        //   293: lsub           
        //   294: putfield        com/nexage/android/sdkmanager/GenericSDKAd.responseTime:J
        //   297: ldc             "GenericSDKAd"
        //   299: new             Ljava/lang/StringBuilder;
        //   302: dup            
        //   303: ldc             "adding request, status="
        //   305: invokespecial   java/lang/StringBuilder.<init>:(Ljava/lang/String;)V
        //   308: aload_0        
        //   309: getfield        com/nexage/android/sdkmanager/GenericSDKAd.status:I
        //   312: invokevirtual   java/lang/StringBuilder.append:(I)Ljava/lang/StringBuilder;
        //   315: ldc             ", responseTime="
        //   317: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   320: aload_0        
        //   321: getfield        com/nexage/android/sdkmanager/GenericSDKAd.responseTime:J
        //   324: invokevirtual   java/lang/StringBuilder.append:(J)Ljava/lang/StringBuilder;
        //   327: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //   330: invokestatic    com/nexage/android/internal/NexageLog.d:(Ljava/lang/String;Ljava/lang/String;)V
        //   333: aload_0        
        //   334: aload_0        
        //   335: getfield        com/nexage/android/sdkmanager/GenericSDKAd.status:I
        //   338: aload_3        
        //   339: invokevirtual   com/nexage/android/sdkmanager/GenericSDKAd.addRequestToReport:(ILcom/nexage/android/rules/AdTag;)V
        //   342: aload_0        
        //   343: monitorexit    
        //   344: return         
        //   345: sipush          320
        //   348: istore          7
        //   350: goto            102
        //   353: bipush          50
        //   355: istore          8
        //   357: goto            123
        //   360: aload_3        
        //   361: getfield        com/nexage/android/rules/AdTag.networkId:Ljava/lang/String;
        //   364: ldc             "GREYSTRIPE"
        //   366: invokevirtual   java/lang/String.equals:(Ljava/lang/Object;)Z
        //   369: ifeq            392
        //   372: aload_0        
        //   373: new             Lcom/nexage/android/sdks/GreystripeProvider;
        //   376: dup            
        //   377: aload_0        
        //   378: getfield        com/nexage/android/sdkmanager/GenericSDKAd.activity:Landroid/app/Activity;
        //   381: aload           9
        //   383: invokespecial   com/nexage/android/sdks/GreystripeProvider.<init>:(Landroid/content/Context;Landroid/os/Handler;)V
        //   386: putfield        com/nexage/android/sdkmanager/GenericSDKAd.provider:Lcom/nexage/android/sdkmanager/SDKProvider;
        //   389: goto            171
        //   392: aload_3        
        //   393: getfield        com/nexage/android/rules/AdTag.networkId:Ljava/lang/String;
        //   396: ldc             "INMOBI"
        //   398: invokevirtual   java/lang/String.equals:(Ljava/lang/Object;)Z
        //   401: ifeq            424
        //   404: aload_0        
        //   405: new             Lcom/nexage/android/sdks/InMobiProvider;
        //   408: dup            
        //   409: aload_0        
        //   410: getfield        com/nexage/android/sdkmanager/GenericSDKAd.activity:Landroid/app/Activity;
        //   413: aload           9
        //   415: invokespecial   com/nexage/android/sdks/InMobiProvider.<init>:(Landroid/content/Context;Landroid/os/Handler;)V
        //   418: putfield        com/nexage/android/sdkmanager/GenericSDKAd.provider:Lcom/nexage/android/sdkmanager/SDKProvider;
        //   421: goto            171
        //   424: ldc             "GenericSDKAd"
        //   426: new             Ljava/lang/StringBuilder;
        //   429: dup            
        //   430: invokespecial   java/lang/StringBuilder.<init>:()V
        //   433: aload_3        
        //   434: getfield        com/nexage/android/rules/AdTag.networkId:Ljava/lang/String;
        //   437: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   440: ldc             "banner ads are not supported"
        //   442: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   445: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //   448: invokestatic    com/nexage/android/internal/NexageLog.e:(Ljava/lang/String;Ljava/lang/String;)V
        //   451: goto            171
        //   454: aload_0        
        //   455: getfield        com/nexage/android/sdkmanager/GenericSDKAd.status:I
        //   458: iconst_m1      
        //   459: if_icmpne       277
        //   462: aload_0        
        //   463: aconst_null    
        //   464: putfield        com/nexage/android/sdkmanager/GenericSDKAd.adLayout:Lcom/nexage/android/internal/AdLayout;
        //   467: goto            277
        //   470: astore          10
        //   472: aload_0        
        //   473: monitorexit    
        //   474: aload           10
        //   476: athrow         
        //   477: astore          13
        //   479: goto            216
        //    Exceptions:
        //  Try           Handler
        //  Start  End    Start  End    Type                            
        //  -----  -----  -----  -----  --------------------------------
        //  190    205    470    477    Any
        //  210    216    477    482    Ljava/lang/InterruptedException;
        //  210    216    470    477    Any
        //  216    277    470    477    Any
        //  277    297    470    477    Any
        //  297    344    470    477    Any
        //  454    467    470    477    Any
        // 
        // The error that occurred was:
        // 
        // java.lang.IllegalStateException: Expression is linked from several locations: Label_0216:
        //     at com.strobel.decompiler.ast.Error.expressionLinkedFromMultipleLocations(Error.java:27)
        //     at com.strobel.decompiler.ast.AstOptimizer.mergeDisparateObjectInitializations(AstOptimizer.java:2592)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:235)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:42)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:214)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:99)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createMethodBody(AstBuilder.java:757)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createConstructor(AstBuilder.java:692)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addTypeMembers(AstBuilder.java:529)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeCore(AstBuilder.java:499)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeNoCache(AstBuilder.java:141)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createType(AstBuilder.java:130)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addType(AstBuilder.java:105)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.buildAst(JavaLanguage.java:71)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.decompileType(JavaLanguage.java:59)
        //     at com.strobel.decompiler.DecompilerDriver.decompileType(DecompilerDriver.java:317)
        //     at com.strobel.decompiler.DecompilerDriver.decompileJar(DecompilerDriver.java:238)
        //     at com.strobel.decompiler.DecompilerDriver.main(DecompilerDriver.java:123)
        // 
        throw new IllegalStateException("An error occurred while decompiling this method.");
    }
    
    private void cancelLoad(final SDKProvider sdkProvider) {
        this.activity.runOnUiThread((Runnable)new Runnable() {
            @Override
            public void run() {
                sdkProvider.cancel();
            }
        });
    }
    
    private void createThirdPartyAd(final String s) {
        this.activity.runOnUiThread((Runnable)new Runnable() {
            @Override
            public void run() {
                GenericSDKAd.this.adView = GenericSDKAd.this.provider.createAdView(GenericSDKAd.this.width, GenericSDKAd.this.height, s);
                if (GenericSDKAd.this.adView != null) {
                    GenericSDKAd.this.provider.loadAdView();
                }
            }
        });
    }
    
    private void handleAdFailed(final SDKProvider sdkProvider) {
        synchronized (this) {
            NexageLog.d("GenericSDKAd", "handleAdFailed from " + sdkProvider.getClass().getSimpleName());
            this.status = -1;
            this.endTime = System.currentTimeMillis();
            this.notify();
        }
    }
    
    private void handleAdReceived(final SDKProvider sdkProvider) {
        synchronized (this) {
            NexageLog.d("GenericSDKAd", "handleAdReceived from " + sdkProvider.getClass().getSimpleName());
            this.status = 1;
            this.adLayout = new AdLayout() {
                @Override
                public View getView() {
                    return GenericSDKAd.this.adView;
                }
            };
            this.endTime = System.currentTimeMillis();
            this.notify();
        }
    }
    
    private void handleDismissScreen(final SDKProvider sdkProvider) {
        NexageLog.d("GenericSDKAd", "handleDismissScreen from " + sdkProvider.getClass().getSimpleName());
        NexageGlobalHandler.setGlobalAdServingEnabled(true);
    }
    
    private void handleFullScreen(final SDKProvider sdkProvider) {
        NexageLog.d("GenericSDKAd", "handleFullScreen from " + sdkProvider.getClass().getSimpleName());
        final StringBuilder sb = new StringBuilder("ad was ");
        String s;
        if (this.isAlreadyClicked) {
            s = "";
        }
        else {
            s = "NOT ";
        }
        NexageLog.d("GenericSDKAd", sb.append(s).append("already clicked").toString());
        if (!this.isAlreadyClicked) {
            this.isAlreadyClicked = true;
            this.addClickToReport();
        }
        NexageGlobalHandler.setGlobalAdServingEnabled(false);
        this.adLayout.notifyClick();
    }
    
    private void handleLeaveApp(final SDKProvider sdkProvider) {
        NexageLog.d("GenericSDKAd", "handleLeaveApp from " + sdkProvider.getClass().getSimpleName());
        final StringBuilder sb = new StringBuilder("ad was ");
        String s;
        if (this.isAlreadyClicked) {
            s = "";
        }
        else {
            s = "NOT ";
        }
        NexageLog.d("GenericSDKAd", sb.append(s).append("already clicked").toString());
        if (!this.isAlreadyClicked) {
            this.isAlreadyClicked = true;
            this.addClickToReport();
        }
        this.adLayout.notifyClick();
    }
    
    @Override
    public AdLayout getLayout(final Activity activity) {
        return this.adLayout;
    }
    
    protected int getStatus() {
        return this.status;
    }
}
