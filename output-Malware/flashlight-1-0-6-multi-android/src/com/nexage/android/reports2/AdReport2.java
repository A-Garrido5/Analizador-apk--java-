// 
// Decompiled by Procyon v0.5.30
// 

package com.nexage.android.reports2;

import java.util.Iterator;
import org.json.JSONArray;
import org.json.JSONObject;
import com.nexage.android.internal.NexageLog;
import com.nexage.android.NexageAdManager;
import java.util.ArrayList;

public class AdReport2 implements Cloneable
{
    private static final String TAG = "AdReport";
    public ArrayList clicks;
    public ArrayList displays;
    public ArrayList reqs;
    String site;
    
    public AdReport2() {
        this.reqs = new ArrayList();
        this.clicks = new ArrayList();
        this.displays = new ArrayList();
        this.site = NexageAdManager.getDCN();
    }
    
    AdService2 findService(final String s) {
        synchronized (this) {
            NexageLog.i("AdReport", "created new service " + s);
            final AdService2 adService2 = new AdService2(s);
            this.reqs.add(adService2);
            adService2.timestamp = -1L;
            return adService2;
        }
    }
    
    String toJson() {
        int n = 0;
        NexageLog.i("AdReport", "start AdReport2.toJson, reqs: " + this.reqs.size());
        final JSONObject jsonObject = new JSONObject();
        final JSONArray jsonArray = new JSONArray();
        final JSONArray jsonArray2 = new JSONArray();
        final JSONArray jsonArray3 = new JSONArray();
        final Iterator<AdService2> iterator = (Iterator<AdService2>)this.reqs.iterator();
        int n2 = 0;
        int n3 = 0;
        while (iterator.hasNext()) {
            final AdService2 adService2 = iterator.next();
            if (adService2.json != null) {
                final JSONObject jsonObject2 = new JSONObject(adService2.json);
                final int n4 = n2 + 1;
                jsonArray.put(n2, (Object)jsonObject2);
                ++n3;
                n2 = n4;
            }
        }
        final Iterator<AdDisplay> iterator2 = (Iterator<AdDisplay>)this.displays.iterator();
        int n5 = 0;
        while (iterator2.hasNext()) {
            final JSONObject json = iterator2.next().toJson();
            final int n6 = n5 + 1;
            jsonArray2.put(n5, (Object)json);
            n5 = n6;
        }
        final Iterator<AdClick> iterator3 = (Iterator<AdClick>)this.clicks.iterator();
        while (iterator3.hasNext()) {
            final JSONObject json2 = iterator3.next().toJson();
            final int n7 = n + 1;
            jsonArray3.put(n, (Object)json2);
            n = n7;
        }
        jsonObject.put("site", (Object)this.site);
        jsonObject.put("req", (Object)jsonArray);
        jsonObject.put("display", (Object)jsonArray2);
        jsonObject.put("click", (Object)jsonArray3);
        NexageLog.i("AdReport", "Report generated: reqs:" + n3 + "  displays:" + this.displays.size() + "  clicks:" + this.clicks.size());
        return jsonObject.toString();
    }
}
