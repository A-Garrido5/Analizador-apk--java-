// 
// Decompiled by Procyon v0.5.30
// 

package com.nexage.android;

import com.nexage.android.internal.NexageLog;
import com.nexage.android.v2.Task;
import android.content.Context;
import com.nexage.android.v2.InterstitialFetcher;
import com.nexage.android.v2.AdUpdateListener;
import java.util.ArrayList;
import com.nexage.android.internal.NexageAdFetcher;
import android.app.Activity;

public class NexageInterstitial
{
    public static final String NEXAGE_ACTIVITY = "com.nexage.NexageActivity";
    private static final String TAG = "NexageInterstitial";
    private static boolean s_AutoDisplay;
    private Activity m_Activity;
    private NexageInterstitial$DisplayTask m_DisplayTask;
    private NexageAdFetcher m_Fetcher;
    private ArrayList m_InterstitialQ;
    private NexageInterstitialListener m_Listener;
    private NexageInterstitial$InterstitialContext m_NexageContext;
    private String m_Position;
    private AdUpdateListener m_adUpdateListener;
    private InterstitialFetcher m_interstitialFetcher;
    
    static {
        NexageInterstitial.s_AutoDisplay = false;
    }
    
    public NexageInterstitial(final String position, final Activity activity, final NexageInterstitialListener nexageInterstitialListener) {
        this.m_NexageContext = null;
        NexageAdManager.init((Context)activity);
        this.m_Position = position;
        this.m_Activity = activity;
        (this.m_interstitialFetcher = new InterstitialFetcher((Context)activity, position)).setAdUpdateListener(new AdUpdateListener() {
            @Override
            public void onDismissScreen() {
                if (nexageInterstitialListener != null) {
                    nexageInterstitialListener.onInterstitialDismiss(NexageInterstitial.this);
                }
            }
            
            @Override
            public void onDisplayScreen() {
                if (nexageInterstitialListener != null) {
                    nexageInterstitialListener.onInterstitialDisplay(NexageInterstitial.this);
                }
            }
            
            @Override
            public void onFailedToReceiveAd(final Task task) {
                if (nexageInterstitialListener != null) {
                    nexageInterstitialListener.onInterstitialFailedToReceive(NexageInterstitial.this);
                }
            }
            
            @Override
            public void onReceivedAd(final Task task) {
                if (nexageInterstitialListener != null) {
                    nexageInterstitialListener.onInterstitialReceived(NexageInterstitial.this);
                }
                if (!NexageInterstitial.s_AutoDisplay) {
                    return;
                }
                synchronized (NexageInterstitial.this) {
                    NexageInterstitial.this.m_interstitialFetcher.display(NexageInterstitial.this.m_Activity);
                }
            }
        });
        this.m_interstitialFetcher.getAd();
    }
    
    public static boolean getAutoDisplay() {
        return NexageInterstitial.s_AutoDisplay;
    }
    
    public static void setAutoDisplay(final boolean s_AutoDisplay) {
        NexageInterstitial.s_AutoDisplay = s_AutoDisplay;
    }
    
    public void display() {
        if (NexageInterstitial.s_AutoDisplay) {
            NexageLog.i("NexageInterstitial", "display -- rejected due to autodisplay");
            return;
        }
        synchronized (this) {
            this.m_interstitialFetcher.display(this.m_Activity);
        }
    }
    
    public NexageInterstitialListener getListener() {
        return this.m_Listener;
    }
    
    public void getNewAd(final Activity activity, final NexageInterstitialListener listener) {
        synchronized (this) {
            NexageLog.i("NexageInterstitial", "getNewAd() pos=" + this.m_Position);
            this.m_Activity = activity;
            if (listener != null) {
                this.m_Listener = listener;
            }
            this.m_interstitialFetcher.getAd();
        }
    }
    
    public String getPosition() {
        return this.m_Position;
    }
    
    public void setListener(final NexageInterstitialListener listener) {
        this.m_Listener = listener;
    }
    
    public void setPosition(final String position) {
        this.m_Position = position;
    }
}
