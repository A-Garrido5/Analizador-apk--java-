// 
// Decompiled by Procyon v0.5.30
// 

package com.nexage.android.v2.provider;

import android.view.ViewGroup;
import com.nexage.android.internal.NexageContext;
import com.nexage.android.internal.MraidAd;
import android.view.View;
import com.nexage.android.internal.Ad;
import com.nexage.android.v2.provider.interstitial.NexageInterstitialProvider;
import com.nexage.android.v2.Task$InterstitialType;
import android.content.Context;
import android.content.Intent;
import com.nexage.android.NexageActivity;
import com.nexage.android.internal.MraidAdLayout;
import com.nexage.android.internal.NexageLog;
import com.nexage.android.v2.Task;

public class MraidBranchingProvider extends BranchingProvider
{
    private static final String TAG = "MraidBranchProv";
    
    @Override
    public boolean display(final Task task) {
        if (task == null || task.appActivity == null) {
            return false;
        }
        NexageLog.i("MraidBranchProv", "display");
        final Ad ad = task.ad;
        final View view = ad.getLayout(task.appActivity).getView();
        Label_0122: {
            if (view == null) {
                break Label_0122;
            }
            Label_0127: {
                if (!(view instanceof MraidAdLayout)) {
                    break Label_0127;
                }
                ((MraidAdLayout)view).addDisplayToReport();
                task.m_View = (ViewGroup)view;
                while (true) {
                    synchronized (this) {
                        final Intent intent = new Intent((Context)task.appActivity, (Class)NexageActivity.class);
                        task.m_Type = Task$InterstitialType.View;
                        NexageInterstitialProvider.s_TaskMap.put(task.positionName, task);
                        intent.putExtra("com.nexage.InterstitialAdPosition", task.positionName);
                        task.appActivity.startActivity(intent);
                        // monitorexit(this)
                        return ad.display();
                        NexageLog.e("MraidBranchProv", "View is not instance of MriadAdLayout");
                    }
                }
            }
        }
    }
    
    @Override
    public int prepare(final Task task, final String s) {
        final MraidAd ad = new MraidAd(new BranchingProvider$DumbNexageContext(this, task.appActivity), task.adService, true);
        ad.task = task;
        task.ad = ad;
        return ad.prepare(s);
    }
}
