// 
// Decompiled by Procyon v0.5.30
// 

package com.flurry.sdk;

import java.util.Arrays;
import android.telephony.TelephonyManager;
import android.os.Looper;

public class dy
{
    private static final String a;
    private static byte[] b;
    
    static {
        a = dy.class.getSimpleName();
    }
    
    public static byte[] a() {
        synchronized (dy.class) {
            if (Looper.getMainLooper().getThread() == Thread.currentThread()) {
                throw new IllegalStateException("Must be called from a background thread!");
            }
        }
        byte[] array;
        if (dy.b != null) {
            array = dy.b;
        }
        else if (do.a().b().checkCallingOrSelfPermission("android.permission.READ_PHONE_STATE") != 0) {
            array = null;
        }
        else {
            b();
            array = dy.b;
        }
        // monitorexit(dy.class)
        return array;
    }
    
    private static void b() {
        final TelephonyManager telephonyManager = (TelephonyManager)do.a().b().getSystemService("phone");
        if (telephonyManager != null) {
            final String deviceId = telephonyManager.getDeviceId();
            if (deviceId != null && deviceId.trim().length() > 0) {
                byte[] d;
                try {
                    d = fe.d(deviceId);
                    if (d != null && d.length == 20) {
                        dy.b = d;
                        return;
                    }
                }
                catch (Exception ex) {
                    eo.a(6, dy.a, "Exception in generateHashedImei()");
                    return;
                }
                eo.a(6, dy.a, "sha1 is not 20 bytes long: " + Arrays.toString(d));
            }
        }
    }
}
