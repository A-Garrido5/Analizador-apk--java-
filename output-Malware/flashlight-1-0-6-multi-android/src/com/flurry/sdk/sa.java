// 
// Decompiled by Procyon v0.5.30
// 

package com.flurry.sdk;

import java.util.Arrays;

public final class sa
{
    final sa a;
    final boolean b;
    private int c;
    private int d;
    private int[] e;
    private sc[] f;
    private sa$a[] g;
    private int h;
    private int i;
    private transient boolean j;
    private boolean k;
    private boolean l;
    private boolean m;
    
    private sa(int n, final boolean b) {
        int i = 16;
        this.a = null;
        this.b = b;
        if (n < i) {
            n = i;
        }
        else if ((n & n - 1) != 0x0) {
            while (i < n) {
                i += i;
            }
            n = i;
        }
        this.c(n);
    }
    
    private sa(final sa a, final boolean b) {
        this.a = a;
        this.b = b;
        this.c = a.c;
        this.d = a.d;
        this.e = a.e;
        this.f = a.f;
        this.g = a.g;
        this.h = a.h;
        this.i = a.i;
        this.j = false;
        this.k = true;
        this.l = true;
        this.m = true;
    }
    
    public static sa a() {
        return new sa(64, true);
    }
    
    private static sc a(final int n, final String s, final int[] array, final int n2) {
        if (n2 < 4) {
            switch (n2) {
                case 1: {
                    return new sd(s, n, array[0]);
                }
                case 2: {
                    return new se(s, n, array[0], array[1]);
                }
                case 3: {
                    return new sf(s, n, array[0], array[1], array[2]);
                }
            }
        }
        final int[] array2 = new int[n2];
        for (int i = 0; i < n2; ++i) {
            array2[i] = array[i];
        }
        return new sg(s, n, array2, n2);
    }
    
    private void a(final int n, final sc sc) {
        if (this.k) {
            this.j();
        }
        if (this.j) {
            this.g();
        }
        ++this.c;
        final int n2 = n & this.d;
        if (this.f[n2] == null) {
            this.e[n2] = n << 8;
            if (this.l) {
                this.l();
            }
            this.f[n2] = sc;
        }
        else {
            if (this.m) {
                this.k();
            }
            ++this.h;
            final int n3 = this.e[n2];
            final int n4 = n3 & 0xFF;
            int n5;
            if (n4 == 0) {
                if (this.i <= 254) {
                    n5 = this.i;
                    ++this.i;
                    if (n5 >= this.g.length) {
                        this.m();
                    }
                }
                else {
                    n5 = this.i();
                }
                this.e[n2] = ((n3 & 0xFFFFFF00) | n5 + 1);
            }
            else {
                n5 = n4 - 1;
            }
            this.g[n5] = new sa$a(sc, this.g[n5]);
        }
        final int length = this.e.length;
        if (this.c > length >> 1) {
            final int n6 = length >> 2;
            if (this.c > length - n6) {
                this.j = true;
            }
            else if (this.h >= n6) {
                this.j = true;
            }
        }
    }
    
    private void a(final sa sa) {
        while (true) {
            Label_0046: {
                synchronized (this) {
                    if (sa.c > this.c) {
                        if (sa.c() <= 6000) {
                            break Label_0046;
                        }
                        this.c(64);
                    }
                    return;
                }
            }
            this.c = sa.c;
            this.e = sa.e;
            this.f = sa.f;
            this.k = true;
            this.l = true;
            this.d = sa.d;
            this.g = sa.g;
            this.h = sa.h;
            this.i = sa.i;
        }
    }
    
    public static final int b(final int n) {
        final int n2 = n ^ n >>> 16;
        return n2 ^ n2 >>> 8;
    }
    
    public static final int b(final int n, final int n2) {
        final int n3 = n2 + n * 31;
        final int n4 = n3 ^ n3 >>> 16;
        return n4 ^ n4 >>> 8;
    }
    
    public static final int b(final int[] array, final int n) {
        int n2 = array[0];
        for (int i = 1; i < n; ++i) {
            n2 = n2 * 31 + array[i];
        }
        final int n3 = n2 ^ n2 >>> 16;
        return n3 ^ n3 >>> 8;
    }
    
    private void c(final int n) {
        this.c = 0;
        this.e = new int[n];
        this.f = new sc[n];
        this.k = false;
        this.l = false;
        this.d = n - 1;
        this.m = true;
        this.g = null;
        this.i = 0;
        this.j = false;
    }
    
    public static sc e() {
        return sd.b();
    }
    
    private void f() {
        this.k = true;
        this.l = true;
        this.m = true;
    }
    
    private void g() {
        int i = 0;
        this.j = false;
        this.l = false;
        final int length = this.e.length;
        final int n = length + length;
        if (n > 65536) {
            this.h();
        }
        else {
            this.e = new int[n];
            this.d = n - 1;
            final sc[] f = this.f;
            this.f = new sc[n];
            int j = 0;
            int n2 = 0;
            while (j < length) {
                final sc sc = f[j];
                if (sc != null) {
                    ++n2;
                    final int hashCode = sc.hashCode();
                    final int n3 = hashCode & this.d;
                    this.f[n3] = sc;
                    this.e[n3] = hashCode << 8;
                }
                ++j;
            }
            final int k = this.i;
            if (k != 0) {
                this.h = 0;
                this.i = 0;
                this.m = false;
                final sa$a[] g = this.g;
                this.g = new sa$a[g.length];
                while (i < k) {
                    sa$a b = g[i];
                    int n4 = n2;
                    while (b != null) {
                        ++n4;
                        final sc a = b.a;
                        final int hashCode2 = a.hashCode();
                        final int n5 = hashCode2 & this.d;
                        final int n6 = this.e[n5];
                        if (this.f[n5] == null) {
                            this.e[n5] = hashCode2 << 8;
                            this.f[n5] = a;
                        }
                        else {
                            ++this.h;
                            final int n7 = n6 & 0xFF;
                            int n8;
                            if (n7 == 0) {
                                if (this.i <= 254) {
                                    n8 = this.i;
                                    ++this.i;
                                    if (n8 >= this.g.length) {
                                        this.m();
                                    }
                                }
                                else {
                                    n8 = this.i();
                                }
                                this.e[n5] = ((n6 & 0xFFFFFF00) | n8 + 1);
                            }
                            else {
                                n8 = n7 - 1;
                            }
                            this.g[n8] = new sa$a(a, this.g[n8]);
                        }
                        b = b.b;
                    }
                    ++i;
                    n2 = n4;
                }
                if (n2 != this.c) {
                    throw new RuntimeException("Internal error: count after rehash " + n2 + "; should be " + this.c);
                }
            }
        }
    }
    
    private void h() {
        this.c = 0;
        Arrays.fill(this.e, 0);
        Arrays.fill(this.f, null);
        Arrays.fill(this.g, null);
        this.h = 0;
        this.i = 0;
    }
    
    private int i() {
        final sa$a[] g = this.g;
        int n = Integer.MAX_VALUE;
        int n2 = -1;
        int a;
        for (int i = 0; i < this.i; ++i, n = a) {
            a = g[i].a();
            if (a < n) {
                if (a == 1) {
                    return i;
                }
                n2 = i;
            }
            else {
                a = n;
            }
        }
        return n2;
    }
    
    private void j() {
        final int[] e = this.e;
        final int length = this.e.length;
        System.arraycopy(e, 0, this.e = new int[length], 0, length);
        this.k = false;
    }
    
    private void k() {
        final sa$a[] g = this.g;
        if (g == null) {
            this.g = new sa$a[32];
        }
        else {
            final int length = g.length;
            System.arraycopy(g, 0, this.g = new sa$a[length], 0, length);
        }
        this.m = false;
    }
    
    private void l() {
        final sc[] f = this.f;
        final int length = f.length;
        System.arraycopy(f, 0, this.f = new sc[length], 0, length);
        this.l = false;
    }
    
    private void m() {
        final sa$a[] g = this.g;
        final int length = g.length;
        System.arraycopy(g, 0, this.g = new sa$a[length + length], 0, length);
    }
    
    public final sa a(final boolean b, final boolean b2) {
        synchronized (this) {
            return new sa(this, b2);
        }
    }
    
    public final sc a(final int n) {
        final int b = b(n);
        final int n2 = b & this.d;
        final int n3 = this.e[n2];
        Label_0065: {
            if ((b ^ n3 >> 8) << 8 == 0) {
                final sc sc = this.f[n2];
                if (sc != null) {
                    if (sc.a(n)) {
                        return sc;
                    }
                    break Label_0065;
                }
            }
            else if (n3 != 0) {
                break Label_0065;
            }
            return null;
        }
        final int n4 = n3 & 0xFF;
        if (n4 <= 0) {
            return null;
        }
        final sa$a sa$a = this.g[n4 - 1];
        if (sa$a != null) {
            return sa$a.a(b, n, 0);
        }
        return null;
    }
    
    public final sc a(final int n, final int n2) {
        final int b = b(n, n2);
        final int n3 = b & this.d;
        final int n4 = this.e[n3];
        Label_0070: {
            if ((b ^ n4 >> 8) << 8 == 0) {
                final sc sc = this.f[n3];
                if (sc != null) {
                    if (sc.a(n, n2)) {
                        return sc;
                    }
                    break Label_0070;
                }
            }
            else if (n4 != 0) {
                break Label_0070;
            }
            return null;
        }
        final int n5 = n4 & 0xFF;
        if (n5 <= 0) {
            return null;
        }
        final sa$a sa$a = this.g[n5 - 1];
        if (sa$a != null) {
            return sa$a.a(b, n, n2);
        }
        return null;
    }
    
    public final sc a(String a, final int[] array, final int n) {
        if (this.b) {
            a = sm.a.a(a);
        }
        final int b = b(array, n);
        final sc a2 = a(b, a, array, n);
        this.a(b, a2);
        return a2;
    }
    
    public final sc a(final int[] array, final int n) {
        final int b = b(array, n);
        final int n2 = b & this.d;
        final int n3 = this.e[n2];
        if ((b ^ n3 >> 8) << 8 == 0) {
            final sc sc = this.f[n2];
            if (sc == null || sc.a(array, n)) {
                return sc;
            }
        }
        else if (n3 == 0) {
            return null;
        }
        final int n4 = n3 & 0xFF;
        if (n4 > 0) {
            final sa$a sa$a = this.g[n4 - 1];
            if (sa$a != null) {
                return sa$a.a(b, array, n);
            }
        }
        return null;
    }
    
    public final void b() {
        if (this.d() && this.a != null) {
            this.a.a(this);
            this.f();
        }
    }
    
    public final int c() {
        return this.c;
    }
    
    public final boolean d() {
        return !this.k;
    }
}
