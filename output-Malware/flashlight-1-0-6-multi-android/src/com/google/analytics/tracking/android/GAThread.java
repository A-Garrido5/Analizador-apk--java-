// 
// Decompiled by Procyon v0.5.30
// 

package com.google.analytics.tracking.android;

import java.io.File;
import java.util.HashMap;
import java.io.FileOutputStream;
import java.io.OutputStream;
import java.io.PrintStream;
import java.io.ByteArrayOutputStream;
import com.google.android.gms.analytics.internal.Command;
import com.google.android.gms.common.util.VisibleForTesting;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.util.UUID;
import java.io.IOException;
import java.util.Collection;
import java.util.ArrayList;
import java.io.InputStream;
import java.io.ObjectInputStream;
import java.io.ByteArrayInputStream;
import android.text.TextUtils;
import java.util.Map;
import java.util.concurrent.LinkedBlockingQueue;
import android.content.Context;
import java.util.List;

class GAThread extends Thread implements AnalyticsThread
{
    static final String API_VERSION = "1";
    private static final String CLIENT_VERSION = "ma1b4";
    private static final int MAX_SAMPLE_RATE = 100;
    private static final int SAMPLE_RATE_MODULO = 10000;
    private static final int SAMPLE_RATE_MULTIPLIER = 100;
    private static GAThread sInstance;
    private volatile boolean mAppOptOut;
    private volatile String mClientId;
    private volatile boolean mClosed;
    private volatile List mCommands;
    private final Context mContext;
    private volatile boolean mDisabled;
    private volatile String mInstallCampaign;
    private volatile MetaModel mMetaModel;
    private volatile ServiceProxy mServiceProxy;
    private final LinkedBlockingQueue queue;
    
    private GAThread(final Context mContext) {
        super("GAThread");
        this.queue = new LinkedBlockingQueue();
        this.mDisabled = false;
        this.mClosed = false;
        if (mContext != null) {
            this.mContext = mContext.getApplicationContext();
        }
        else {
            this.mContext = mContext;
        }
        this.start();
    }
    
    GAThread(final Context mContext, final ServiceProxy mServiceProxy) {
        super("GAThread");
        this.queue = new LinkedBlockingQueue();
        this.mDisabled = false;
        this.mClosed = false;
        if (mContext != null) {
            this.mContext = mContext.getApplicationContext();
        }
        else {
            this.mContext = mContext;
        }
        this.mServiceProxy = mServiceProxy;
        this.start();
    }
    
    private void fillAppParameters(final Map p0) {
        // 
        // This method could not be decompiled.
        // 
        // Original Bytecode:
        // 
        //     0: aload_0        
        //     1: getfield        com/google/analytics/tracking/android/GAThread.mContext:Landroid/content/Context;
        //     4: invokevirtual   android/content/Context.getPackageManager:()Landroid/content/pm/PackageManager;
        //     7: astore_2       
        //     8: aload_0        
        //     9: getfield        com/google/analytics/tracking/android/GAThread.mContext:Landroid/content/Context;
        //    12: invokevirtual   android/content/Context.getPackageName:()Ljava/lang/String;
        //    15: astore_3       
        //    16: aload_2        
        //    17: aload_3        
        //    18: invokevirtual   android/content/pm/PackageManager.getInstallerPackageName:(Ljava/lang/String;)Ljava/lang/String;
        //    21: astore          4
        //    23: aload_2        
        //    24: aload_0        
        //    25: getfield        com/google/analytics/tracking/android/GAThread.mContext:Landroid/content/Context;
        //    28: invokevirtual   android/content/Context.getPackageName:()Ljava/lang/String;
        //    31: iconst_0       
        //    32: invokevirtual   android/content/pm/PackageManager.getPackageInfo:(Ljava/lang/String;I)Landroid/content/pm/PackageInfo;
        //    35: astore          10
        //    37: aload           10
        //    39: ifnull          151
        //    42: aload_2        
        //    43: aload           10
        //    45: getfield        android/content/pm/PackageInfo.applicationInfo:Landroid/content/pm/ApplicationInfo;
        //    48: invokevirtual   android/content/pm/PackageManager.getApplicationLabel:(Landroid/content/pm/ApplicationInfo;)Ljava/lang/CharSequence;
        //    51: invokevirtual   java/lang/Object.toString:()Ljava/lang/String;
        //    54: astore          11
        //    56: aload           11
        //    58: astore          6
        //    60: aload           10
        //    62: getfield        android/content/pm/PackageInfo.versionName:Ljava/lang/String;
        //    65: astore          8
        //    67: aload_0        
        //    68: aload_1        
        //    69: ldc             "appName"
        //    71: aload           6
        //    73: invokespecial   com/google/analytics/tracking/android/GAThread.putIfAbsent:(Ljava/util/Map;Ljava/lang/String;Ljava/lang/String;)V
        //    76: aload_0        
        //    77: aload_1        
        //    78: ldc             "appVersion"
        //    80: aload           8
        //    82: invokespecial   com/google/analytics/tracking/android/GAThread.putIfAbsent:(Ljava/util/Map;Ljava/lang/String;Ljava/lang/String;)V
        //    85: aload_0        
        //    86: aload_1        
        //    87: ldc             "appId"
        //    89: aload_3        
        //    90: invokespecial   com/google/analytics/tracking/android/GAThread.putIfAbsent:(Ljava/util/Map;Ljava/lang/String;Ljava/lang/String;)V
        //    93: aload_0        
        //    94: aload_1        
        //    95: ldc             "appInstallerId"
        //    97: aload           4
        //    99: invokespecial   com/google/analytics/tracking/android/GAThread.putIfAbsent:(Ljava/util/Map;Ljava/lang/String;Ljava/lang/String;)V
        //   102: aload_1        
        //   103: ldc             "apiVersion"
        //   105: ldc             "1"
        //   107: invokeinterface java/util/Map.put:(Ljava/lang/Object;Ljava/lang/Object;)Ljava/lang/Object;
        //   112: pop            
        //   113: return         
        //   114: astore          5
        //   116: aload_3        
        //   117: astore          6
        //   119: new             Ljava/lang/StringBuilder;
        //   122: dup            
        //   123: ldc             "Error retrieving package info: appName set to "
        //   125: invokespecial   java/lang/StringBuilder.<init>:(Ljava/lang/String;)V
        //   128: aload           6
        //   130: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   133: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //   136: invokestatic    com/google/analytics/tracking/android/Log.e:(Ljava/lang/String;)I
        //   139: pop            
        //   140: aconst_null    
        //   141: astore          8
        //   143: goto            67
        //   146: astore          12
        //   148: goto            119
        //   151: aload_3        
        //   152: astore          6
        //   154: aconst_null    
        //   155: astore          8
        //   157: goto            67
        //    Exceptions:
        //  Try           Handler
        //  Start  End    Start  End    Type                                                     
        //  -----  -----  -----  -----  ---------------------------------------------------------
        //  23     37     114    119    Landroid/content/pm/PackageManager$NameNotFoundException;
        //  42     56     114    119    Landroid/content/pm/PackageManager$NameNotFoundException;
        //  60     67     146    151    Landroid/content/pm/PackageManager$NameNotFoundException;
        // 
        // The error that occurred was:
        // 
        // java.lang.IllegalStateException: Expression is linked from several locations: Label_0067:
        //     at com.strobel.decompiler.ast.Error.expressionLinkedFromMultipleLocations(Error.java:27)
        //     at com.strobel.decompiler.ast.AstOptimizer.mergeDisparateObjectInitializations(AstOptimizer.java:2592)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:235)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:42)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:214)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:99)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createMethodBody(AstBuilder.java:757)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createMethod(AstBuilder.java:655)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addTypeMembers(AstBuilder.java:532)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeCore(AstBuilder.java:499)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeNoCache(AstBuilder.java:141)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createType(AstBuilder.java:130)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addType(AstBuilder.java:105)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.buildAst(JavaLanguage.java:71)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.decompileType(JavaLanguage.java:59)
        //     at com.strobel.decompiler.DecompilerDriver.decompileType(DecompilerDriver.java:317)
        //     at com.strobel.decompiler.DecompilerDriver.decompileJar(DecompilerDriver.java:238)
        //     at com.strobel.decompiler.DecompilerDriver.main(DecompilerDriver.java:123)
        // 
        throw new IllegalStateException("An error occurred while decompiling this method.");
    }
    
    private void fillCampaignParameters(final Map map) {
        final String filterCampaign = Utils.filterCampaign(map.get("campaign"));
        if (TextUtils.isEmpty((CharSequence)filterCampaign)) {
            return;
        }
        final Map urlParameters = Utils.parseURLParameters(filterCampaign);
        map.put("campaignContent", urlParameters.get("utm_content"));
        map.put("campaignMedium", urlParameters.get("utm_medium"));
        map.put("campaignName", urlParameters.get("utm_campaign"));
        map.put("campaignSource", urlParameters.get("utm_source"));
        map.put("campaignKeyword", urlParameters.get("utm_term"));
        map.put("campaignId", urlParameters.get("utm_id"));
        map.put("gclid", urlParameters.get("gclid"));
        map.put("dclid", urlParameters.get("dclid"));
        map.put("gmob_t", urlParameters.get("gmob_t"));
    }
    
    private void fillExceptionParameters(final Map map) {
        final String s = map.get("rawException");
        if (s != null) {
            map.remove("rawException");
            final ByteArrayInputStream byteArrayInputStream = new ByteArrayInputStream(Utils.hexDecode(s));
            try {
                final ObjectInputStream objectInputStream = new ObjectInputStream(byteArrayInputStream);
                final Object object = objectInputStream.readObject();
                objectInputStream.close();
                if (object instanceof Throwable) {
                    map.put("exDescription", new StandardExceptionParser(this.mContext, new ArrayList()).getDescription(map.get("exceptionThreadName"), (Throwable)object));
                }
            }
            catch (IOException ex) {
                Log.w("IOException reading exception");
            }
            catch (ClassNotFoundException ex2) {
                Log.w("ClassNotFoundException reading exception");
            }
        }
    }
    
    private String generateClientId() {
        String lowerCase = UUID.randomUUID().toString().toLowerCase();
        if (!this.storeClientId(lowerCase)) {
            lowerCase = "0";
        }
        return lowerCase;
    }
    
    @VisibleForTesting
    static String getAndClearCampaign(final Context context) {
        try {
            final FileInputStream openFileInput = context.openFileInput("gaInstallData");
            final int read = openFileInput.read(new byte[8192], 0, 8192);
            if (openFileInput.available() > 0) {
                Log.e("Too much campaign data, ignoring it.");
                openFileInput.close();
                context.deleteFile("gaInstallData");
                return null;
            }
            openFileInput.close();
            context.deleteFile("gaInstallData");
            if (read <= 0) {
                Log.w("Campaign file is empty.");
                return null;
            }
            goto Label_0097;
        }
        catch (FileNotFoundException ex) {
            Log.i("No campaign data found.");
            return null;
        }
        catch (IOException ex2) {
            Log.e("Error reading campaign data.");
            context.deleteFile("gaInstallData");
            return null;
        }
    }
    
    private String getHostUrl(final Map map) {
        String s = map.get("internalHitUrl");
        if (s == null) {
            if (!map.containsKey("useSecure")) {
                return "https://ssl.google-analytics.com/collect";
            }
            if (!Utils.safeParseBoolean(map.get("useSecure"))) {
                return "http://www.google-analytics.com/collect";
            }
            s = "https://ssl.google-analytics.com/collect";
        }
        return s;
    }
    
    static GAThread getInstance(final Context context) {
        if (GAThread.sInstance == null) {
            GAThread.sInstance = new GAThread(context);
        }
        return GAThread.sInstance;
    }
    
    private void init() {
        this.mServiceProxy.createService();
        (this.mCommands = new ArrayList()).add(new Command("appendVersion", "_v", "ma1b4"));
        this.mCommands.add(new Command("appendQueueTime", "qt", null));
        this.mCommands.add(new Command("appendCacheBuster", "z", null));
        MetaModelInitializer.set(this.mMetaModel = new MetaModel());
    }
    
    private boolean isSampledOut(final Map map) {
        if (map.get("sampleRate") != null) {
            final double safeParseDouble = Utils.safeParseDouble(map.get("sampleRate"));
            if (safeParseDouble <= 0.0) {
                return true;
            }
            if (safeParseDouble < 100.0) {
                final String s = map.get("clientId");
                if (s != null && Math.abs(s.hashCode()) % 10000 >= safeParseDouble * 100.0) {
                    return true;
                }
            }
        }
        return false;
    }
    
    private boolean loadAppOptOut() {
        return this.mContext.getFileStreamPath("gaOptOut").exists();
    }
    
    private String printStackTrace(final Throwable t) {
        final ByteArrayOutputStream byteArrayOutputStream = new ByteArrayOutputStream();
        final PrintStream printStream = new PrintStream(byteArrayOutputStream);
        t.printStackTrace(printStream);
        printStream.flush();
        return new String(byteArrayOutputStream.toByteArray());
    }
    
    private void putIfAbsent(final Map map, final String s, final String s2) {
        if (!map.containsKey(s)) {
            map.put(s, s2);
        }
    }
    
    private void queueToThread(final Runnable runnable) {
        this.queue.add(runnable);
    }
    
    private boolean storeClientId(final String s) {
        try {
            final FileOutputStream openFileOutput = this.mContext.openFileOutput("gaClientId", 0);
            openFileOutput.write(s.getBytes());
            openFileOutput.close();
            return true;
        }
        catch (FileNotFoundException ex) {
            Log.e("Error creating clientId file.");
            return false;
        }
        catch (IOException ex2) {
            Log.e("Error writing to clientId file.");
            return false;
        }
    }
    
    @VisibleForTesting
    void close() {
        this.mClosed = true;
        this.interrupt();
    }
    
    @Override
    public void dispatch() {
        this.queueToThread(new Runnable() {
            @Override
            public void run() {
                GAThread.this.mServiceProxy.dispatch();
            }
        });
    }
    
    @Override
    public LinkedBlockingQueue getQueue() {
        return this.queue;
    }
    
    @Override
    public Thread getThread() {
        return this;
    }
    
    @VisibleForTesting
    String initializeClientId() {
        String generateClientId = null;
        while (true) {
            FileInputStream openFileInput = null;
            String s = null;
            try {
                openFileInput = this.mContext.openFileInput("gaClientId");
                final byte[] array = new byte[128];
                final int read = openFileInput.read(array, 0, 128);
                if (openFileInput.available() > 0) {
                    Log.e("clientId file seems corrupted, deleting it.");
                    openFileInput.close();
                    this.mContext.deleteFile("gaInstallData");
                }
                if (read <= 0) {
                    Log.e("clientId file seems empty, deleting it.");
                    openFileInput.close();
                    this.mContext.deleteFile("gaInstallData");
                }
                else {
                    s = new String(array, 0, read);
                    final FileInputStream fileInputStream = openFileInput;
                    fileInputStream.close();
                    final String s2 = generateClientId = s;
                }
                if (generateClientId == null) {
                    generateClientId = this.generateClientId();
                }
                return generateClientId;
            }
            catch (IOException ex) {}
            catch (NumberFormatException ex2) {}
            catch (FileNotFoundException ex3) {
                generateClientId = null;
                continue;
            }
            try {
                final FileInputStream fileInputStream = openFileInput;
                fileInputStream.close();
                generateClientId = s;
                continue;
            }
            catch (NumberFormatException ex4) {}
            catch (IOException ex5) {}
            catch (FileNotFoundException ex6) {
                generateClientId = s;
                continue;
            }
            break;
        }
    }
    
    @VisibleForTesting
    boolean isDisabled() {
        return this.mDisabled;
    }
    
    @Override
    public void requestAppOptOut(final GoogleAnalytics$AppOptOutCallback googleAnalytics$AppOptOutCallback) {
        this.queueToThread(new Runnable() {
            @Override
            public void run() {
                googleAnalytics$AppOptOutCallback.reportAppOptOut(GAThread.this.mAppOptOut);
            }
        });
    }
    
    @Override
    public void requestClientId(final AnalyticsThread$ClientIdCallback analyticsThread$ClientIdCallback) {
        this.queueToThread(new Runnable() {
            @Override
            public void run() {
                analyticsThread$ClientIdCallback.reportClientId(GAThread.this.mClientId);
            }
        });
    }
    
    @Override
    public void run() {
        // 
        // This method could not be decompiled.
        // 
        // Original Bytecode:
        // 
        //     0: ldc2_w          5000
        //     3: invokestatic    java/lang/Thread.sleep:(J)V
        //     6: aload_0        
        //     7: getfield        com/google/analytics/tracking/android/GAThread.mServiceProxy:Lcom/google/analytics/tracking/android/ServiceProxy;
        //    10: ifnonnull       29
        //    13: aload_0        
        //    14: new             Lcom/google/analytics/tracking/android/GAServiceProxy;
        //    17: dup            
        //    18: aload_0        
        //    19: getfield        com/google/analytics/tracking/android/GAThread.mContext:Landroid/content/Context;
        //    22: aload_0        
        //    23: invokespecial   com/google/analytics/tracking/android/GAServiceProxy.<init>:(Landroid/content/Context;Lcom/google/analytics/tracking/android/AnalyticsThread;)V
        //    26: putfield        com/google/analytics/tracking/android/GAThread.mServiceProxy:Lcom/google/analytics/tracking/android/ServiceProxy;
        //    29: aload_0        
        //    30: invokespecial   com/google/analytics/tracking/android/GAThread.init:()V
        //    33: aload_0        
        //    34: aload_0        
        //    35: invokespecial   com/google/analytics/tracking/android/GAThread.loadAppOptOut:()Z
        //    38: putfield        com/google/analytics/tracking/android/GAThread.mAppOptOut:Z
        //    41: aload_0        
        //    42: aload_0        
        //    43: invokevirtual   com/google/analytics/tracking/android/GAThread.initializeClientId:()Ljava/lang/String;
        //    46: putfield        com/google/analytics/tracking/android/GAThread.mClientId:Ljava/lang/String;
        //    49: aload_0        
        //    50: aload_0        
        //    51: getfield        com/google/analytics/tracking/android/GAThread.mContext:Landroid/content/Context;
        //    54: invokestatic    com/google/analytics/tracking/android/GAThread.getAndClearCampaign:(Landroid/content/Context;)Ljava/lang/String;
        //    57: putfield        com/google/analytics/tracking/android/GAThread.mInstallCampaign:Ljava/lang/String;
        //    60: aload_0        
        //    61: getfield        com/google/analytics/tracking/android/GAThread.mClosed:Z
        //    64: ifne            205
        //    67: aload_0        
        //    68: getfield        com/google/analytics/tracking/android/GAThread.queue:Ljava/util/concurrent/LinkedBlockingQueue;
        //    71: invokevirtual   java/util/concurrent/LinkedBlockingQueue.take:()Ljava/lang/Object;
        //    74: checkcast       Ljava/lang/Runnable;
        //    77: astore          11
        //    79: aload_0        
        //    80: getfield        com/google/analytics/tracking/android/GAThread.mDisabled:Z
        //    83: ifne            60
        //    86: aload           11
        //    88: invokeinterface java/lang/Runnable.run:()V
        //    93: goto            60
        //    96: astore          9
        //    98: aload           9
        //   100: invokevirtual   java/lang/InterruptedException.toString:()Ljava/lang/String;
        //   103: invokestatic    com/google/analytics/tracking/android/Log.i:(Ljava/lang/String;)I
        //   106: pop            
        //   107: goto            60
        //   110: astore          6
        //   112: new             Ljava/lang/StringBuilder;
        //   115: dup            
        //   116: ldc_w           "Error on GAThread: "
        //   119: invokespecial   java/lang/StringBuilder.<init>:(Ljava/lang/String;)V
        //   122: aload_0        
        //   123: aload           6
        //   125: invokespecial   com/google/analytics/tracking/android/GAThread.printStackTrace:(Ljava/lang/Throwable;)Ljava/lang/String;
        //   128: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   131: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //   134: invokestatic    com/google/analytics/tracking/android/Log.e:(Ljava/lang/String;)I
        //   137: pop            
        //   138: ldc_w           "Google Analytics is shutting down."
        //   141: invokestatic    com/google/analytics/tracking/android/Log.e:(Ljava/lang/String;)I
        //   144: pop            
        //   145: aload_0        
        //   146: iconst_1       
        //   147: putfield        com/google/analytics/tracking/android/GAThread.mDisabled:Z
        //   150: goto            60
        //   153: astore_1       
        //   154: ldc_w           "sleep interrupted in GAThread initialize"
        //   157: invokestatic    com/google/analytics/tracking/android/Log.w:(Ljava/lang/String;)I
        //   160: pop            
        //   161: goto            6
        //   164: astore_3       
        //   165: new             Ljava/lang/StringBuilder;
        //   168: dup            
        //   169: ldc_w           "Error initializing the GAThread: "
        //   172: invokespecial   java/lang/StringBuilder.<init>:(Ljava/lang/String;)V
        //   175: aload_0        
        //   176: aload_3        
        //   177: invokespecial   com/google/analytics/tracking/android/GAThread.printStackTrace:(Ljava/lang/Throwable;)Ljava/lang/String;
        //   180: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   183: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //   186: invokestatic    com/google/analytics/tracking/android/Log.e:(Ljava/lang/String;)I
        //   189: pop            
        //   190: ldc_w           "Google Analytics will not start up."
        //   193: invokestatic    com/google/analytics/tracking/android/Log.e:(Ljava/lang/String;)I
        //   196: pop            
        //   197: aload_0        
        //   198: iconst_1       
        //   199: putfield        com/google/analytics/tracking/android/GAThread.mDisabled:Z
        //   202: goto            60
        //   205: return         
        //    Exceptions:
        //  Try           Handler
        //  Start  End    Start  End    Type                            
        //  -----  -----  -----  -----  --------------------------------
        //  0      6      153    164    Ljava/lang/InterruptedException;
        //  33     60     164    205    Ljava/lang/Throwable;
        //  67     93     96     110    Ljava/lang/InterruptedException;
        //  67     93     110    153    Ljava/lang/Throwable;
        //  98     107    110    153    Ljava/lang/Throwable;
        // 
        // The error that occurred was:
        // 
        // java.lang.IllegalStateException: Expression is linked from several locations: Label_0060:
        //     at com.strobel.decompiler.ast.Error.expressionLinkedFromMultipleLocations(Error.java:27)
        //     at com.strobel.decompiler.ast.AstOptimizer.mergeDisparateObjectInitializations(AstOptimizer.java:2592)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:235)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:42)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:214)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:99)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createMethodBody(AstBuilder.java:757)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createMethod(AstBuilder.java:655)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addTypeMembers(AstBuilder.java:532)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeCore(AstBuilder.java:499)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeNoCache(AstBuilder.java:141)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createType(AstBuilder.java:130)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addType(AstBuilder.java:105)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.buildAst(JavaLanguage.java:71)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.decompileType(JavaLanguage.java:59)
        //     at com.strobel.decompiler.DecompilerDriver.decompileType(DecompilerDriver.java:317)
        //     at com.strobel.decompiler.DecompilerDriver.decompileJar(DecompilerDriver.java:238)
        //     at com.strobel.decompiler.DecompilerDriver.main(DecompilerDriver.java:123)
        // 
        throw new IllegalStateException("An error occurred while decompiling this method.");
    }
    
    @Override
    public void sendHit(final Map map) {
        final HashMap<String, String> hashMap = new HashMap<String, String>(map);
        final long currentTimeMillis = System.currentTimeMillis();
        hashMap.put("hitTime", Long.toString(currentTimeMillis));
        this.queueToThread(new Runnable() {
            @Override
            public void run() {
                hashMap.put("clientId", GAThread.this.mClientId);
                if (GAThread.this.mAppOptOut || GAThread.this.isSampledOut(hashMap)) {
                    return;
                }
                if (!TextUtils.isEmpty((CharSequence)GAThread.this.mInstallCampaign)) {
                    hashMap.put("campaign", GAThread.this.mInstallCampaign);
                    GAThread.this.mInstallCampaign = null;
                }
                GAThread.this.fillAppParameters(hashMap);
                GAThread.this.fillCampaignParameters(hashMap);
                GAThread.this.fillExceptionParameters(hashMap);
                GAThread.this.mServiceProxy.putHit(HitBuilder.generateHitParams(GAThread.this.mMetaModel, hashMap), currentTimeMillis, GAThread.this.getHostUrl(hashMap), GAThread.this.mCommands);
            }
        });
    }
    
    @Override
    public void setAppOptOut(final boolean b) {
        this.queueToThread(new Runnable() {
            @Override
            public void run() {
                if (GAThread.this.mAppOptOut == b) {
                    return;
                }
                while (true) {
                    Label_0076: {
                        if (!b) {
                            break Label_0076;
                        }
                        final File fileStreamPath = GAThread.this.mContext.getFileStreamPath("gaOptOut");
                        while (true) {
                            try {
                                fileStreamPath.createNewFile();
                                GAThread.this.mServiceProxy.clearHits();
                                GAThread.this.mAppOptOut = b;
                                return;
                            }
                            catch (IOException ex) {
                                Log.w("Error creating optOut file.");
                                continue;
                            }
                            break;
                        }
                    }
                    GAThread.this.mContext.deleteFile("gaOptOut");
                    continue;
                }
            }
        });
    }
}
