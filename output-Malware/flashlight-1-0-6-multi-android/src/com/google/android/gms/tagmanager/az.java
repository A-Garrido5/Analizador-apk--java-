// 
// Decompiled by Procyon v0.5.30
// 

package com.google.android.gms.tagmanager;

import java.util.HashSet;
import com.google.android.gms.internal.d$a;
import java.util.Map;
import java.util.Iterator;
import java.io.UnsupportedEncodingException;
import java.util.Set;
import com.google.android.gms.internal.b;
import com.google.android.gms.internal.a;

class az extends aj
{
    private static final String ID;
    private static final String XQ;
    private static final String Ym;
    private static final String Yn;
    private static final String Yo;
    
    static {
        ID = a.ac.toString();
        XQ = b.bi.toString();
        Ym = b.cL.toString();
        Yn = b.cO.toString();
        Yo = b.co.toString();
    }
    
    public az() {
        super(az.ID, new String[] { az.XQ });
    }
    
    private String a(final String s, final az$a az$a, final Set set) {
        switch (az$1.Yp[az$a.ordinal()]) {
            default: {
                return s;
            }
            case 1: {
                try {
                    return dk.cd(s);
                }
                catch (UnsupportedEncodingException ex) {
                    bh.b("Joiner: unsupported encoding", ex);
                    return s;
                }
            }
            case 2: {
                final String replace = s.replace("\\", "\\\\");
                final Iterator<Character> iterator = set.iterator();
                String replace2 = replace;
                while (iterator.hasNext()) {
                    final String string = iterator.next().toString();
                    replace2 = replace2.replace(string, "\\" + string);
                }
                return replace2;
            }
        }
    }
    
    private void a(final StringBuilder sb, final String s, final az$a az$a, final Set set) {
        sb.append(this.a(s, az$a, set));
    }
    
    private void a(final Set set, final String s) {
        for (int i = 0; i < s.length(); ++i) {
            set.add(s.charAt(i));
        }
    }
    
    @Override
    public boolean jX() {
        return true;
    }
    
    @Override
    public d$a x(final Map map) {
        final d$a d$a = map.get(az.XQ);
        if (d$a == null) {
            return dh.lT();
        }
        final d$a d$a2 = map.get(az.Ym);
        String j;
        if (d$a2 != null) {
            j = dh.j(d$a2);
        }
        else {
            j = "";
        }
        final d$a d$a3 = map.get(az.Yn);
        String i;
        if (d$a3 != null) {
            i = dh.j(d$a3);
        }
        else {
            i = "=";
        }
        final az$a yq = az$a.Yq;
        final d$a d$a4 = map.get(az.Yo);
        az$a az$a;
        Set set;
        if (d$a4 != null) {
            final String k = dh.j(d$a4);
            if ("url".equals(k)) {
                az$a = com.google.android.gms.tagmanager.az$a.Yr;
                set = null;
            }
            else {
                if (!"backslash".equals(k)) {
                    bh.w("Joiner: unsupported escape type: " + k);
                    return dh.lT();
                }
                az$a = com.google.android.gms.tagmanager.az$a.Ys;
                set = new HashSet();
                this.a(set, j);
                this.a(set, i);
                set.remove('\\');
            }
        }
        else {
            az$a = yq;
            set = null;
        }
        final StringBuilder sb = new StringBuilder();
        switch (d$a.type) {
            default: {
                this.a(sb, dh.j(d$a), az$a, set);
                break;
            }
            case 2: {
                int n = 1;
                final d$a[] fo = d$a.fO;
                for (int length = fo.length, l = 0; l < length; ++l, n = 0) {
                    final d$a d$a5 = fo[l];
                    if (n == 0) {
                        sb.append(j);
                    }
                    this.a(sb, dh.j(d$a5), az$a, set);
                }
                break;
            }
            case 3: {
                for (int n2 = 0; n2 < d$a.fP.length; ++n2) {
                    if (n2 > 0) {
                        sb.append(j);
                    }
                    final String m = dh.j(d$a.fP[n2]);
                    final String j2 = dh.j(d$a.fQ[n2]);
                    this.a(sb, m, az$a, set);
                    sb.append(i);
                    this.a(sb, j2, az$a, set);
                }
                break;
            }
        }
        return dh.r(sb.toString());
    }
}
