// 
// Decompiled by Procyon v0.5.30
// 

package com.google.android.gms.tagmanager;

import java.util.concurrent.TimeUnit;
import java.util.concurrent.Executors;
import android.content.Context;
import java.util.concurrent.ScheduledFuture;
import java.util.concurrent.ScheduledExecutorService;

class co implements o$e
{
    private final String WJ;
    private String Xg;
    private bg Zf;
    private r Zg;
    private final ScheduledExecutorService Zi;
    private final co$a Zj;
    private ScheduledFuture Zk;
    private boolean mClosed;
    private final Context mContext;
    
    public co(final Context context, final String s, final r r) {
        this(context, s, r, null, null);
    }
    
    co(final Context mContext, final String wj, final r zg, co$b co$b, final co$a zj) {
        this.Zg = zg;
        this.mContext = mContext;
        this.WJ = wj;
        if (co$b == null) {
            co$b = new co$b() {
                @Override
                public ScheduledExecutorService la() {
                    return Executors.newSingleThreadScheduledExecutor();
                }
            };
        }
        this.Zi = co$b.la();
        if (zj == null) {
            this.Zj = new co$a() {
                @Override
                public cn a(final r r) {
                    return new cn(co.this.mContext, co.this.WJ, r);
                }
            };
            return;
        }
        this.Zj = zj;
    }
    
    private cn bK(final String s) {
        final cn a = this.Zj.a(this.Zg);
        a.a(this.Zf);
        a.bu(this.Xg);
        a.bJ(s);
        return a;
    }
    
    private void kZ() {
        synchronized (this) {
            if (this.mClosed) {
                throw new IllegalStateException("called method after closed");
            }
        }
    }
    // monitorexit(this)
    
    @Override
    public void a(final bg zf) {
        synchronized (this) {
            this.kZ();
            this.Zf = zf;
        }
    }
    
    @Override
    public void bu(final String xg) {
        synchronized (this) {
            this.kZ();
            this.Xg = xg;
        }
    }
    
    @Override
    public void d(final long n, final String s) {
        synchronized (this) {
            bh.y("loadAfterDelay: containerId=" + this.WJ + " delay=" + n);
            this.kZ();
            if (this.Zf == null) {
                throw new IllegalStateException("callback must be set before loadAfterDelay() is called.");
            }
        }
        if (this.Zk != null) {
            this.Zk.cancel(false);
        }
        this.Zk = this.Zi.schedule(this.bK(s), n, TimeUnit.MILLISECONDS);
    }
    // monitorexit(this)
    
    @Override
    public void release() {
        synchronized (this) {
            this.kZ();
            if (this.Zk != null) {
                this.Zk.cancel(false);
            }
            this.Zi.shutdown();
            this.mClosed = true;
        }
    }
}
