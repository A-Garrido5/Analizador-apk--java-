// 
// Decompiled by Procyon v0.5.30
// 

package com.google.android.gms.analytics;

import com.google.android.gms.internal.fq;
import java.util.Locale;
import android.text.TextUtils;
import android.content.Context;
import java.util.Map;
import java.util.HashMap;
import android.app.Activity;
import java.util.TimerTask;
import java.util.Timer;

class Tracker$a implements GoogleAnalytics$a
{
    private i tg;
    private Timer vV;
    private TimerTask vW;
    private boolean vX;
    private boolean vY;
    private int vZ;
    private long wa;
    private boolean wb;
    private long wc;
    final /* synthetic */ Tracker wd;
    
    public Tracker$a(final Tracker wd) {
        this.wd = wd;
        this.vX = false;
        this.vY = false;
        this.vZ = 0;
        this.wa = -1L;
        this.wb = false;
        this.tg = new i() {
            @Override
            public long currentTimeMillis() {
                return System.currentTimeMillis();
            }
        };
    }
    
    private void df() {
        final GoogleAnalytics cm = GoogleAnalytics.cM();
        if (cm == null) {
            aa.w("GoogleAnalytics isn't initialized for the Tracker!");
            return;
        }
        if (this.wa >= 0L || this.vY) {
            cm.a(this.wd.vT);
            return;
        }
        cm.b(this.wd.vT);
    }
    
    private void dg() {
        synchronized (this) {
            if (this.vV != null) {
                this.vV.cancel();
                this.vV = null;
            }
        }
    }
    
    public long dc() {
        return this.wa;
    }
    
    public boolean dd() {
        return this.vY;
    }
    
    public boolean de() {
        final boolean wb = this.wb;
        this.wb = false;
        return wb;
    }
    
    boolean dh() {
        return this.wa == 0L || (this.wa > 0L && this.tg.currentTimeMillis() > this.wc + this.wa);
    }
    
    public void enableAutoActivityTracking(final boolean vy) {
        this.vY = vy;
        this.df();
    }
    
    @Override
    public void f(final Activity activity) {
        u.cy().a(u$a.uQ);
        this.dg();
        if (!this.vX && this.vZ == 0 && this.dh()) {
            this.wb = true;
        }
        this.vX = true;
        ++this.vZ;
        if (this.vY) {
            final HashMap<String, String> hashMap = new HashMap<String, String>();
            hashMap.put("&t", "appview");
            u.cy().t(true);
            final Tracker wd = this.wd;
            String s;
            if (this.wd.vU != null) {
                s = this.wd.vU.h(activity);
            }
            else {
                s = activity.getClass().getCanonicalName();
            }
            wd.set("&cd", s);
            this.wd.send(hashMap);
            u.cy().t(false);
        }
    }
    
    @Override
    public void g(final Activity activity) {
        u.cy().a(u$a.uR);
        --this.vZ;
        this.vZ = Math.max(0, this.vZ);
        this.wc = this.tg.currentTimeMillis();
        if (this.vZ == 0) {
            this.dg();
            this.vW = new Tracker$a$a(this, null);
            (this.vV = new Timer("waitForActivityStart")).schedule(this.vW, 1000L);
        }
    }
    
    public void setSessionTimeout(final long wa) {
        this.wa = wa;
        this.df();
    }
}
