// 
// Decompiled by Procyon v0.5.30
// 

package com.google.android.gms.internal;

import java.io.ObjectInputStream;
import java.io.IOException;
import java.io.ObjectOutputStream;
import java.io.Serializable;
import java.util.Locale;
import android.graphics.Color;
import java.util.Date;
import java.util.Map;
import java.util.HashMap;
import android.location.Location;
import org.json.JSONArray;
import java.util.List;
import org.json.JSONException;
import java.util.LinkedList;
import android.text.TextUtils;
import org.json.JSONObject;
import android.content.Context;
import java.text.SimpleDateFormat;

public final class dd
{
    private static final SimpleDateFormat pH;
    
    static {
        pH = new SimpleDateFormat("yyyyMMdd");
    }
    
    public static cz a(final Context context, final cx cx, final String s) {
        JSONObject jsonObject = null;
        String s2 = null;
        String optString2 = null;
        String s3 = null;
        long ps = 0L;
        String optString3 = null;
        long pn = 0L;
        int n = 0;
        cz cz = null;
        List<String> list = null;
    Label_0242_Outer:
        while (true) {
            List<String> ne = null;
        Label_0242:
            while (true) {
            Label_0645:
                while (true) {
                    Label_0637: {
                        while (true) {
                            Label_0631: {
                                while (true) {
                                    Label_0325: {
                                        try {
                                            jsonObject = new JSONObject(s);
                                            s2 = jsonObject.optString("ad_base_url", (String)null);
                                            final String optString = jsonObject.optString("ad_url", (String)null);
                                            optString2 = jsonObject.optString("ad_size", (String)null);
                                            s3 = jsonObject.optString("ad_html", (String)null);
                                            ps = -1L;
                                            optString3 = jsonObject.optString("debug_dialog", (String)null);
                                            if (!jsonObject.has("interstitial_timeout")) {
                                                break Label_0637;
                                            }
                                            pn = (long)(1000.0 * jsonObject.getDouble("interstitial_timeout"));
                                            final String optString4 = jsonObject.optString("orientation", (String)null);
                                            n = -1;
                                            if ("portrait".equals(optString4)) {
                                                n = dq.bA();
                                            }
                                            else if ("landscape".equals(optString4)) {
                                                n = dq.bz();
                                            }
                                            final JSONArray optJSONArray;
                                            if (!TextUtils.isEmpty((CharSequence)s3)) {
                                                if (TextUtils.isEmpty((CharSequence)s2)) {
                                                    dw.z("Could not parse the mediation config: Missing required ad_base_url field");
                                                    return new cz(0);
                                                }
                                                break Label_0631;
                                            }
                                            else {
                                                if (TextUtils.isEmpty((CharSequence)optString)) {
                                                    dw.z("Could not parse the mediation config: Missing required ad_html or ad_url field.");
                                                    return new cz(0);
                                                }
                                                final cz a = dc.a(context, cx.kK.rq, optString);
                                                s2 = a.ol;
                                                s3 = a.pm;
                                                ps = a.ps;
                                                cz = a;
                                                optJSONArray = jsonObject.optJSONArray("click_urls");
                                                if (cz != null) {
                                                    break Label_0325;
                                                }
                                                ne = null;
                                                if (optJSONArray == null) {
                                                    break Label_0242;
                                                }
                                                if (ne == null) {
                                                    ne = new LinkedList<String>();
                                                }
                                                break Label_0645;
                                            }
                                            // iftrue(Label_0651:, n2 >= optJSONArray.length())
                                            int n2 = 0;
                                            ne.add(optJSONArray.getString(n2));
                                            ++n2;
                                            continue Label_0242;
                                        }
                                        catch (JSONException ex) {
                                            dw.z("Could not parse the mediation config: " + ex.getMessage());
                                            return new cz(0);
                                        }
                                    }
                                    ne = (List<String>)cz.ne;
                                    continue Label_0242_Outer;
                                }
                            }
                            cz = null;
                            continue Label_0242_Outer;
                        }
                    }
                    pn = -1L;
                    continue Label_0242_Outer;
                }
                int n2 = 0;
                continue Label_0242;
            }
            list = ne;
            break;
            Label_0651: {
                list = ne;
            }
            break;
        }
        final JSONArray optJSONArray2 = jsonObject.optJSONArray("impression_urls");
        List<String> nf;
        if (cz == null) {
            nf = null;
        }
        else {
            nf = (List<String>)cz.nf;
        }
        List<String> list2;
        if (optJSONArray2 != null) {
            if (nf == null) {
                nf = new LinkedList<String>();
            }
            for (int i = 0; i < optJSONArray2.length(); ++i) {
                nf.add(optJSONArray2.getString(i));
            }
            list2 = nf;
        }
        else {
            list2 = nf;
        }
        final JSONArray optJSONArray3 = jsonObject.optJSONArray("manual_impression_urls");
        List<String> pq;
        if (cz == null) {
            pq = null;
        }
        else {
            pq = (List<String>)cz.pq;
        }
        List<String> list3;
        if (optJSONArray3 != null) {
            if (pq == null) {
                pq = new LinkedList<String>();
            }
            for (int j = 0; j < optJSONArray3.length(); ++j) {
                pq.add(optJSONArray3.getString(j));
            }
            list3 = pq;
        }
        else {
            list3 = pq;
        }
        if (cz != null) {
            if (cz.orientation != -1) {
                n = cz.orientation;
            }
            if (cz.pn > 0L) {
                pn = cz.pn;
            }
        }
        final String optString5 = jsonObject.optString("active_view");
        final boolean optBoolean = jsonObject.optBoolean("ad_is_javascript", false);
        String optString6 = null;
        if (optBoolean) {
            optString6 = jsonObject.optString("ad_passback_url", (String)null);
        }
        return new cz(s2, s3, list, list2, pn, false, -1L, list3, -1L, n, optString2, ps, optString3, optBoolean, optString6, optString5);
    }
    
    public static String a(final cx cx, final dg dg, final Location location, final String s) {
        try {
            final HashMap<String, String> hashMap = new HashMap<String, String>();
            if (s != null && s.trim() != "") {
                hashMap.put("eid", s);
            }
            if (cx.pf != null) {
                hashMap.put("ad_pos", (String)cx.pf);
            }
            a(hashMap, cx.pg);
            hashMap.put("format", cx.kN.lS);
            if (cx.kN.width == -1) {
                hashMap.put("smart_w", "full");
            }
            if (cx.kN.height == -2) {
                hashMap.put("smart_h", "auto");
            }
            if (cx.kN.lU != null) {
                final StringBuilder sb = new StringBuilder();
                for (final ak ak : cx.kN.lU) {
                    if (sb.length() != 0) {
                        sb.append("|");
                    }
                    int width;
                    if (ak.width == -1) {
                        width = (int)(ak.widthPixels / dg.qp);
                    }
                    else {
                        width = ak.width;
                    }
                    sb.append(width);
                    sb.append("x");
                    int height;
                    if (ak.height == -2) {
                        height = (int)(ak.heightPixels / dg.qp);
                    }
                    else {
                        height = ak.height;
                    }
                    sb.append(height);
                }
                hashMap.put("sz", (String)sb);
            }
            hashMap.put("slotname", cx.kH);
            hashMap.put("pn", cx.applicationInfo.packageName);
            if (cx.ph != null) {
                hashMap.put("vc", (String)cx.ph.versionCode);
            }
            hashMap.put("ms", cx.pi);
            hashMap.put("seq_num", cx.pj);
            hashMap.put("session_id", cx.pk);
            hashMap.put("js", cx.kK.rq);
            a(hashMap, dg);
            if (cx.pg.versionCode >= 2 && cx.pg.lP != null) {
                a(hashMap, cx.pg.lP);
            }
            if (cx.versionCode >= 2) {
                hashMap.put("quality_signals", (String)cx.pl);
            }
            if (dw.n(2)) {
                dw.y("Ad Request JSON: " + dq.p(hashMap).toString(2));
            }
            return dq.p(hashMap).toString();
        }
        catch (JSONException ex) {
            dw.z("Problem serializing ad request to JSON: " + ex.getMessage());
            return null;
        }
    }
    
    private static void a(final HashMap hashMap, final Location location) {
        final HashMap<String, Float> hashMap2 = new HashMap<String, Float>();
        final Float value = 1000.0f * location.getAccuracy();
        final Long value2 = 1000L * location.getTime();
        final Long value3 = (long)(1.0E7 * location.getLatitude());
        final Long value4 = (long)(1.0E7 * location.getLongitude());
        hashMap2.put("radius", value);
        hashMap2.put("lat", (Float)value3);
        hashMap2.put("long", (Float)value4);
        hashMap2.put("time", (Float)value2);
        hashMap.put("uule", hashMap2);
    }
    
    private static void a(final HashMap hashMap, final ah ah) {
        final String bx = dn.bx();
        if (bx != null) {
            hashMap.put("abf", bx);
        }
        if (ah.lH != -1L) {
            hashMap.put("cust_age", dd.pH.format(new Date(ah.lH)));
        }
        if (ah.extras != null) {
            hashMap.put("extras", ah.extras);
        }
        if (ah.lI != -1) {
            hashMap.put("cust_gender", ah.lI);
        }
        if (ah.lJ != null) {
            hashMap.put("kw", ah.lJ);
        }
        if (ah.lL != -1) {
            hashMap.put("tag_for_child_directed_treatment", ah.lL);
        }
        if (ah.lK) {
            hashMap.put("adtest", "on");
        }
        if (ah.versionCode >= 2) {
            if (ah.lM) {
                hashMap.put("d_imp_hdr", 1);
            }
            if (!TextUtils.isEmpty((CharSequence)ah.lN)) {
                hashMap.put("ppid", ah.lN);
            }
            if (ah.lO != null) {
                a(hashMap, ah.lO);
            }
        }
        if (ah.versionCode >= 3 && ah.lQ != null) {
            hashMap.put("url", ah.lQ);
        }
    }
    
    private static void a(final HashMap hashMap, final av av) {
        if (Color.alpha(av.mq) != 0) {
            hashMap.put("acolor", m(av.mq));
        }
        if (Color.alpha(av.backgroundColor) != 0) {
            hashMap.put("bgcolor", m(av.backgroundColor));
        }
        if (Color.alpha(av.mr) != 0 && Color.alpha(av.ms) != 0) {
            hashMap.put("gradientto", m(av.mr));
            hashMap.put("gradientfrom", m(av.ms));
        }
        if (Color.alpha(av.mt) != 0) {
            hashMap.put("bcolor", m(av.mt));
        }
        hashMap.put("bthick", Integer.toString(av.mu));
        String s = null;
        switch (av.mv) {
            default: {
                s = null;
                break;
            }
            case 0: {
                s = "none";
                break;
            }
            case 1: {
                s = "dashed";
                break;
            }
            case 2: {
                s = "dotted";
                break;
            }
            case 3: {
                s = "solid";
                break;
            }
        }
        if (s != null) {
            hashMap.put("btype", s);
        }
        final int mw = av.mw;
        String s2 = null;
        switch (mw) {
            case 2: {
                s2 = "dark";
                break;
            }
            case 0: {
                s2 = "light";
                break;
            }
            case 1: {
                s2 = "medium";
                break;
            }
        }
        if (s2 != null) {
            hashMap.put("callbuttoncolor", s2);
        }
        if (av.mx != null) {
            hashMap.put("channel", av.mx);
        }
        if (Color.alpha(av.my) != 0) {
            hashMap.put("dcolor", m(av.my));
        }
        if (av.mz != null) {
            hashMap.put("font", av.mz);
        }
        if (Color.alpha(av.mA) != 0) {
            hashMap.put("hcolor", m(av.mA));
        }
        hashMap.put("headersize", Integer.toString(av.mB));
        if (av.mC != null) {
            hashMap.put("q", av.mC);
        }
    }
    
    private static void a(final HashMap hashMap, final dg dg) {
        hashMap.put("am", dg.pZ);
        hashMap.put("cog", l(dg.qa));
        hashMap.put("coh", l(dg.qb));
        if (!TextUtils.isEmpty((CharSequence)dg.qc)) {
            hashMap.put("carrier", dg.qc);
        }
        hashMap.put("gl", dg.qd);
        if (dg.qe) {
            hashMap.put("simulator", 1);
        }
        hashMap.put("ma", l(dg.qf));
        hashMap.put("sp", l(dg.qg));
        hashMap.put("hl", dg.qh);
        if (!TextUtils.isEmpty((CharSequence)dg.qi)) {
            hashMap.put("mv", dg.qi);
        }
        hashMap.put("muv", dg.qj);
        if (dg.qk != -2) {
            hashMap.put("cnt", dg.qk);
        }
        hashMap.put("gnt", dg.ql);
        hashMap.put("pt", dg.qm);
        hashMap.put("rm", dg.qn);
        hashMap.put("riv", dg.qo);
        hashMap.put("u_sd", dg.qp);
        hashMap.put("sh", dg.qr);
        hashMap.put("sw", dg.qq);
    }
    
    private static Integer l(final boolean b) {
        int n;
        if (b) {
            n = 1;
        }
        else {
            n = 0;
        }
        return n;
    }
    
    private static String m(final int n) {
        return String.format(Locale.US, "#%06x", 0xFFFFFF & n);
    }
}
