// 
// Decompiled by Procyon v0.5.30
// 

package com.google.android.gms.common.images;

import android.net.Uri;
import android.widget.ImageView;
import com.google.android.gms.internal.fb;
import android.content.ComponentCallbacks;
import android.graphics.Bitmap;
import java.util.HashMap;
import com.google.android.gms.internal.gr;
import java.util.concurrent.Executors;
import android.os.Looper;
import android.os.Handler;
import android.content.Context;
import java.util.Map;
import com.google.android.gms.internal.fa;
import java.util.concurrent.ExecutorService;
import java.util.HashSet;

public final class ImageManager
{
    private static final Object BY;
    private static HashSet BZ;
    private static ImageManager Ca;
    private static ImageManager Cb;
    private final ExecutorService Cc;
    private final ImageManager$b Cd;
    private final fa Ce;
    private final Map Cf;
    private final Map Cg;
    private final Context mContext;
    private final Handler mHandler;
    
    static {
        BY = new Object();
        ImageManager.BZ = new HashSet();
    }
    
    private ImageManager(final Context context, final boolean b) {
        this.mContext = context.getApplicationContext();
        this.mHandler = new Handler(Looper.getMainLooper());
        this.Cc = Executors.newFixedThreadPool(4);
        if (b) {
            this.Cd = new ImageManager$b(this.mContext);
            if (gr.fx()) {
                this.ev();
            }
        }
        else {
            this.Cd = null;
        }
        this.Ce = new fa();
        this.Cf = new HashMap();
        this.Cg = new HashMap();
    }
    
    private Bitmap a(final a$a a$a) {
        if (this.Cd == null) {
            return null;
        }
        return (Bitmap)this.Cd.get(a$a);
    }
    
    public static ImageManager a(final Context context, final boolean b) {
        if (b) {
            if (ImageManager.Cb == null) {
                ImageManager.Cb = new ImageManager(context, true);
            }
            return ImageManager.Cb;
        }
        if (ImageManager.Ca == null) {
            ImageManager.Ca = new ImageManager(context, false);
        }
        return ImageManager.Ca;
    }
    
    public static ImageManager create(final Context context) {
        return a(context, false);
    }
    
    private void ev() {
        this.mContext.registerComponentCallbacks((ComponentCallbacks)new ImageManager$e(this.Cd));
    }
    
    public final void a(final a a) {
        fb.aj("ImageManager.loadImage() must be called in the main thread");
        new ImageManager$d(this, a).run();
    }
    
    public final void loadImage(final ImageView imageView, final int n) {
        this.a(new a$b(imageView, n));
    }
    
    public final void loadImage(final ImageView imageView, final Uri uri) {
        this.a(new a$b(imageView, uri));
    }
    
    public final void loadImage(final ImageView imageView, final Uri uri, final int n) {
        final a$b a$b = new a$b(imageView, uri);
        a$b.J(n);
        this.a(a$b);
    }
    
    public final void loadImage(final ImageManager$OnImageLoadedListener imageManager$OnImageLoadedListener, final Uri uri) {
        this.a(new a$c(imageManager$OnImageLoadedListener, uri));
    }
    
    public final void loadImage(final ImageManager$OnImageLoadedListener imageManager$OnImageLoadedListener, final Uri uri, final int n) {
        final a$c a$c = new a$c(imageManager$OnImageLoadedListener, uri);
        a$c.J(n);
        this.a(a$c);
    }
}
