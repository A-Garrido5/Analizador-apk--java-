// 
// Decompiled by Procyon v0.5.30
// 

package com.google.android.gms.drive.internal;

import android.os.IInterface;
import android.os.RemoteException;
import com.google.android.gms.internal.fl;
import com.google.android.gms.internal.ff$e;
import com.google.android.gms.internal.fm;
import android.os.Bundle;
import com.google.android.gms.common.api.a$b;
import com.google.android.gms.common.api.a$d;
import android.app.PendingIntent;
import com.google.android.gms.common.api.Api$a;
import com.google.android.gms.common.api.Status;
import com.google.android.gms.drive.events.c;
import com.google.android.gms.common.api.PendingResult;
import com.google.android.gms.drive.events.DriveEvent$Listener;
import com.google.android.gms.common.api.GoogleApiClient;
import android.os.IBinder;
import com.google.android.gms.internal.fq;
import java.util.HashMap;
import com.google.android.gms.common.api.GoogleApiClient$OnConnectionFailedListener;
import com.google.android.gms.internal.fc;
import android.os.Looper;
import android.content.Context;
import java.util.Map;
import com.google.android.gms.common.api.GoogleApiClient$ConnectionCallbacks;
import com.google.android.gms.drive.DriveId;
import com.google.android.gms.internal.ff;

public class n extends ff
{
    private DriveId Fh;
    private DriveId Fi;
    final GoogleApiClient$ConnectionCallbacks Fj;
    Map Fk;
    private final String wG;
    
    public n(final Context context, final Looper looper, final fc fc, final GoogleApiClient$ConnectionCallbacks fj, final GoogleApiClient$OnConnectionFailedListener googleApiClient$OnConnectionFailedListener, final String[] array) {
        super(context, looper, fj, googleApiClient$OnConnectionFailedListener, array);
        this.Fk = new HashMap();
        this.wG = (String)fq.b((Object)fc.eC(), "Must call Api.ClientBuilder.setAccountName()");
        this.Fj = fj;
    }
    
    protected u F(final IBinder binder) {
        return u$a.G(binder);
    }
    
    PendingResult a(final GoogleApiClient googleApiClient, final DriveId driveId, final int n, final DriveEvent$Listener driveEvent$Listener) {
        fq.b(c.a(n, driveId), "id");
        fq.b(driveEvent$Listener, "listener");
        fq.a(this.isConnected(), (Object)"Client must be connected");
        synchronized (this.Fk) {
            Object o = this.Fk.get(driveId);
            if (o == null) {
                o = new HashMap<DriveEvent$Listener, s>();
                this.Fk.put(driveId, o);
            }
            if (((Map)o).containsKey(driveEvent$Listener)) {
                return new l$k(googleApiClient, Status.Bv);
            }
            final s s = new s(this.getLooper(), n, driveEvent$Listener);
            ((Map<DriveEvent$Listener, s>)o).put(driveEvent$Listener, s);
            return googleApiClient.b(new l$j() {
                protected void a(final n n) {
                    n.fE().a(new AddEventListenerRequest(driveId, n, null), s, null, new al(this));
                }
            });
        }
    }
    
    @Override
    protected void a(final int n, final IBinder binder, final Bundle bundle) {
        if (bundle != null) {
            bundle.setClassLoader(this.getClass().getClassLoader());
            this.Fh = (DriveId)bundle.getParcelable("com.google.android.gms.drive.root_id");
            this.Fi = (DriveId)bundle.getParcelable("com.google.android.gms.drive.appdata_id");
        }
        super.a(n, binder, bundle);
    }
    
    @Override
    protected void a(final fm fm, final ff$e ff$e) {
        final String packageName = this.getContext().getPackageName();
        fq.f(ff$e);
        fq.f(packageName);
        fq.f(this.eL());
        fm.a(ff$e, 4452000, packageName, this.eL(), this.wG, new Bundle());
    }
    
    PendingResult b(final GoogleApiClient googleApiClient, final DriveId driveId, final int n, final DriveEvent$Listener driveEvent$Listener) {
        fq.b(c.a(n, driveId), "id");
        fq.b(driveEvent$Listener, "listener");
        fq.a(this.isConnected(), (Object)"Client must be connected");
        final Map<Object, s> map;
        final s s;
        synchronized (this.Fk) {
            map = this.Fk.get(driveId);
            if (map == null) {
                return new l$k(googleApiClient, Status.Bv);
            }
            s = map.remove(driveEvent$Listener);
            if (s == null) {
                return new l$k(googleApiClient, Status.Bv);
            }
        }
        if (map.isEmpty()) {
            this.Fk.remove(driveId);
        }
        // monitorexit(map2)
        return googleApiClient.b(new l$j() {
            protected void a(final n n) {
                n.fE().a(new RemoveEventListenerRequest(driveId, n), s, null, new al(this));
            }
        });
    }
    
    @Override
    protected String bg() {
        return "com.google.android.gms.drive.ApiService.START";
    }
    
    @Override
    protected String bh() {
        return "com.google.android.gms.drive.internal.IDriveService";
    }
    
    @Override
    public void disconnect() {
        final u u = (u)this.eM();
        while (true) {
            if (u == null) {
                break Label_0025;
            }
            try {
                u.a(new DisconnectRequest());
                super.disconnect();
                this.Fk.clear();
            }
            catch (RemoteException ex) {
                continue;
            }
            break;
        }
    }
    
    public u fE() {
        return (u)this.eM();
    }
    
    public DriveId fF() {
        return this.Fh;
    }
    
    public DriveId fG() {
        return this.Fi;
    }
}
