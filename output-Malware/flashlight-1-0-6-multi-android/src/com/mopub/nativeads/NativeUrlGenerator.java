// 
// Decompiled by Procyon v0.5.30
// 

package com.mopub.nativeads;

import android.location.Location;
import com.mopub.common.LocationService;
import com.mopub.common.GpsHelper;
import android.os.Build;
import com.mopub.common.util.Strings;
import android.content.Context;
import com.mopub.common.LocationService$LocationAwareness;
import com.mopub.common.AdUrlGenerator;

class NativeUrlGenerator extends AdUrlGenerator
{
    private static LocationService$LocationAwareness sLocationAwareness;
    private static int sLocationPrecision;
    private String mDesiredAssets;
    
    static {
        NativeUrlGenerator.sLocationPrecision = 6;
        NativeUrlGenerator.sLocationAwareness = LocationService$LocationAwareness.NORMAL;
    }
    
    NativeUrlGenerator(final Context context) {
        super(context);
    }
    
    private void setDesiredAssets() {
        if (this.mDesiredAssets != null && !Strings.isEmpty(this.mDesiredAssets)) {
            this.addParam("assets", this.mDesiredAssets);
        }
    }
    
    @Override
    public String generateUrlString(final String s) {
        this.initUrlString(s, "/m/ad");
        this.setAdUnitId(this.mAdUnitId);
        this.setSdkVersion("2.3");
        this.setDeviceInfo(Build.MANUFACTURER, Build.MODEL, Build.PRODUCT);
        this.setUdid(this.getUdidFromContext(this.mContext));
        this.setDoNotTrack(GpsHelper.isLimitAdTrackingEnabled(this.mContext));
        this.setKeywords(this.mKeywords);
        Location location = this.mLocation;
        if (location == null) {
            location = LocationService.getLastKnownLocation(this.mContext, NativeUrlGenerator.sLocationPrecision, NativeUrlGenerator.sLocationAwareness);
        }
        this.setLocation(location);
        this.setTimezone(AdUrlGenerator.getTimeZoneOffsetString());
        this.setOrientation(this.mContext.getResources().getConfiguration().orientation);
        this.setDensity(this.mContext.getResources().getDisplayMetrics().density);
        final String networkOperator = this.getNetworkOperator();
        this.setMccCode(networkOperator);
        this.setMncCode(networkOperator);
        this.setIsoCountryCode(this.mTelephonyManager.getNetworkCountryIso());
        this.setCarrierName(this.mTelephonyManager.getNetworkOperatorName());
        this.setNetworkType(this.getActiveNetworkType());
        this.setAppVersion(this.getAppVersionFromContext(this.mContext));
        this.setTwitterAppInstalledFlag();
        this.setDesiredAssets();
        return this.getFinalUrlString();
    }
    
    @Override
    protected void setSdkVersion(final String s) {
        this.addParam("nsv", s);
    }
    
    @Override
    public NativeUrlGenerator withAdUnitId(final String mAdUnitId) {
        this.mAdUnitId = mAdUnitId;
        return this;
    }
    
    NativeUrlGenerator withRequest(final RequestParameters requestParameters) {
        if (requestParameters != null) {
            this.mKeywords = requestParameters.getKeywords();
            this.mLocation = requestParameters.getLocation();
            this.mDesiredAssets = requestParameters.getDesiredAssets();
        }
        return this;
    }
}
