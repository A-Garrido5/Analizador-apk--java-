// 
// Decompiled by Procyon v0.5.30
// 

package com.mopub.nativeads;

import com.mopub.common.util.MoPubLog;
import android.view.ViewGroup;
import android.view.View;
import android.app.Activity;
import android.content.Context;
import java.lang.ref.WeakReference;

public final class AdapterHelper
{
    private final WeakReference mActivity;
    private final Context mApplicationContext;
    private final int mInterval;
    private final int mStart;
    
    public AdapterHelper(final Context context, final int mStart, final int mInterval) {
        if (context == null) {
            throw new IllegalArgumentException("Illegal argument: Context was null.");
        }
        if (!(context instanceof Activity)) {
            throw new IllegalArgumentException("Illegal argument: Context must be instance of Activity.");
        }
        if (mStart < 0) {
            throw new IllegalArgumentException("Illegal argument: negative starting position.");
        }
        if (mInterval < 2) {
            throw new IllegalArgumentException("Illegal argument: interval must be at least 2.");
        }
        this.mActivity = new WeakReference((T)context);
        this.mApplicationContext = context.getApplicationContext();
        this.mStart = mStart;
        this.mInterval = mInterval;
    }
    
    private int numberOfAdsSeenUpToPosition(final int n) {
        if (n <= this.mStart) {
            return 0;
        }
        return 1 + (int)Math.floor((n - this.mStart) / this.mInterval);
    }
    
    private int numberOfAdsThatCouldFitWithContent(final int n) {
        if (n <= this.mStart) {
            return 0;
        }
        final int n2 = -1 + this.mInterval;
        if ((n - this.mStart) % n2 == 0) {
            return (n - this.mStart) / n2;
        }
        return 1 + (int)Math.floor((n - this.mStart) / n2);
    }
    
    @Deprecated
    final void clearActivityContext() {
        this.mActivity.clear();
    }
    
    public final View getAdView(final View view, final ViewGroup viewGroup, final NativeResponse nativeResponse, final ViewBinder viewBinder, final MoPubNative$MoPubNativeListener moPubNative$MoPubNativeListener) {
        final Activity activity = (Activity)this.mActivity.get();
        if (activity == null) {
            MoPubLog.d("Weak reference to Activity Context in AdapterHelper became null. Returning empty view.");
            return new View(this.mApplicationContext);
        }
        return NativeAdViewHelper.getAdView(view, viewGroup, (Context)activity, nativeResponse, viewBinder, moPubNative$MoPubNativeListener);
    }
    
    public final boolean isAdPosition(final int n) {
        return n >= this.mStart && (n - this.mStart) % this.mInterval == 0;
    }
    
    public final int shiftedCount(final int n) {
        return n + this.numberOfAdsThatCouldFitWithContent(n);
    }
    
    public final int shiftedPosition(final int n) {
        return n - this.numberOfAdsSeenUpToPosition(n);
    }
}
