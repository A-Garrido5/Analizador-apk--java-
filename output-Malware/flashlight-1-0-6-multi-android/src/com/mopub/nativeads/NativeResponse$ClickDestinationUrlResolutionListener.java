// 
// Decompiled by Procyon v0.5.30
// 

package com.mopub.nativeads;

import com.mopub.common.MoPubBrowser;
import com.mopub.common.util.IntentUtils;
import android.net.Uri;
import android.content.Intent;
import com.mopub.common.util.MoPubLog;
import java.util.Iterator;
import java.lang.ref.SoftReference;
import android.content.Context;

class NativeResponse$ClickDestinationUrlResolutionListener implements UrlResolutionTask$UrlResolutionListener
{
    private final Context mContext;
    private final SoftReference mSpinningProgressView;
    private final Iterator mUrlIterator;
    
    public NativeResponse$ClickDestinationUrlResolutionListener(final Context context, final Iterator mUrlIterator, final SpinningProgressView spinningProgressView) {
        this.mContext = context.getApplicationContext();
        this.mUrlIterator = mUrlIterator;
        this.mSpinningProgressView = new SoftReference((T)spinningProgressView);
    }
    
    private void removeSpinningProgressView() {
        final SpinningProgressView spinningProgressView = this.mSpinningProgressView.get();
        if (spinningProgressView != null) {
            spinningProgressView.removeFromRoot();
        }
    }
    
    @Override
    public void onFailure() {
        MoPubLog.d("Failed to resolve URL for click.");
        this.removeSpinningProgressView();
    }
    
    @Override
    public void onSuccess(final String s) {
        final Intent intent = new Intent("android.intent.action.VIEW");
        intent.setData(Uri.parse(s));
        intent.addFlags(268435456);
        if (IntentUtils.isDeepLink(s) && IntentUtils.deviceCanHandleIntent(this.mContext, intent)) {
            this.mContext.startActivity(intent);
        }
        else {
            if (this.mUrlIterator.hasNext()) {
                UrlResolutionTask.getResolvedUrl(this.mUrlIterator.next(), this);
                return;
            }
            MoPubBrowser.open(this.mContext, s);
        }
        this.removeSpinningProgressView();
    }
}
