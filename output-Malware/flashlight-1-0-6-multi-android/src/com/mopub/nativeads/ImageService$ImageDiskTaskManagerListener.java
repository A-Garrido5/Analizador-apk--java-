// 
// Decompiled by Procyon v0.5.30
// 

package com.mopub.nativeads;

import java.util.Iterator;
import com.mopub.common.util.MoPubLog;
import java.util.List;
import android.graphics.Bitmap;
import java.util.ArrayList;
import java.util.Map;

class ImageService$ImageDiskTaskManagerListener implements ImageTaskManager$ImageTaskManagerListener
{
    private final Map mBitmaps;
    private final ImageService$ImageServiceListener mImageServiceListener;
    
    ImageService$ImageDiskTaskManagerListener(final ImageService$ImageServiceListener mImageServiceListener, final Map mBitmaps) {
        this.mImageServiceListener = mImageServiceListener;
        this.mBitmaps = mBitmaps;
    }
    
    @Override
    public void onFail() {
        this.mImageServiceListener.onFail();
    }
    
    @Override
    public void onSuccess(final Map map) {
        final ArrayList<String> list = new ArrayList<String>();
        for (final Map.Entry<String, V> entry : map.entrySet()) {
            if (entry.getValue() == null) {
                list.add(entry.getKey());
            }
            else {
                ImageService.putBitmapInCache(entry.getKey(), (Bitmap)entry.getValue());
                this.mBitmaps.put(entry.getKey(), entry.getValue());
            }
        }
        if (list.isEmpty()) {
            this.mImageServiceListener.onSuccess(this.mBitmaps);
            return;
        }
        try {
            new ImageDownloadTaskManager(list, new ImageService$ImageNetworkTaskManagerListener(this.mImageServiceListener, this.mBitmaps)).execute();
        }
        catch (IllegalArgumentException ex) {
            MoPubLog.d("Unable to initialize ImageDownloadTaskManager", ex);
            this.mImageServiceListener.onFail();
        }
    }
}
