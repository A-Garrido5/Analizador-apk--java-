// 
// Decompiled by Procyon v0.5.30
// 

package com.mopub.common.util;

import android.app.Activity;
import android.os.Bundle;
import android.util.Log;
import android.content.Intent;
import android.net.Uri;
import android.content.Context;

public class IntentUtils
{
    private static final String HTTP = "http";
    private static final String HTTPS = "https";
    private static final String MARKET = "market";
    private static final String MARKET_ANDROID_COM = "market.android.com";
    private static final String PLAY_GOOGLE_COM = "play.google.com";
    private static final String TWITTER_APPLICATION_DEEPLINK_URL = "twitter://timeline";
    
    public static boolean canHandleApplicationUrl(final Context context, final String s) {
        return canHandleApplicationUrl(context, s, true);
    }
    
    public static boolean canHandleApplicationUrl(final Context context, final String s, final boolean b) {
        if (!deviceCanHandleIntent(context, new Intent("android.intent.action.VIEW", Uri.parse(s)))) {
            if (b) {
                Log.w("MoPub", "Could not handle application specific action: " + s + ". You may be running in the emulator or another device which does not have the required application.");
            }
            return false;
        }
        return true;
    }
    
    public static boolean canHandleTwitterUrl(final Context context) {
        return canHandleApplicationUrl(context, "twitter://timeline", false);
    }
    
    public static boolean deviceCanHandleIntent(final Context context, final Intent intent) {
        try {
            return !context.getPackageManager().queryIntentActivities(intent, 0).isEmpty();
        }
        catch (NullPointerException ex) {
            return false;
        }
    }
    
    public static Intent getStartActivityIntent(final Context context, final Class clazz, final Bundle bundle) {
        final Intent intent = new Intent(context, clazz);
        if (!(context instanceof Activity)) {
            intent.addFlags(268435456);
        }
        if (bundle != null) {
            intent.putExtras(bundle);
        }
        return intent;
    }
    
    private static boolean isAppStoreUrl(final String s) {
        if (s != null) {
            final Uri parse = Uri.parse(s);
            final String scheme = parse.getScheme();
            final String host = parse.getHost();
            if ("play.google.com".equals(host) || "market.android.com".equals(host)) {
                return true;
            }
            if ("market".equals(scheme)) {
                return true;
            }
        }
        return false;
    }
    
    public static boolean isDeepLink(final String s) {
        return isAppStoreUrl(s) || !isHttpUrl(s);
    }
    
    public static boolean isHttpUrl(final String s) {
        if (s != null) {
            final String scheme = Uri.parse(s).getScheme();
            if ("http".equals(scheme) || "https".equals(scheme)) {
                return true;
            }
        }
        return false;
    }
}
