// 
// Decompiled by Procyon v0.5.30
// 

package com.mopub.common;

import android.content.SharedPreferences;
import com.mopub.common.util.AsyncTasks;
import com.mopub.common.util.Reflection;
import com.mopub.common.util.MoPubLog;
import com.mopub.common.factories.MethodBuilderFactory;
import android.content.Context;
import java.lang.ref.WeakReference;
import android.os.AsyncTask;

class GpsHelper$FetchAdvertisingInfoTask extends AsyncTask
{
    private WeakReference mContextWeakReference;
    private WeakReference mGpsHelperListenerWeakReference;
    
    public GpsHelper$FetchAdvertisingInfoTask(final Context context, final GpsHelper$GpsHelperListener gpsHelper$GpsHelperListener) {
        this.mContextWeakReference = new WeakReference((T)context);
        this.mGpsHelperListenerWeakReference = new WeakReference((T)gpsHelper$GpsHelperListener);
    }
    
    protected Void doInBackground(final Void... array) {
        try {
            final Context context = (Context)this.mContextWeakReference.get();
            if (context == null) {
                return null;
            }
            final Object execute = MethodBuilderFactory.create(null, "getAdvertisingIdInfo").setStatic(Class.forName(GpsHelper.sAdvertisingIdClientClassName)).addParam(Context.class, context).execute();
            if (execute != null) {
                GpsHelper.updateSharedPreferences(context, execute);
                return null;
            }
        }
        catch (Exception ex) {
            MoPubLog.d("Unable to obtain AdvertisingIdClient.getAdvertisingIdInfo()");
        }
        return null;
    }
    
    protected void onPostExecute(final Void void1) {
        final GpsHelper$GpsHelperListener gpsHelper$GpsHelperListener = (GpsHelper$GpsHelperListener)this.mGpsHelperListenerWeakReference.get();
        if (gpsHelper$GpsHelperListener != null) {
            gpsHelper$GpsHelperListener.onFetchAdInfoCompleted();
        }
    }
}
