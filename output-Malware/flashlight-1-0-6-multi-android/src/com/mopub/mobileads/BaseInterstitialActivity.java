// 
// Decompiled by Procyon v0.5.30
// 

package com.mopub.mobileads;

import android.os.Bundle;
import android.view.ViewGroup;
import com.mopub.mobileads.util.Interstitials;
import com.mopub.common.util.Dips;
import android.view.ViewGroup$LayoutParams;
import android.widget.RelativeLayout$LayoutParams;
import android.view.View;
import android.graphics.drawable.Drawable;
import com.mopub.common.util.Drawables;
import android.graphics.drawable.StateListDrawable;
import android.content.Context;
import android.widget.ImageButton;
import android.widget.RelativeLayout;
import android.view.View$OnClickListener;
import android.widget.ImageView;
import android.app.Activity;

abstract class BaseInterstitialActivity extends Activity
{
    private static final float CLOSE_BUTTON_PADDING = 8.0f;
    private static final float CLOSE_BUTTON_SIZE_DP = 50.0f;
    private long mBroadcastIdentifier;
    private int mButtonPadding;
    private int mButtonSize;
    private ImageView mCloseButton;
    private View$OnClickListener mCloseOnClickListener;
    private RelativeLayout mLayout;
    
    private void createInterstitialCloseButton() {
        this.mCloseButton = (ImageView)new ImageButton((Context)this);
        final StateListDrawable imageDrawable = new StateListDrawable();
        imageDrawable.addState(new int[] { -16842919 }, Drawables.INTERSTITIAL_CLOSE_BUTTON_NORMAL.decodeImage((Context)this));
        imageDrawable.addState(new int[] { 16842919 }, Drawables.INTERSTITIAL_CLOSE_BUTTON_PRESSED.decodeImage((Context)this));
        this.mCloseButton.setImageDrawable((Drawable)imageDrawable);
        this.mCloseButton.setBackgroundDrawable((Drawable)null);
        this.mCloseButton.setOnClickListener((View$OnClickListener)new View$OnClickListener() {
            public void onClick(final View view) {
                BaseInterstitialActivity.this.finish();
            }
        });
        final RelativeLayout$LayoutParams relativeLayout$LayoutParams = new RelativeLayout$LayoutParams(this.mButtonSize, this.mButtonSize);
        relativeLayout$LayoutParams.addRule(11);
        relativeLayout$LayoutParams.setMargins(this.mButtonPadding, 0, this.mButtonPadding, 0);
        this.mLayout.addView((View)this.mCloseButton, (ViewGroup$LayoutParams)relativeLayout$LayoutParams);
    }
    
    void addCloseEventRegion() {
        final int dipsToIntPixels = Dips.dipsToIntPixels(50.0f, (Context)this);
        final RelativeLayout$LayoutParams relativeLayout$LayoutParams = new RelativeLayout$LayoutParams(dipsToIntPixels, dipsToIntPixels);
        relativeLayout$LayoutParams.addRule(11);
        relativeLayout$LayoutParams.addRule(10);
        Interstitials.addCloseEventRegion((ViewGroup)this.mLayout, (ViewGroup$LayoutParams)relativeLayout$LayoutParams, this.mCloseOnClickListener);
    }
    
    protected AdConfiguration getAdConfiguration() {
        try {
            return (AdConfiguration)this.getIntent().getSerializableExtra("Ad-Configuration");
        }
        catch (ClassCastException ex) {
            return null;
        }
    }
    
    public abstract View getAdView();
    
    long getBroadcastIdentifier() {
        return this.mBroadcastIdentifier;
    }
    
    protected void hideInterstitialCloseButton() {
        this.mCloseButton.setVisibility(4);
    }
    
    protected void onCreate(final Bundle bundle) {
        super.onCreate(bundle);
        this.requestWindowFeature(1);
        this.getWindow().addFlags(1024);
        this.mButtonSize = Dips.asIntPixels(50.0f, (Context)this);
        this.mButtonPadding = Dips.asIntPixels(8.0f, (Context)this);
        this.mCloseOnClickListener = (View$OnClickListener)new View$OnClickListener() {
            public void onClick(final View view) {
                BaseInterstitialActivity.this.finish();
            }
        };
        this.mLayout = new RelativeLayout((Context)this);
        final RelativeLayout$LayoutParams relativeLayout$LayoutParams = new RelativeLayout$LayoutParams(-1, -2);
        relativeLayout$LayoutParams.addRule(13);
        this.mLayout.addView(this.getAdView(), (ViewGroup$LayoutParams)relativeLayout$LayoutParams);
        this.setContentView((View)this.mLayout);
        final AdConfiguration adConfiguration = this.getAdConfiguration();
        if (adConfiguration != null) {
            this.mBroadcastIdentifier = adConfiguration.getBroadcastIdentifier();
        }
        this.createInterstitialCloseButton();
    }
    
    protected void onDestroy() {
        this.mLayout.removeAllViews();
        super.onDestroy();
    }
    
    protected void showInterstitialCloseButton() {
        this.mCloseButton.setVisibility(0);
    }
}
