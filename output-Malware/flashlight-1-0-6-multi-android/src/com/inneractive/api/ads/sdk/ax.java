// 
// Decompiled by Procyon v0.5.30
// 

package com.inneractive.api.ads.sdk;

import java.net.URI;
import android.graphics.Bitmap;
import android.webkit.WebView;
import android.net.Uri;
import android.content.Intent;
import android.content.Context;
import android.webkit.WebViewClient;

final class ax extends WebViewClient
{
    private final Context a;
    private IAbaseWebView b;
    
    ax(final IAbaseWebView b) {
        this.b = b;
        this.a = b.getContext();
    }
    
    private boolean a(final Context context, final Intent intent, final String s) {
        boolean b;
        if (!this.b.wasClicked()) {
            b = false;
        }
        else {
            b = b(context, intent, s);
            if (b) {
                this.b.getListener().onClicked();
                this.b.onResetClick();
                return b;
            }
        }
        return b;
    }
    
    private boolean a(final String s) {
        if (s.startsWith("inneractivenativebrowser://")) {
            final Uri parse = Uri.parse(s);
            try {
                final String queryParameter = parse.getQueryParameter("url");
                if ("navigate".equals(parse.getHost()) && queryParameter != null) {
                    final Intent intent = new Intent("android.intent.action.VIEW", Uri.parse(queryParameter));
                    intent.setFlags(268435456);
                    this.a(this.a, intent, "Could not handle intent with URI: " + s + ". Is this intent supported on your phone?");
                    this.b.getListener().onAdWillOpenExternalApp();
                    return true;
                }
            }
            catch (UnsupportedOperationException ex) {
                InneractiveAdView$Log.i("Inneractive_info", "Failed to handle url: " + s);
                return false;
            }
        }
        return false;
    }
    
    private static boolean b(final Context context, final Intent intent, String s) {
        try {
            context.startActivity(intent);
            return true;
        }
        catch (Exception ex) {
            if (s == null) {
                s = "Failed to start the intent";
            }
            InneractiveAdView$Log.d("Inneractive_debug", s);
            return false;
        }
    }
    
    public final void onLoadResource(final WebView webView, final String s) {
        InneractiveAdView$Log.v("Inneractive_verbose", "Resources to load: " + s);
    }
    
    public final void onPageFinished(final WebView webView, final String s) {
        InneractiveAdView$Log.v("Inneractive_verbose", "onPageFinished - url: " + s);
        this.b.onAdReadyDOM();
    }
    
    public final void onPageStarted(final WebView webView, final String s, final Bitmap bitmap) {
        InneractiveAdView$Log.v("Inneractive_verbose", "onPageStarted - url: " + s);
    }
    
    public final void onReceivedError(final WebView webView, final int n, final String s, final String s2) {
        InneractiveAdView$Log.v("Inneractive_verbose", "Error: " + s);
        super.onReceivedError(webView, n, s, s2);
    }
    
    public final boolean shouldOverrideUrlLoading(final WebView webView, String s) {
        int n = 0;
        int n2;
        if (s.endsWith("inneractive-skip") || s.startsWith("iaadfinishedloading") || s.contains("mraid")) {
            n2 = 1;
        }
        else {
            n2 = 0;
        }
        int n3;
        if (n2 == 0) {
            n3 = 0;
        }
        else {
            final Uri parse = Uri.parse(s);
            final String string = parse.toString();
            if ("mraid".equals(parse.getScheme())) {
                this.b.tryCommand(URI.create(s));
            }
            else if (string.endsWith("inneractive-skip")) {
                InneractiveAdView$Log.d("Inneractive_debug", "Should close interstitial");
                this.b.getListener().onDismissed();
            }
            else if (string.startsWith("iaadfinishedloading")) {
                InneractiveAdView$Log.v("Inneractive_verbose", "onload = shouldOverride iaadfinishedloading");
                this.b.onAdReadyWindowOnLoad();
            }
            n3 = 1;
        }
        if (n3 == 0) {
            int n4;
            if (s.startsWith("tel:") || s.startsWith("voicemail:") || s.startsWith("sms:") || s.startsWith("mailto:") || s.startsWith("geo:") || s.startsWith("google.streetview:")) {
                n4 = 1;
            }
            else {
                n4 = 0;
            }
            boolean b;
            if (n4 == 0) {
                b = false;
            }
            else {
                final Intent intent = new Intent("android.intent.action.VIEW", Uri.parse(s));
                intent.addFlags(268435456);
                this.a(this.a, intent, "Could not handle intent with URI: " + s + ". Is this intent supported on your phone?");
                this.b.getListener().onAdWillOpenExternalApp();
                b = true;
            }
            if (!b && !this.a(s)) {
                InneractiveAdView$Log.d("Inneractive_debug", "Ad clicked! Here is the click URL: " + s);
                int n5;
                if (s.startsWith("http://") || s.startsWith("https://")) {
                    n5 = 1;
                }
                else {
                    n5 = 0;
                }
                if (n5 == 0) {
                    if (!d$a.a(this.a, new Intent("android.intent.action.VIEW", Uri.parse(s)))) {
                        InneractiveAdView$Log.w("Inneractive_warning", "Failed to handle application specific action: " + s + ". Check Whether you're running in the emulator or another device which does not have the required application.");
                    }
                    else {
                        n = 1;
                    }
                    if (n != 0) {
                        final Intent intent2 = new Intent("android.intent.action.VIEW", Uri.parse(s));
                        intent2.addFlags(268435456);
                        if (this.a(this.a, intent2, "Unable to open intent.")) {
                            return true;
                        }
                    }
                }
                InneractiveAdView$Log.v("Inneractive_verbose", "opening Internal Browser For Url: " + s);
                if (s == null || "".equals(s)) {
                    s = "about:blank";
                }
                InneractiveAdView$Log.d("Inneractive_debug", "Here is the final URI to show in browser: " + s);
                final Intent intent3 = new Intent(this.a, (Class)InneractiveInternalBrowserActivity.class);
                intent3.putExtra("extra_url", s);
                intent3.addFlags(268435456);
                if (!this.a(this.a, intent3, "Could not handle intent action. . Perhaps you forgot to declare com.inneractive.ads.api.sdk.InneractiveInternalBrowserActivity in your Android manifest file.")) {
                    final Intent intent4 = new Intent("android.intent.action.VIEW", Uri.parse("about:blank"));
                    intent4.setFlags(268435456);
                    this.a(this.a, intent4, null);
                    return true;
                }
            }
        }
        return true;
    }
}
