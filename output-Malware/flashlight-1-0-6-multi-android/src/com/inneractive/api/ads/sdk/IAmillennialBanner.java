// 
// Decompiled by Procyon v0.5.30
// 

package com.inneractive.api.ads.sdk;

import android.view.View;
import java.lang.reflect.Method;
import java.lang.reflect.Field;
import android.location.Location;
import java.lang.reflect.Proxy;
import android.content.Context;
import java.lang.reflect.InvocationHandler;

class IAmillennialBanner extends b implements InvocationHandler
{
    private static String e;
    private Object a;
    private Class b;
    private Object c;
    private b$a d;
    private IAadConfig f;
    private boolean g;
    
    IAmillennialBanner() {
        this.g = false;
    }
    
    protected final void a() {
        InneractiveAdView$Log.d("Inneractive_debug", "** Millennial banner ad shown **");
    }
    
    protected final void a(final Context context, final b$a d, final IAresponseData aresponseData) {
        this.d = d;
        this.f = IAadConfig.a(aresponseData);
        Label_0747: {
            if (this.f == null) {
                break Label_0747;
            }
            if (this.f.k() != null && this.f.k().get("MM") != null) {
                IAmillennialBanner.e = this.f.k().get("MM");
            }
            Label_0714: {
                if (this.f.f != InneractiveAdView$InternalAdType.a) {
                    break Label_0714;
                }
                Label_0666: {
                    if (!d$a.c(context, 728)) {
                        break Label_0666;
                    }
                    InneractiveAdView$Log.i("Inneractive_info", "Asking Millennial Media for LEADERBOARD");
                    int n = 728;
                    int n2 = 90;
                    Location a;
                    Class<?> forName;
                    Object instance;
                    Field field;
                    Block_14_Outer:Block_13_Outer:
                    while (true) {
                        try {
                            new IAreflectionHandler$a(null, "initialize").a(Class.forName("com.millennialmedia.android.MMSDK")).a(Context.class, context).a();
                            new IAreflectionHandler$a(null, "setBroadcastEvents").a(Class.forName("com.millennialmedia.android.MMSDK")).a(Boolean.TYPE, true).a();
                            new IAreflectionHandler$a(null, "setLogLevel").a(Class.forName("com.millennialmedia.android.MMLog")).a(Integer.TYPE, 2).a();
                            this.a = Class.forName("com.millennialmedia.android.MMAdView").getConstructor(Context.class).newInstance(context);
                            new IAreflectionHandler$a(this.a, "setApid").a(String.class, IAmillennialBanner.e).a();
                            new IAreflectionHandler$a(this.a, "setWidth").a(Integer.TYPE, n).a();
                            new IAreflectionHandler$a(this.a, "setHeight").a(Integer.TYPE, n2).a();
                            this.b = Class.forName("com.millennialmedia.android.RequestListener");
                            this.c = Proxy.newProxyInstance(this.b.getClassLoader(), new Class[] { this.b }, this);
                            new IAreflectionHandler$a(this.a, "setListener").a(this.b, this.c).a();
                            a = d$a.a(d$a.e(context), IAadConfig.E());
                            if (a != null) {
                                new IAreflectionHandler$a(null, "setUserLocation").a(Location.class, a).a(Class.forName("com.millennialmedia.android.MMRequest")).a();
                            }
                            forName = Class.forName("com.millennialmedia.android.MMRequest");
                            instance = Class.forName("com.millennialmedia.android.MMRequest").newInstance();
                            if (this.f.a != -1) {
                                new IAreflectionHandler$a(instance, "setAge").a(String.class, Integer.toString(this.f.a)).a();
                            }
                            if (this.f.b != null) {
                                if ("m".equals(this.f.b)) {
                                    field = forName.getDeclaredField("GENDER_MALE");
                                }
                                else {
                                    field = forName.getDeclaredField("GENDER_FEMALE");
                                }
                                new IAreflectionHandler$a(instance, "setGender").a(String.class, field.get(null)).a();
                            }
                            if (this.f.d != null) {
                                new IAreflectionHandler$a(instance, "setZip").a(String.class, this.f.d).a();
                            }
                            if (this.f.c != null) {
                                new IAreflectionHandler$a(instance, "setKeywords").a(String.class, this.f.c).a();
                            }
                            new IAreflectionHandler$a(this.a, "setMMRequest").a(forName, instance).a();
                            new IAreflectionHandler$a(this.a, "getAd").a();
                            return;
                            // iftrue(Label_0816:, this.f.f != InneractiveAdView$InternalAdType.b)
                            while (true) {
                                while (true) {
                                    InneractiveAdView$Log.i("Inneractive_info", "Asking Millennial Media for RECTANGLE");
                                    n = 300;
                                    n2 = 250;
                                    continue Block_14_Outer;
                                    this.d.a(InneractiveAdView$InneractiveErrorCode.SDK_INTERNAL_ERROR);
                                    return;
                                    Label_0695: {
                                        InneractiveAdView$Log.i("Inneractive_info", "Asking Millennial Media for BANNER");
                                    }
                                    n2 = 50;
                                    n = 320;
                                    continue Block_14_Outer;
                                    InneractiveAdView$Log.i("Inneractive_info", "Asking Millennial Media for MEDIUM BANNER");
                                    n = 480;
                                    n2 = 60;
                                    continue Block_14_Outer;
                                    continue Block_13_Outer;
                                }
                                continue;
                            }
                        }
                        // iftrue(Label_0695:, !d$a.c(context, 480))
                        catch (Exception ex) {
                            InneractiveAdView$Log.v("Inneractive_debug", "Handled Exception:");
                            InneractiveAdView$Log.v("Inneractive_verbose", d$a.a(ex));
                            InneractiveAdView$Log.d("Inneractive_debug", "Could not request an ad from Millennial Media using reflection!");
                            this.d.a(InneractiveAdView$InneractiveErrorCode.SDK_INTERNAL_ERROR);
                            return;
                        }
                        Label_0816: {
                            n2 = 50;
                        }
                        n = 320;
                    }
                }
            }
        }
    }
    
    protected final void b() {
        try {
            this.b = Class.forName("com.millennialmedia.android.RequestListener");
            new IAreflectionHandler$a(this.a, "setListener").a(this.b, null).a();
        }
        catch (Exception ex) {
            InneractiveAdView$Log.v("Inneractive_verbose", "Handled Exception:");
            InneractiveAdView$Log.v("Inneractive_verbose", d$a.a(ex));
            InneractiveAdView$Log.d("Inneractive_debug", "Could not invalidate Millennial Media ad using reflection!");
            this.d.a(InneractiveAdView$InneractiveErrorCode.SDK_INTERNAL_ERROR);
        }
    }
    
    @Override
    public Object invoke(final Object o, final Method method, final Object[] array) {
        if (method.getName().equals("MMAdOverlayClosed")) {
            InneractiveAdView$Log.d("Inneractive_debug", "** Millennial banner ad overlay closed **");
        }
        else if (method.getName().equals("MMAdOverlayLaunched")) {
            InneractiveAdView$Log.d("Inneractive_debug", "** Millennial banner ad overlay Launched **");
            this.d.c();
        }
        else if (method.getName().equals("MMAdRequestIsCaching")) {
            InneractiveAdView$Log.d("Inneractive_debug", "** Millennial banner ad is caching **");
        }
        else if (method.getName().equals("onSingleTap")) {
            if (!this.g) {
                this.g = true;
                InneractiveAdView$Log.d("Inneractive_debug", "** Millennial banner ad clicked **");
                if (this.f != null) {
                    this.f.j("MM");
                }
                this.d.b();
            }
        }
        else if (method.getName().equals("requestCompleted")) {
            InneractiveAdView$Log.d("Inneractive_debug", "** Millennial banner ad loaded successfully **");
            if (this.f != null) {
                this.f.i("MM");
            }
            this.d.a((View)array[0]);
        }
        else if (method.getName().equals("requestFailed")) {
            InneractiveAdView$Log.d("Inneractive_debug", "** Millennial banner ad failed to load **");
            if (this.f != null) {
                this.f.i("IA");
                this.f.g("MM");
            }
            this.d.a(InneractiveAdView$InneractiveErrorCode.NO_FILL);
        }
        return null;
    }
}
