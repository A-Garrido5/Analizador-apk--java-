// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.androidsdk.bootstrapper;

import com.inmobi.commons.uid.UIDUtil;
import com.inmobi.commons.InMobi;
import com.inmobi.commons.internal.InternalSDKUtil;
import com.inmobi.commons.internal.Log;
import com.inmobi.commons.cache.CacheController;
import java.util.HashMap;
import com.inmobi.commons.cache.CacheController$Validator;
import java.util.Map;
import android.content.Context;

public class PkInitilaizer
{
    public static final String PRODUCT_PK = "pk";
    private static Context a;
    private static Map b;
    private static PkParams c;
    private static CacheController$Validator d;
    
    static {
        PkInitilaizer.a = null;
        PkInitilaizer.b = new HashMap();
        PkInitilaizer.c = new PkParams();
        PkInitilaizer.d = new b();
    }
    
    private static void a(final Context context) {
        b(context);
        try {
            CacheController.getConfig("pk", context, PkInitilaizer.b, PkInitilaizer.d);
        }
        catch (Exception ex) {}
    }
    
    static boolean a(final Map fromMap) {
        Log.internal("SK", "Saving config to map");
        PkInitilaizer.b = getUidMap(PkInitilaizer.a);
        try {
            final PkParams c = new PkParams();
            c.setFromMap(fromMap);
            PkInitilaizer.c = c;
            return true;
        }
        catch (Exception ex) {
            Log.internal("[InMobi]-[RE]-4.4.3", "Config couldn't be parsed", ex);
            return false;
        }
    }
    
    private static void b(final Context context) {
        Label_0071: {
            if (context == null || PkInitilaizer.a != null) {
                break Label_0071;
            }
            if (PkInitilaizer.a == null) {
                PkInitilaizer.a = context.getApplicationContext();
                PkInitilaizer.b = getUidMap(context);
                try {
                    if (CacheController.getConfig("pk", context, PkInitilaizer.b, PkInitilaizer.d).getData() != null) {
                        a(CacheController.getConfig("pk", context, PkInitilaizer.b, PkInitilaizer.d).getData());
                    }
                    return;
                }
                catch (Exception ex) {
                    return;
                }
                break Label_0071;
            }
            return;
        }
        if (PkInitilaizer.a == null && context == null) {
            throw new NullPointerException();
        }
    }
    
    public static PkParams getConfigParams() {
        if (InternalSDKUtil.getContext() != null && InMobi.getAppId() != null) {
            a(InternalSDKUtil.getContext());
        }
        return PkInitilaizer.c;
    }
    
    public static Map getUidMap(final Context context) {
        return UIDUtil.getMap(context, PkInitilaizer.c.getUID());
    }
    
    public static void initialize() {
        getConfigParams();
    }
}
