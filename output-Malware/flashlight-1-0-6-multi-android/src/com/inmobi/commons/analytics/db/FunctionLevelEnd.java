// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.commons.analytics.db;

import com.inmobi.commons.analytics.util.AnalyticsUtils;
import com.inmobi.commons.analytics.util.SessionInfo;
import java.util.Map;
import android.content.Context;
import com.inmobi.commons.analytics.events.AnalyticsEventsWrapper$IMSectionStatus;

public class FunctionLevelEnd extends FunctionLevelBegin
{
    private AnalyticsEventsWrapper$IMSectionStatus a;
    private Context b;
    
    public FunctionLevelEnd(final Context b, final int n, final String s, final AnalyticsEventsWrapper$IMSectionStatus a, final Map map) {
        super(b, n, s, map);
        this.b = b;
        this.a = a;
    }
    
    private AnalyticsEvent a() {
        if (SessionInfo.getSessionId(this.b) != null) {
            final AnalyticsEvent analyticsEvent = new AnalyticsEvent("le");
            analyticsEvent.setEventLevelId(Integer.toString(this.getLevelId()));
            analyticsEvent.setEventLevelName(this.getLevelName());
            if (this.getLbMap() != null) {
                analyticsEvent.setEventAttributeMap(AnalyticsUtils.convertToJSON(this.getLbMap()));
            }
            analyticsEvent.setEventLevelStatus("1");
            analyticsEvent.setEventSessionId(SessionInfo.getSessionId(this.b));
            analyticsEvent.setEventSessionTimeStamp(SessionInfo.getSessionTime(this.b));
            analyticsEvent.setEventTimeStamp(System.currentTimeMillis() / 1000L);
            this.insertInDatabase(analyticsEvent);
            return analyticsEvent;
        }
        this.printWarning("Please call startSession before calling levelEnd");
        return null;
    }
    
    protected AnalyticsEventsWrapper$IMSectionStatus getLevelStatus() {
        return this.a;
    }
    
    @Override
    public AnalyticsEvent processFunction() {
        return this.a();
    }
}
