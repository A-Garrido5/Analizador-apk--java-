// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.commons.analytics.db;

import java.util.ArrayList;
import com.inmobi.commons.internal.Log;
import org.json.JSONObject;
import android.os.Bundle;
import android.content.Intent;
import android.content.Context;

public class FunctionTagTransaction extends AnalyticsFunctions
{
    private Context a;
    private Intent b;
    private Bundle c;
    
    public FunctionTagTransaction(final Context a, final Intent b, final Bundle c) {
        this.a = a;
        this.b = b;
        this.c = c;
    }
    
    private AnalyticsEvent a() {
        // 
        // This method could not be decompiled.
        // 
        // Original Bytecode:
        // 
        //     0: aload_0        
        //     1: getfield        com/inmobi/commons/analytics/db/FunctionTagTransaction.a:Landroid/content/Context;
        //     4: invokestatic    com/inmobi/commons/analytics/util/SessionInfo.getSessionId:(Landroid/content/Context;)Ljava/lang/String;
        //     7: ifnull          306
        //    10: aload_0        
        //    11: getfield        com/inmobi/commons/analytics/db/FunctionTagTransaction.b:Landroid/content/Intent;
        //    14: ifnull          306
        //    17: new             Lcom/inmobi/commons/analytics/db/AnalyticsEvent;
        //    20: dup            
        //    21: ldc             "pi"
        //    23: invokespecial   com/inmobi/commons/analytics/db/AnalyticsEvent.<init>:(Ljava/lang/String;)V
        //    26: astore_2       
        //    27: aload_0        
        //    28: getfield        com/inmobi/commons/analytics/db/FunctionTagTransaction.b:Landroid/content/Intent;
        //    31: ldc             "RESPONSE_CODE"
        //    33: iconst_0       
        //    34: invokevirtual   android/content/Intent.getIntExtra:(Ljava/lang/String;I)I
        //    37: istore_3       
        //    38: aload_0        
        //    39: getfield        com/inmobi/commons/analytics/db/FunctionTagTransaction.b:Landroid/content/Intent;
        //    42: ldc             "INAPP_PURCHASE_DATA"
        //    44: invokevirtual   android/content/Intent.getStringExtra:(Ljava/lang/String;)Ljava/lang/String;
        //    47: astore          4
        //    49: iload_3        
        //    50: ifne            194
        //    53: new             Lorg/json/JSONObject;
        //    56: dup            
        //    57: aload           4
        //    59: invokespecial   org/json/JSONObject.<init>:(Ljava/lang/String;)V
        //    62: astore          5
        //    64: aload_2        
        //    65: aload           5
        //    67: ldc             "orderId"
        //    69: invokevirtual   org/json/JSONObject.getString:(Ljava/lang/String;)Ljava/lang/String;
        //    72: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent.setTransactionId:(Ljava/lang/String;)V
        //    75: aload_2        
        //    76: aload           5
        //    78: ldc             "productId"
        //    80: invokevirtual   org/json/JSONObject.getString:(Ljava/lang/String;)Ljava/lang/String;
        //    83: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent.setTransactionProductId:(Ljava/lang/String;)V
        //    86: aload           5
        //    88: ldc             "purchaseTime"
        //    90: invokevirtual   org/json/JSONObject.getLong:(Ljava/lang/String;)J
        //    93: lstore          7
        //    95: lconst_0       
        //    96: lload           7
        //    98: lcmp           
        //    99: ifne            107
        //   102: invokestatic    java/lang/System.currentTimeMillis:()J
        //   105: lstore          7
        //   107: aload_2        
        //   108: lload           7
        //   110: ldc2_w          1000
        //   113: ldiv           
        //   114: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent.setEventTimeStamp:(J)V
        //   117: aload           5
        //   119: ldc             "purchaseState"
        //   121: invokevirtual   org/json/JSONObject.getInt:(Ljava/lang/String;)I
        //   124: istore          9
        //   126: getstatic       com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_GOOGLE_API_VALUES.PURCHASED:Lcom/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_GOOGLE_API_VALUES;
        //   129: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_GOOGLE_API_VALUES.getValue:()I
        //   132: iload           9
        //   134: if_icmpne       196
        //   137: getstatic       com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE.PURCHASED:Lcom/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE;
        //   140: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE.getValue:()I
        //   143: istore          11
        //   145: aload_2        
        //   146: iload           11
        //   148: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent.setTransactionStatus:(I)V
        //   151: aload_0        
        //   152: aload_2        
        //   153: invokespecial   com/inmobi/commons/analytics/db/FunctionTagTransaction.a:(Lcom/inmobi/commons/analytics/db/AnalyticsEvent;)Lcom/inmobi/commons/analytics/db/AnalyticsEvent;
        //   156: astore          15
        //   158: aload           15
        //   160: astore          13
        //   162: aload           13
        //   164: aload_0        
        //   165: getfield        com/inmobi/commons/analytics/db/FunctionTagTransaction.a:Landroid/content/Context;
        //   168: invokestatic    com/inmobi/commons/analytics/util/SessionInfo.getSessionId:(Landroid/content/Context;)Ljava/lang/String;
        //   171: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent.setEventSessionId:(Ljava/lang/String;)V
        //   174: aload           13
        //   176: aload_0        
        //   177: getfield        com/inmobi/commons/analytics/db/FunctionTagTransaction.a:Landroid/content/Context;
        //   180: invokestatic    com/inmobi/commons/analytics/util/SessionInfo.getSessionTime:(Landroid/content/Context;)J
        //   183: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent.setEventSessionTimeStamp:(J)V
        //   186: aload           13
        //   188: astore_2       
        //   189: aload_0        
        //   190: aload_2        
        //   191: invokevirtual   com/inmobi/commons/analytics/db/FunctionTagTransaction.insertInDatabase:(Lcom/inmobi/commons/analytics/db/AnalyticsEvent;)V
        //   194: aload_2        
        //   195: areturn        
        //   196: getstatic       com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_GOOGLE_API_VALUES.FAILED:Lcom/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_GOOGLE_API_VALUES;
        //   199: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_GOOGLE_API_VALUES.getValue:()I
        //   202: iload           9
        //   204: if_icmpne       218
        //   207: getstatic       com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE.FAILED:Lcom/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE;
        //   210: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE.getValue:()I
        //   213: istore          11
        //   215: goto            145
        //   218: getstatic       com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_GOOGLE_API_VALUES.REFUNDED:Lcom/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_GOOGLE_API_VALUES;
        //   221: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_GOOGLE_API_VALUES.getValue:()I
        //   224: iload           9
        //   226: if_icmpne       240
        //   229: getstatic       com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE.REFUNDED:Lcom/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE;
        //   232: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE.getValue:()I
        //   235: istore          11
        //   237: goto            145
        //   240: getstatic       com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE.RESTORED:Lcom/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE;
        //   243: invokevirtual   com/inmobi/commons/analytics/db/AnalyticsEvent$TRANSACTION_STATUS_SERVER_CODE.getValue:()I
        //   246: istore          10
        //   248: iload           10
        //   250: istore          11
        //   252: goto            145
        //   255: astore          6
        //   257: ldc             "[InMobi]-[Analytics]-4.4.3"
        //   259: ldc             "Error sending transaction info. Transaction details invalid"
        //   261: invokestatic    com/inmobi/commons/internal/Log.debug:(Ljava/lang/String;Ljava/lang/String;)V
        //   264: ldc             "[InMobi]-[Analytics]-4.4.3"
        //   266: ldc             "Failed transaction"
        //   268: aload           6
        //   270: invokestatic    com/inmobi/commons/internal/Log.internal:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
        //   273: aconst_null    
        //   274: areturn        
        //   275: ldc             "[InMobi]-[Analytics]-4.4.3"
        //   277: ldc             "Error sending transaction info. Bundle details invalid"
        //   279: invokestatic    com/inmobi/commons/internal/Log.debug:(Ljava/lang/String;Ljava/lang/String;)V
        //   282: ldc             "[InMobi]-[Analytics]-4.4.3"
        //   284: ldc             "Failed to send extra params transaction"
        //   286: aload           14
        //   288: invokestatic    com/inmobi/commons/internal/Log.internal:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
        //   291: aload           13
        //   293: astore_2       
        //   294: goto            189
        //   297: astore_1       
        //   298: ldc             "[InMobi]-[Analytics]-4.4.3"
        //   300: ldc             "Exception in tag transaction"
        //   302: aload_1        
        //   303: invokestatic    com/inmobi/commons/internal/Log.internal:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
        //   306: aconst_null    
        //   307: areturn        
        //   308: astore          14
        //   310: goto            275
        //   313: astore          12
        //   315: aload_2        
        //   316: astore          13
        //   318: aload           12
        //   320: astore          14
        //   322: goto            275
        //    Exceptions:
        //  Try           Handler
        //  Start  End    Start  End    Type                    
        //  -----  -----  -----  -----  ------------------------
        //  0      49     297    306    Ljava/lang/Exception;
        //  53     95     255    275    Lorg/json/JSONException;
        //  53     95     297    306    Ljava/lang/Exception;
        //  102    107    255    275    Lorg/json/JSONException;
        //  102    107    297    306    Ljava/lang/Exception;
        //  107    145    255    275    Lorg/json/JSONException;
        //  107    145    297    306    Ljava/lang/Exception;
        //  145    151    255    275    Lorg/json/JSONException;
        //  145    151    297    306    Ljava/lang/Exception;
        //  151    158    313    325    Ljava/lang/Exception;
        //  162    186    308    313    Ljava/lang/Exception;
        //  189    194    297    306    Ljava/lang/Exception;
        //  196    215    255    275    Lorg/json/JSONException;
        //  196    215    297    306    Ljava/lang/Exception;
        //  218    237    255    275    Lorg/json/JSONException;
        //  218    237    297    306    Ljava/lang/Exception;
        //  240    248    255    275    Lorg/json/JSONException;
        //  240    248    297    306    Ljava/lang/Exception;
        //  257    273    297    306    Ljava/lang/Exception;
        //  275    291    297    306    Ljava/lang/Exception;
        // 
        // The error that occurred was:
        // 
        // java.lang.IllegalStateException: Expression is linked from several locations: Label_0189:
        //     at com.strobel.decompiler.ast.Error.expressionLinkedFromMultipleLocations(Error.java:27)
        //     at com.strobel.decompiler.ast.AstOptimizer.mergeDisparateObjectInitializations(AstOptimizer.java:2592)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:235)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:42)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:214)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:99)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createMethodBody(AstBuilder.java:757)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createMethod(AstBuilder.java:655)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addTypeMembers(AstBuilder.java:532)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeCore(AstBuilder.java:499)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeNoCache(AstBuilder.java:141)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createType(AstBuilder.java:130)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addType(AstBuilder.java:105)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.buildAst(JavaLanguage.java:71)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.decompileType(JavaLanguage.java:59)
        //     at com.strobel.decompiler.DecompilerDriver.decompileType(DecompilerDriver.java:317)
        //     at com.strobel.decompiler.DecompilerDriver.decompileJar(DecompilerDriver.java:238)
        //     at com.strobel.decompiler.DecompilerDriver.main(DecompilerDriver.java:123)
        // 
        throw new IllegalStateException("An error occurred while decompiling this method.");
    }
    
    private AnalyticsEvent a(final AnalyticsEvent analyticsEvent) {
        while (true) {
            while (true) {
                int n;
                try {
                    if (this.c.getInt("RESPONSE_CODE") != 0) {
                        break;
                    }
                    final ArrayList stringArrayList = this.c.getStringArrayList("DETAILS_LIST");
                    n = 0;
                    if (n >= stringArrayList.size()) {
                        break;
                    }
                    final JSONObject jsonObject = new JSONObject((String)stringArrayList.get(n));
                    final String string = jsonObject.getString("productId");
                    final long long1 = jsonObject.getLong("price_amount_micros");
                    final String string2 = jsonObject.getString("price_currency_code");
                    final String optString = jsonObject.optString("type");
                    final String optString2 = jsonObject.optString("title");
                    final String optString3 = jsonObject.optString("description");
                    if (string.equals(analyticsEvent.getTransactionProductId())) {
                        analyticsEvent.setTransactionItemCount(1);
                        analyticsEvent.setTransactionItemDescription(optString3);
                        analyticsEvent.setTransactionItemName(optString2);
                        if ("inapp".equals(optString)) {
                            analyticsEvent.setTransactionItemType(AnalyticsEvent$TRANSACTION_ITEM_TYPE.INAPP.getValue());
                        }
                        else if ("subs".equals(optString)) {
                            analyticsEvent.setTransactionItemType(AnalyticsEvent$TRANSACTION_ITEM_TYPE.SUBSCRIPTION.getValue());
                        }
                        analyticsEvent.setTransactionItemPrice(long1 / 1000000.0);
                        analyticsEvent.setTransactionCurrencyCode(string2);
                        return analyticsEvent;
                    }
                }
                catch (Exception ex) {
                    Log.internal("[InMobi]-[Analytics]-4.4.3", "Failed to set purchase bundle info", ex);
                    return analyticsEvent;
                }
                ++n;
                continue;
            }
        }
        return analyticsEvent;
    }
    
    @Override
    public AnalyticsEvent processFunction() {
        return this.a();
    }
}
