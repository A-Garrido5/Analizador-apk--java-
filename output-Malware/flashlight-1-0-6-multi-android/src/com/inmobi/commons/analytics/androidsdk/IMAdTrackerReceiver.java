// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.commons.analytics.androidsdk;

import com.inmobi.commons.analytics.iat.impl.net.AdTrackerNetworkInterface;
import com.inmobi.commons.internal.InternalSDKUtil;
import com.inmobi.commons.analytics.iat.impl.AdTrackerUtils;
import java.net.URLEncoder;
import com.inmobi.commons.internal.FileOperations;
import com.inmobi.commons.internal.Log;
import android.content.Intent;
import android.content.Context;
import android.content.BroadcastReceiver;

public class IMAdTrackerReceiver extends BroadcastReceiver
{
    public void onReceive(final Context context, final Intent intent) {
        Label_0095: {
            if (!intent.getAction().equals("com.android.vending.INSTALL_REFERRER")) {
                break Label_0095;
            }
            try {
                Log.debug("[InMobi]-[AdTracker]-4.4.3", "Received INSTALL REFERRER");
                final String string = intent.getExtras().getString("referrer");
                Log.debug("[InMobi]-[AdTracker]-4.4.3", "Referrer String: " + string);
                FileOperations.setPreferences(context.getApplicationContext(), "IMAdTrackerStatusUpload", "rfs", 1);
                AdTrackerUtils.setInternalReferrer(context.getApplicationContext(), URLEncoder.encode(string, "utf-8"));
                return;
            }
            catch (Exception ex) {
                Log.internal("[InMobi]-[AdTracker]-4.4.3", "Error install receiver", ex);
                return;
            }
        }
        if (!intent.getAction().equals("android.net.conn.CONNECTIVITY_CHANGE") || !InternalSDKUtil.checkNetworkAvailibility(context)) {
            return;
        }
        try {
            Log.internal("[InMobi]-[AdTracker]-4.4.3", "Received CONNECTIVITY BROADCAST");
            AdTrackerNetworkInterface.init();
            AdTrackerNetworkInterface.reportToServer(FileOperations.getPreferences(context.getApplicationContext(), "IMAdTrackerStatusUpload", "mk-siteid"));
        }
        catch (Exception ex2) {
            Log.internal("[InMobi]-[AdTracker]-4.4.3", "Connectivity receiver exception", ex2);
        }
    }
}
