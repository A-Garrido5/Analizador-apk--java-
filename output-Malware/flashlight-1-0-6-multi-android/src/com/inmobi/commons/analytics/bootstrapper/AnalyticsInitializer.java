// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.commons.analytics.bootstrapper;

import com.inmobi.commons.uid.UIDUtil;
import com.inmobi.commons.InMobi;
import com.inmobi.commons.internal.InternalSDKUtil;
import com.inmobi.commons.internal.ThinICE;
import com.inmobi.commons.cache.ProductConfig;
import com.inmobi.commons.internal.CommonsException;
import com.inmobi.commons.internal.Log;
import com.inmobi.commons.cache.CacheController;
import java.util.HashMap;
import com.inmobi.commons.cache.CacheController$Validator;
import java.util.Map;
import android.content.Context;

public class AnalyticsInitializer
{
    public static final String PRODUCT_ANALYTICS = "ltvp";
    private static Context a;
    private static Map b;
    private static AnalyticsConfigParams c;
    private static CacheController$Validator d;
    
    static {
        AnalyticsInitializer.a = null;
        AnalyticsInitializer.b = new HashMap();
        AnalyticsInitializer.c = new AnalyticsConfigParams();
        AnalyticsInitializer.d = new a();
    }
    
    private static void a(final Context context) {
        Label_0099: {
            if (context == null || AnalyticsInitializer.a != null) {
                break Label_0099;
            }
            if (AnalyticsInitializer.a == null) {
                AnalyticsInitializer.a = context.getApplicationContext();
                AnalyticsInitializer.b = getUidMap(context);
                try {
                    final ProductConfig config = CacheController.getConfig("ltvp", context, AnalyticsInitializer.b, AnalyticsInitializer.d);
                    if (config.getRawData() != null) {
                        b(config.getData());
                    }
                    return;
                }
                catch (CommonsException ex) {
                    Log.internal("[InMobi]-[Analytics]-4.4.3", "Exception while retreiving configs due to commons Exception with code " + ex.getCode());
                    return;
                }
                catch (Exception ex2) {
                    Log.internal("[InMobi]-[Analytics]-4.4.3", "Exception while retreiving configs.", ex2);
                    return;
                }
                break Label_0099;
            }
            return;
        }
        if (AnalyticsInitializer.a == null && context == null) {
            AnalyticsInitializer.a.getApplicationContext();
        }
    }
    
    private static void b(final Context context) {
        a(context);
        AnalyticsInitializer.b = getUidMap(AnalyticsInitializer.a);
        try {
            CacheController.getConfig("ltvp", context, AnalyticsInitializer.b, AnalyticsInitializer.d);
        }
        catch (Exception ex) {}
    }
    
    private static boolean b(final Map map) {
        final AnalyticsConfigParams c = new AnalyticsConfigParams();
        try {
            c.setFromMap(map.get("common"));
            AnalyticsInitializer.c = c;
            ThinICE.setConfig(c.getThinIceConfig());
            return true;
        }
        catch (Exception ex) {
            Log.internal("[InMobi]-[Analytics]-4.4.3", "Exception while saving configs.", ex);
            return false;
        }
    }
    
    public static AnalyticsConfigParams getConfigParams() {
        if (InternalSDKUtil.getContext() != null && InMobi.getAppId() != null) {
            b(InternalSDKUtil.getContext());
        }
        return AnalyticsInitializer.c;
    }
    
    public static AnalyticsConfigParams getRawConfigParams() {
        return AnalyticsInitializer.c;
    }
    
    public static Map getUidMap(final Context context) {
        return UIDUtil.getMap(AnalyticsInitializer.a, AnalyticsInitializer.c.getUID());
    }
}
