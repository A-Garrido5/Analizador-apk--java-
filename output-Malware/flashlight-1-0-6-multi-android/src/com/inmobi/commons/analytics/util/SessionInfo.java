// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.commons.analytics.util;

import java.util.UUID;
import android.content.SharedPreferences;
import java.util.GregorianCalendar;
import android.content.SharedPreferences$Editor;
import android.content.Context;

public class SessionInfo
{
    private static String a;
    private static long b;
    private static String c;
    private static int d;
    
    public static String getAppId(final Context context) {
        if (SessionInfo.c != null) {
            return SessionInfo.c;
        }
        return SessionInfo.c = context.getSharedPreferences("inmobiAppAnalyticsAppId", 0).getString("APP_ID", (String)null);
    }
    
    public static int getFirstTime() {
        synchronized (SessionInfo.class) {
            return SessionInfo.d;
        }
    }
    
    public static String getSessionId(final Context context) {
        synchronized (SessionInfo.class) {
            String a;
            if (SessionInfo.a != null) {
                a = SessionInfo.a;
            }
            else {
                a = (SessionInfo.a = context.getSharedPreferences("inmobiAppAnalyticsSession", 0).getString("SESSION_ID", (String)null));
            }
            return a;
        }
    }
    
    public static long getSessionTime(final Context context) {
        synchronized (SessionInfo.class) {
            long b;
            if (SessionInfo.b != 0L) {
                b = SessionInfo.b;
            }
            else {
                b = (SessionInfo.b = context.getSharedPreferences("inmobiAppAnalyticsSession", 0).getLong("SESSION_TIME", 0L));
            }
            return b;
        }
    }
    
    public static boolean isUpdatedFromOldSDK(final Context context) {
        synchronized (SessionInfo.class) {
            return context.getSharedPreferences("inmobiAppAnalyticsSession", 0).getBoolean("UPDATED_FROM_OLD_SDK", false);
        }
    }
    
    public static void removeSessionId(final Context context) {
        synchronized (SessionInfo.class) {
            SessionInfo.a = null;
            SessionInfo.b = 0L;
            final SharedPreferences$Editor edit = context.getSharedPreferences("inmobiAppAnalyticsSession", 0).edit();
            edit.putString("SESSION_ID", (String)null);
            edit.putString("SESSION_TIME", (String)null);
            edit.commit();
        }
    }
    
    public static void resetFirstTime() {
        synchronized (SessionInfo.class) {
            SessionInfo.d = 0;
        }
    }
    
    public static void storeAppId(final Context context, final String c) {
        SessionInfo.c = c;
        final SharedPreferences$Editor edit = context.getSharedPreferences("inmobiAppAnalyticsAppId", 0).edit();
        edit.putString("APP_ID", c);
        edit.commit();
    }
    
    public static void storeFirstTime(final Context context) {
        while (true) {
            while (true) {
                final long timeInMillis2;
                int n;
                synchronized (SessionInfo.class) {
                    final SharedPreferences sharedPreferences = context.getSharedPreferences("inmobiAppAnalyticsSession", 0);
                    final SharedPreferences$Editor edit = sharedPreferences.edit();
                    final long long1 = sharedPreferences.getLong("SESSION_TIMEM", -1L);
                    if (long1 == -1L) {
                        final long timeInMillis = new GregorianCalendar().getTimeInMillis();
                        final int d = 15;
                        edit.putLong("SESSION_TIMEM", timeInMillis);
                        edit.commit();
                        SessionInfo.d = d;
                        return;
                    }
                    final GregorianCalendar gregorianCalendar = new GregorianCalendar();
                    gregorianCalendar.setTimeInMillis(long1);
                    gregorianCalendar.setFirstDayOfWeek(2);
                    final GregorianCalendar gregorianCalendar2 = new GregorianCalendar();
                    timeInMillis2 = gregorianCalendar2.getTimeInMillis();
                    gregorianCalendar2.setFirstDayOfWeek(2);
                    final int value = gregorianCalendar.get(6);
                    final int value2 = gregorianCalendar2.get(6);
                    n = 0;
                    if (value != value2) {
                        n = 1;
                    }
                    if (gregorianCalendar.get(3) != gregorianCalendar2.get(3)) {
                        n |= 0x2;
                    }
                    if (gregorianCalendar.get(2) != gregorianCalendar2.get(2)) {
                        n |= 0x4;
                    }
                }
                final int d = n;
                final long timeInMillis = timeInMillis2;
                continue;
            }
        }
    }
    
    public static void storeSessionId(final Context context) {
        synchronized (SessionInfo.class) {
            SessionInfo.a = UUID.randomUUID().toString();
            SessionInfo.b = System.currentTimeMillis() / 1000L;
            final SharedPreferences$Editor edit = context.getSharedPreferences("inmobiAppAnalyticsSession", 0).edit();
            edit.putString("SESSION_ID", SessionInfo.a);
            edit.putLong("SESSION_TIME", SessionInfo.b);
            edit.commit();
        }
    }
    
    public static void updatedFromOldSDK(final Context context) {
        synchronized (SessionInfo.class) {
            final SharedPreferences$Editor edit = context.getSharedPreferences("inmobiAppAnalyticsSession", 0).edit();
            edit.putBoolean("UPDATED_FROM_OLD_SDK", true);
            edit.commit();
        }
    }
}
