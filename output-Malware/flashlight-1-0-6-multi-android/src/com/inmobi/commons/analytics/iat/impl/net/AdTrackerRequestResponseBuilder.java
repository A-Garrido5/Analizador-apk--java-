// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.commons.analytics.iat.impl.net;

import org.apache.http.client.HttpClient;
import org.apache.http.client.methods.HttpUriRequest;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.impl.client.DefaultHttpClient;
import com.inmobi.commons.analytics.iat.impl.AdTrackerConstants$StatusCode;
import com.inmobi.commons.analytics.iat.impl.Goal;
import android.content.pm.PackageManager$NameNotFoundException;
import com.inmobi.commons.internal.Log;
import java.util.List;
import org.apache.http.client.utils.URLEncodedUtils;
import android.os.Build$VERSION;
import com.inmobi.commons.uid.UIDHelper;
import java.util.Map;
import com.inmobi.commons.analytics.iat.impl.config.AdTrackerInitializer;
import java.util.Random;
import com.inmobi.commons.internal.FileOperations;
import com.inmobi.commons.internal.InternalSDKUtil;
import org.apache.http.message.BasicNameValuePair;
import java.util.LinkedList;

public class AdTrackerRequestResponseBuilder
{
    private static String a;
    private static long b;
    
    static {
        AdTrackerRequestResponseBuilder.a = null;
        AdTrackerRequestResponseBuilder.b = 0L;
    }
    
    protected static String formHTTPRequest(final String s, final String s2, final int n, final boolean b, final String s3) {
        final LinkedList<BasicNameValuePair> list = new LinkedList<BasicNameValuePair>();
        final String preferences = FileOperations.getPreferences(InternalSDKUtil.getContext(), "IMAdTrackerStatusUpload", "referrer");
        if (s != null && !s.trim().equals("")) {
            list.add(new BasicNameValuePair("mk-siteid", s));
        }
        final String string = Integer.toString(new Random().nextInt());
        final String uidMap = AdTrackerInitializer.getConfigParams().getUID().getUidMap(1, string, null);
        Label_0641: {
            if (!InternalSDKUtil.isLimitAdTrackingEnabled()) {
                break Label_0641;
            }
            list.add(new BasicNameValuePair("u-id-adt", "1"));
        Label_0225_Outer:
            while (true) {
                list.add(new BasicNameValuePair("u-id-map", uidMap));
                list.add(new BasicNameValuePair("u-id-key", string));
                list.add(new BasicNameValuePair("u-key-ver", UIDHelper.getRSAKeyVersion()));
                if (s2 != null && !s2.trim().equals("")) {
                    list.add(new BasicNameValuePair("goalName", s2));
                }
                Label_0663: {
                    if (!b) {
                        break Label_0663;
                    }
                    list.add(new BasicNameValuePair("lp", "1"));
                Label_0418_Outer:
                    while (true) {
                        list.add(new BasicNameValuePair("src", "and"));
                        if (n > 0) {
                            list.add(new BasicNameValuePair("goalCount", Integer.toString(n)));
                        }
                        final String string2 = "pr-SAND-" + InternalSDKUtil.getInMobiInternalVersion("4.4.3") + "-20140730";
                        list.add(new BasicNameValuePair("mk-version", string2));
                        list.add(new BasicNameValuePair("mk-rel-version", string2));
                        list.add(new BasicNameValuePair("osV", String.valueOf(Build$VERSION.SDK_INT)));
                        String preferences2 = FileOperations.getPreferences(InternalSDKUtil.getContext(), "IMAdTrackerStatusUpload", "rlc");
                        if (preferences2 == null) {
                            preferences2 = "0";
                        }
                        list.add(new BasicNameValuePair("rlc", preferences2));
                        while (true) {
                            try {
                                final String versionName = InternalSDKUtil.getContext().getPackageManager().getPackageInfo(InternalSDKUtil.getContext().getPackageName(), 0).versionName;
                                if (versionName != null && !versionName.trim().equals("")) {
                                    list.add(new BasicNameValuePair("u-appver", versionName));
                                }
                                if (s3 != null && !s3.trim().equals("")) {
                                    list.add(new BasicNameValuePair("iat_ids", s3));
                                }
                                if (preferences != null) {
                                    final int intPreferences = FileOperations.getIntPreferences(InternalSDKUtil.getContext(), "IMAdTrackerStatusUpload", "rfs");
                                    final long n2 = FileOperations.getLongPreferences(InternalSDKUtil.getContext(), "IMAdTrackerStatusUpload", "t2") - FileOperations.getLongPreferences(InternalSDKUtil.getContext(), "IMAdTrackerStatusUpload", "t1");
                                    list.add(new BasicNameValuePair("rfs", Integer.toString(intPreferences)));
                                    list.add(new BasicNameValuePair("rd", Long.toString(n2)));
                                }
                                if (1 == AdTrackerNetworkInterface.isUnstableNetwork()) {
                                    list.add(new BasicNameValuePair("nus", Integer.toString(AdTrackerNetworkInterface.isUnstableNetwork())));
                                }
                                list.add(new BasicNameValuePair("ts", Long.toString(System.currentTimeMillis())));
                                return URLEncodedUtils.format((List)list, "utf-8");
                                list.add(new BasicNameValuePair("lp", "0"));
                                continue Label_0418_Outer;
                                list.add(new BasicNameValuePair("u-id-adt", "0"));
                                continue Label_0225_Outer;
                            }
                            catch (PackageManager$NameNotFoundException ex) {
                                Log.internal("[InMobi]-[AdTracker]-4.4.3", "Cant get appversion", (Throwable)ex);
                                final String versionName = null;
                                continue;
                            }
                            break;
                        }
                        break;
                    }
                }
                break;
            }
        }
    }
    
    public static String getWebViewRequestParam() {
        return AdTrackerRequestResponseBuilder.a;
    }
    
    public static void saveWebviewRequestParam(final String s, final Goal goal) {
        AdTrackerRequestResponseBuilder.a = formHTTPRequest(s, goal.getGoalName(), goal.getGoalCount(), goal.isDuplicateGoal(), null);
    }
    
    public static AdTrackerConstants$StatusCode sendHTTPRequest(final String p0, final Goal p1, final String p2) {
        // 
        // This method could not be decompiled.
        // 
        // Original Bytecode:
        // 
        //     0: getstatic       com/inmobi/commons/analytics/iat/impl/AdTrackerConstants$StatusCode.APP_ANALYTICS_UPLOAD_FAILURE:Lcom/inmobi/commons/analytics/iat/impl/AdTrackerConstants$StatusCode;
        //     3: astore_3       
        //     4: invokestatic    java/lang/System.currentTimeMillis:()J
        //     7: putstatic       com/inmobi/commons/analytics/iat/impl/net/AdTrackerRequestResponseBuilder.b:J
        //    10: new             Lorg/apache/http/impl/client/DefaultHttpClient;
        //    13: dup            
        //    14: invokespecial   org/apache/http/impl/client/DefaultHttpClient.<init>:()V
        //    17: astore          6
        //    19: invokestatic    com/inmobi/commons/internal/InternalSDKUtil.getContext:()Landroid/content/Context;
        //    22: ldc             "IMAdTrackerStatusUpload"
        //    24: ldc             "referrer"
        //    26: invokestatic    com/inmobi/commons/internal/FileOperations.getPreferences:(Landroid/content/Context;Ljava/lang/String;Ljava/lang/String;)Ljava/lang/String;
        //    29: astore          7
        //    31: aload_0        
        //    32: aload_1        
        //    33: invokevirtual   com/inmobi/commons/analytics/iat/impl/Goal.getGoalName:()Ljava/lang/String;
        //    36: aload_1        
        //    37: invokevirtual   com/inmobi/commons/analytics/iat/impl/Goal.getGoalCount:()I
        //    40: aload_1        
        //    41: invokevirtual   com/inmobi/commons/analytics/iat/impl/Goal.isDuplicateGoal:()Z
        //    44: aload_2        
        //    45: invokestatic    com/inmobi/commons/analytics/iat/impl/net/AdTrackerRequestResponseBuilder.formHTTPRequest:(Ljava/lang/String;Ljava/lang/String;IZLjava/lang/String;)Ljava/lang/String;
        //    48: astore          8
        //    50: invokestatic    com/inmobi/commons/analytics/iat/impl/config/AdTrackerInitializer.getConfigParams:()Lcom/inmobi/commons/analytics/iat/impl/config/AdTrackerConfigParams;
        //    53: invokevirtual   com/inmobi/commons/analytics/iat/impl/config/AdTrackerConfigParams.getConnectionTimeout:()I
        //    56: istore          9
        //    58: new             Ljava/lang/StringBuilder;
        //    61: dup            
        //    62: invokespecial   java/lang/StringBuilder.<init>:()V
        //    65: invokestatic    com/inmobi/commons/analytics/iat/impl/net/AdTrackerNetworkInterface.a:()Ljava/lang/String;
        //    68: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //    71: aload           8
        //    73: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //    76: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //    79: astore          10
        //    81: aload           7
        //    83: ifnull          114
        //    86: new             Ljava/lang/StringBuilder;
        //    89: dup            
        //    90: invokespecial   java/lang/StringBuilder.<init>:()V
        //    93: aload           10
        //    95: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //    98: ldc_w           "&referrer="
        //   101: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   104: aload           7
        //   106: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   109: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //   112: astore          10
        //   114: ldc             "[InMobi]-[AdTracker]-4.4.3"
        //   116: aload           10
        //   118: invokestatic    com/inmobi/commons/internal/Log.debug:(Ljava/lang/String;Ljava/lang/String;)V
        //   121: new             Lorg/apache/http/client/methods/HttpGet;
        //   124: dup            
        //   125: aload           10
        //   127: invokespecial   org/apache/http/client/methods/HttpGet.<init>:(Ljava/lang/String;)V
        //   130: astore          11
        //   132: new             Lorg/apache/http/params/BasicHttpParams;
        //   135: dup            
        //   136: invokespecial   org/apache/http/params/BasicHttpParams.<init>:()V
        //   139: astore          12
        //   141: aload           12
        //   143: iload           9
        //   145: invokestatic    org/apache/http/params/HttpConnectionParams.setConnectionTimeout:(Lorg/apache/http/params/HttpParams;I)V
        //   148: aload           12
        //   150: iload           9
        //   152: invokestatic    org/apache/http/params/HttpConnectionParams.setSoTimeout:(Lorg/apache/http/params/HttpParams;I)V
        //   155: aload           6
        //   157: aload           12
        //   159: invokevirtual   org/apache/http/impl/client/DefaultHttpClient.setParams:(Lorg/apache/http/params/HttpParams;)V
        //   162: aload           6
        //   164: aload           11
        //   166: invokevirtual   org/apache/http/impl/client/DefaultHttpClient.execute:(Lorg/apache/http/client/methods/HttpUriRequest;)Lorg/apache/http/HttpResponse;
        //   169: astore          13
        //   171: aload           13
        //   173: invokeinterface org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
        //   178: invokeinterface org/apache/http/StatusLine.getStatusCode:()I
        //   183: sipush          200
        //   186: if_icmpne       380
        //   189: aload           13
        //   191: invokeinterface org/apache/http/HttpResponse.getEntity:()Lorg/apache/http/HttpEntity;
        //   196: invokestatic    org/apache/http/util/EntityUtils.toString:(Lorg/apache/http/HttpEntity;)Ljava/lang/String;
        //   199: astore          14
        //   201: ldc             "[InMobi]-[AdTracker]-4.4.3"
        //   203: new             Ljava/lang/StringBuilder;
        //   206: dup            
        //   207: ldc_w           "RESPONSE: "
        //   210: invokespecial   java/lang/StringBuilder.<init>:(Ljava/lang/String;)V
        //   213: aload           14
        //   215: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   218: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //   221: invokestatic    com/inmobi/commons/internal/Log.internal:(Ljava/lang/String;Ljava/lang/String;)V
        //   224: new             Lorg/json/JSONObject;
        //   227: dup            
        //   228: aload           14
        //   230: invokespecial   org/json/JSONObject.<init>:(Ljava/lang/String;)V
        //   233: astore          15
        //   235: aload           15
        //   237: ldc_w           "errmsg"
        //   240: invokevirtual   org/json/JSONObject.getString:(Ljava/lang/String;)Ljava/lang/String;
        //   243: astore          16
        //   245: aload           15
        //   247: ldc_w           "errcode"
        //   250: invokevirtual   org/json/JSONObject.getInt:(Ljava/lang/String;)I
        //   253: istore          17
        //   255: sipush          6000
        //   258: iload           17
        //   260: if_icmpne       354
        //   263: invokestatic    java/lang/System.currentTimeMillis:()J
        //   266: getstatic       com/inmobi/commons/analytics/iat/impl/net/AdTrackerRequestResponseBuilder.b:J
        //   269: lsub           
        //   270: lstore          18
        //   272: getstatic       com/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType.GOAL_SUCCESS:Lcom/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType;
        //   275: aload_1        
        //   276: iconst_1       
        //   277: lload           18
        //   279: iconst_0       
        //   280: aconst_null    
        //   281: invokestatic    com/inmobi/commons/analytics/iat/impl/AdTrackerUtils.reportMetric:(Lcom/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType;Lcom/inmobi/commons/analytics/iat/impl/Goal;IJILjava/lang/String;)V
        //   284: getstatic       com/inmobi/commons/analytics/iat/impl/AdTrackerConstants$StatusCode.APP_ANALYTICS_UPLOAD_SUCCESS:Lcom/inmobi/commons/analytics/iat/impl/AdTrackerConstants$StatusCode;
        //   287: astore          20
        //   289: sipush          6001
        //   292: iload           17
        //   294: if_icmpne       351
        //   297: ldc             "[InMobi]-[AdTracker]-4.4.3"
        //   299: new             Ljava/lang/StringBuilder;
        //   302: dup            
        //   303: ldc_w           "Error uploading ping "
        //   306: invokespecial   java/lang/StringBuilder.<init>:(Ljava/lang/String;)V
        //   309: aload           16
        //   311: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   314: ldc_w           "\nReloading webview"
        //   317: invokevirtual   java/lang/StringBuilder.append:(Ljava/lang/String;)Ljava/lang/StringBuilder;
        //   320: invokevirtual   java/lang/StringBuilder.toString:()Ljava/lang/String;
        //   323: invokestatic    com/inmobi/commons/internal/Log.debug:(Ljava/lang/String;Ljava/lang/String;)V
        //   326: invokestatic    com/inmobi/commons/internal/InternalSDKUtil.getContext:()Landroid/content/Context;
        //   329: ldc             "IMAdTrackerStatusUpload"
        //   331: ldc             "iat_ids"
        //   333: aconst_null    
        //   334: invokestatic    com/inmobi/commons/internal/FileOperations.setPreferences:(Landroid/content/Context;Ljava/lang/String;Ljava/lang/String;Ljava/lang/String;)Z
        //   337: pop            
        //   338: aload_0        
        //   339: aload_1        
        //   340: invokestatic    com/inmobi/commons/analytics/iat/impl/net/AdTrackerNetworkInterface.reportUsingWebview:(Ljava/lang/String;Lcom/inmobi/commons/analytics/iat/impl/Goal;)Z
        //   343: ifeq            372
        //   346: getstatic       com/inmobi/commons/analytics/iat/impl/AdTrackerConstants$StatusCode.APP_ANALYTICS_UPLOAD_SUCCESS:Lcom/inmobi/commons/analytics/iat/impl/AdTrackerConstants$StatusCode;
        //   349: astore          20
        //   351: aload           20
        //   353: areturn        
        //   354: getstatic       com/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType.GOAL_FAILURE:Lcom/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType;
        //   357: aload_1        
        //   358: iconst_1       
        //   359: lconst_0       
        //   360: iload           17
        //   362: aconst_null    
        //   363: invokestatic    com/inmobi/commons/analytics/iat/impl/AdTrackerUtils.reportMetric:(Lcom/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType;Lcom/inmobi/commons/analytics/iat/impl/Goal;IJILjava/lang/String;)V
        //   366: aload_3        
        //   367: astore          20
        //   369: goto            289
        //   372: getstatic       com/inmobi/commons/analytics/iat/impl/AdTrackerConstants$StatusCode.APP_ANALYTICS_UPLOAD_FAILURE:Lcom/inmobi/commons/analytics/iat/impl/AdTrackerConstants$StatusCode;
        //   375: astore          23
        //   377: aload           23
        //   379: areturn        
        //   380: getstatic       com/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType.GOAL_FAILURE:Lcom/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType;
        //   383: aload_1        
        //   384: iconst_1       
        //   385: lconst_0       
        //   386: aload           13
        //   388: invokeinterface org/apache/http/HttpResponse.getStatusLine:()Lorg/apache/http/StatusLine;
        //   393: invokeinterface org/apache/http/StatusLine.getStatusCode:()I
        //   398: aconst_null    
        //   399: invokestatic    com/inmobi/commons/analytics/iat/impl/AdTrackerUtils.reportMetric:(Lcom/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType;Lcom/inmobi/commons/analytics/iat/impl/Goal;IJILjava/lang/String;)V
        //   402: aload_3        
        //   403: areturn        
        //   404: astore          4
        //   406: aload           4
        //   408: astore          5
        //   410: getstatic       com/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType.GOAL_FAILURE:Lcom/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType;
        //   413: aload_1        
        //   414: iconst_1       
        //   415: lconst_0       
        //   416: sipush          424
        //   419: aload           5
        //   421: invokevirtual   java/lang/Exception.getMessage:()Ljava/lang/String;
        //   424: invokestatic    com/inmobi/commons/analytics/iat/impl/AdTrackerUtils.reportMetric:(Lcom/inmobi/commons/analytics/iat/impl/config/AdTrackerEventType;Lcom/inmobi/commons/analytics/iat/impl/Goal;IJILjava/lang/String;)V
        //   427: ldc             "[InMobi]-[AdTracker]-4.4.3"
        //   429: ldc_w           "Error uploading Goal Ping"
        //   432: aload           5
        //   434: invokestatic    com/inmobi/commons/internal/Log.internal:(Ljava/lang/String;Ljava/lang/String;Ljava/lang/Throwable;)V
        //   437: aload_3        
        //   438: areturn        
        //   439: astore          21
        //   441: aload           21
        //   443: astore          5
        //   445: aload           20
        //   447: astore_3       
        //   448: goto            410
        //    Exceptions:
        //  Try           Handler
        //  Start  End    Start  End    Type                 
        //  -----  -----  -----  -----  ---------------------
        //  4      81     404    410    Ljava/lang/Exception;
        //  86     114    404    410    Ljava/lang/Exception;
        //  114    255    404    410    Ljava/lang/Exception;
        //  263    289    404    410    Ljava/lang/Exception;
        //  297    351    439    451    Ljava/lang/Exception;
        //  354    366    404    410    Ljava/lang/Exception;
        //  372    377    439    451    Ljava/lang/Exception;
        //  380    402    404    410    Ljava/lang/Exception;
        // 
        // The error that occurred was:
        // 
        // java.lang.IllegalStateException: Expression is linked from several locations: Label_0351:
        //     at com.strobel.decompiler.ast.Error.expressionLinkedFromMultipleLocations(Error.java:27)
        //     at com.strobel.decompiler.ast.AstOptimizer.mergeDisparateObjectInitializations(AstOptimizer.java:2592)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:235)
        //     at com.strobel.decompiler.ast.AstOptimizer.optimize(AstOptimizer.java:42)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:214)
        //     at com.strobel.decompiler.languages.java.ast.AstMethodBodyBuilder.createMethodBody(AstMethodBodyBuilder.java:99)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createMethodBody(AstBuilder.java:757)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createMethod(AstBuilder.java:655)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addTypeMembers(AstBuilder.java:532)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeCore(AstBuilder.java:499)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createTypeNoCache(AstBuilder.java:141)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.createType(AstBuilder.java:130)
        //     at com.strobel.decompiler.languages.java.ast.AstBuilder.addType(AstBuilder.java:105)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.buildAst(JavaLanguage.java:71)
        //     at com.strobel.decompiler.languages.java.JavaLanguage.decompileType(JavaLanguage.java:59)
        //     at com.strobel.decompiler.DecompilerDriver.decompileType(DecompilerDriver.java:317)
        //     at com.strobel.decompiler.DecompilerDriver.decompileJar(DecompilerDriver.java:238)
        //     at com.strobel.decompiler.DecompilerDriver.main(DecompilerDriver.java:123)
        // 
        throw new IllegalStateException("An error occurred while decompiling this method.");
    }
    
    public static boolean serverReachable(final String s) {
        try {
            if (((HttpClient)new DefaultHttpClient()).execute((HttpUriRequest)new HttpGet(s)).getStatusLine().getStatusCode() == 200) {
                return true;
            }
        }
        catch (Exception ex) {
            Log.debug("[InMobi]-[AdTracker]-4.4.3", "Server not reachable..Logging events");
        }
        return false;
    }
}
