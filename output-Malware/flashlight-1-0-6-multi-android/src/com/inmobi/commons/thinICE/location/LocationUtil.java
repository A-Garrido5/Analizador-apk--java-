// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.commons.thinICE.location;

import java.util.HashMap;
import android.location.Location;
import android.location.LocationManager;
import android.content.Context;

public final class LocationUtil
{
    private static LocationInfo a(final Context context, final String s) {
        final Location lastKnownLocation = ((LocationManager)context.getSystemService("location")).getLastKnownLocation(s);
        if (lastKnownLocation == null) {
            return null;
        }
        final LocationInfo locationInfo = new LocationInfo();
        locationInfo.time = lastKnownLocation.getTime();
        locationInfo.provider = lastKnownLocation.getProvider();
        locationInfo.latitude = lastKnownLocation.getLatitude();
        locationInfo.longitude = lastKnownLocation.getLongitude();
        locationInfo.accuracy = lastKnownLocation.getAccuracy();
        return locationInfo;
    }
    
    public static HashMap getLastKnownLocations(final Context context) {
        final HashMap<String, LocationInfo> hashMap = new HashMap<String, LocationInfo>();
        if (hasFineLocationPermission(context)) {
            hashMap.put("gps", a(context, "gps"));
        }
        if (hasCoarseLocationPermission(context)) {
            hashMap.put("network", a(context, "network"));
        }
        return hashMap;
    }
    
    public static boolean hasCoarseLocationPermission(final Context context) {
        return context.checkCallingOrSelfPermission("android.permission.ACCESS_COARSE_LOCATION") == 0;
    }
    
    public static boolean hasFineLocationPermission(final Context context) {
        return context.checkCallingOrSelfPermission("android.permission.ACCESS_FINE_LOCATION") == 0;
    }
    
    public static boolean hasLocationPermission(final Context context) {
        return hasFineLocationPermission(context) || hasCoarseLocationPermission(context);
    }
}
