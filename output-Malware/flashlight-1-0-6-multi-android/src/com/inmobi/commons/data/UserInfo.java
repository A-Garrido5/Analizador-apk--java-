// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.commons.data;

import android.view.Display;
import com.inmobi.commons.internal.Log;
import com.inmobi.commons.internal.WrapperFunctions;
import com.inmobi.commons.internal.InternalSDKUtil;
import android.view.WindowManager;
import android.util.DisplayMetrics;
import com.inmobi.commons.IMIDType;
import java.util.HashMap;
import java.util.Map;
import com.inmobi.commons.SexualOrientation;
import com.inmobi.commons.MaritalStatus;
import com.inmobi.commons.HasChildren;
import java.util.Calendar;
import com.inmobi.commons.GenderType;
import com.inmobi.commons.EthnicityType;
import com.inmobi.commons.EducationType;
import android.location.Location;

public final class UserInfo
{
    private static UserInfo a;
    private static int c;
    private boolean b;
    private Location d;
    private boolean e;
    private String f;
    private EducationType g;
    private EthnicityType h;
    private GenderType i;
    private Calendar j;
    private Integer k;
    private Integer l;
    private String m;
    private String n;
    private String o;
    private String p;
    private HasChildren q;
    private MaritalStatus r;
    private String s;
    private SexualOrientation t;
    private Map u;
    
    static {
        UserInfo.a = new UserInfo();
        UserInfo.c = 1;
    }
    
    private UserInfo() {
        this.e = true;
        this.k = 0;
        this.l = 0;
        this.u = new HashMap();
    }
    
    public static UserInfo getInstance() {
        return UserInfo.a;
    }
    
    public final void addIDType(final IMIDType imidType, final String s) {
        if (this.u != null) {
            this.u.put(imidType, s);
        }
    }
    
    public final Integer getAge() {
        return this.l;
    }
    
    public final String getAreaCode() {
        return this.p;
    }
    
    public final Location getCurrentLocation() {
        return this.d;
    }
    
    public final Calendar getDateOfBirth() {
        return this.j;
    }
    
    public final int getDeviceIDMask() {
        return UserInfo.c;
    }
    
    public final EducationType getEducation() {
        return this.g;
    }
    
    public final EthnicityType getEthnicity() {
        return this.h;
    }
    
    public final GenderType getGender() {
        return this.i;
    }
    
    public final HasChildren getHasChildren() {
        return this.q;
    }
    
    public final String getIDType(final IMIDType imidType) {
        if (this.u != null) {
            return this.u.get(imidType);
        }
        return null;
    }
    
    public final Integer getIncome() {
        return this.k;
    }
    
    public final String getInterests() {
        return this.m;
    }
    
    public final String getLanguage() {
        return this.s;
    }
    
    public final String getLocationWithCityStateCountry() {
        return this.n;
    }
    
    public final MaritalStatus getMaritalStatus() {
        return this.r;
    }
    
    public final String getPostalCode() {
        return this.o;
    }
    
    public final String getSearchString() {
        return this.f;
    }
    
    public final SexualOrientation getSexualOrientation() {
        return this.t;
    }
    
    public final boolean isLocationInquiryAllowed() {
        return this.e;
    }
    
    public final boolean isTestMode() {
        return this.b;
    }
    
    public final void removeIDType(final IMIDType imidType) {
        if (this.u != null) {
            this.u.remove(imidType);
        }
    }
    
    public final void setAge(final Integer l) {
        this.l = l;
    }
    
    public final void setAreaCode(final String p) {
        this.p = p;
    }
    
    public final void setCurrentLocation(final Location d) {
        this.d = d;
    }
    
    public final void setDateOfBirth(final Calendar j) {
        this.j = j;
    }
    
    public final void setDeviceIDMask(final int c) {
        UserInfo.c = c;
    }
    
    public final void setEducation(final EducationType g) {
        this.g = g;
    }
    
    public final void setEthnicity(final EthnicityType h) {
        this.h = h;
    }
    
    public final void setGender(final GenderType i) {
        this.i = i;
    }
    
    public final void setHasChildren(final HasChildren q) {
        this.q = q;
    }
    
    public final void setIncome(final Integer k) {
        this.k = k;
    }
    
    public final void setInterests(final String m) {
        this.m = m;
    }
    
    public final void setLanguage(final String s) {
        this.s = s;
    }
    
    public final void setLocationInquiryAllowed(final boolean e) {
        this.e = e;
    }
    
    public final void setLocationWithCityStateCountry(final String n, final String s, final String s2) {
        if (n != null && !"".equals(n.trim())) {
            this.n = n;
        }
        if (s != null && !"".equals(s.trim())) {
            this.n = this.n + "-" + s;
        }
        if (s2 != null && !"".equals(s2.trim())) {
            this.n = this.n + "-" + s2;
        }
    }
    
    public final void setMaritalStatus(final MaritalStatus r) {
        this.r = r;
    }
    
    public final void setPostalCode(final String o) {
        this.o = o;
    }
    
    public final void setSexualOrientation(final SexualOrientation t) {
        this.t = t;
    }
    
    public final void setTestMode(final boolean b) {
        this.b = b;
    }
    
    public final void updateDeviceInfo() {
        try {
            final DisplayMetrics displayMetrics = new DisplayMetrics();
            final Display defaultDisplay = ((WindowManager)InternalSDKUtil.getContext().getSystemService("window")).getDefaultDisplay();
            defaultDisplay.getMetrics(displayMetrics);
            final float density = displayMetrics.density;
            final int n = (int)(WrapperFunctions.getDisplayWidth(defaultDisplay) / density);
            final int n2 = (int)(WrapperFunctions.getDisplayHeight(defaultDisplay) / density);
            DeviceInfo.setScreenDensity(String.valueOf(density));
            DeviceInfo.setScreenSize(n + "X" + n2);
        }
        catch (Exception ex) {
            Log.internal("[InMobi]-4.4.3", "Exception setting device info", ex);
        }
    }
    
    public final void updateInfo() {
        while (true) {
            synchronized (this) {
                try {
                    this.updateDeviceInfo();
                    DeviceInfo.setPhoneDefaultUserAgent(InternalSDKUtil.getUserAgent(InternalSDKUtil.getContext()));
                    DeviceInfo.getInstance().fillDeviceInfo();
                    AppInfo.fillAppInfo();
                    LocationInfo.b(false);
                    if (this.isLocationInquiryAllowed()) {
                        if (this.getCurrentLocation() != null) {
                            LocationInfo.a(this.getCurrentLocation());
                            LocationInfo.b(true);
                        }
                        else {
                            LocationInfo.verifyLocationPermission();
                            if (!LocationInfo.isLocationDeniedByUser()) {
                                LocationInfo.updateBestKnownLocation();
                            }
                        }
                        return;
                    }
                }
                catch (Exception ex) {
                    Log.internal("[InMobi]-4.4.3", "Exception updating user info", ex);
                    return;
                }
            }
            LocationInfo.a(true);
        }
    }
}
