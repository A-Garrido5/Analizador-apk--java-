// 
// Decompiled by Procyon v0.5.30
// 

package com.inmobi.commons.uid;

import com.inmobi.commons.internal.Log;
import java.util.Iterator;
import com.inmobi.commons.analytics.bootstrapper.AnalyticsInitializer;
import com.inmobi.commons.IMIDType;
import java.util.HashMap;
import com.inmobi.commons.data.UserInfo;
import java.util.Map;
import com.inmobi.commons.internal.InternalSDKUtil;
import android.content.Context;

public class UID
{
    public static final boolean FBA_DEF = false;
    public static final boolean GPID_DEF = true;
    public static final String KEY_FACEBOOK_ID = "FBA";
    public static final String KEY_GPID = "GPID";
    public static final String KEY_LOGIN_ID = "LID";
    public static final String KEY_LTVID = "LTVID";
    public static final String KEY_ODIN1 = "O1";
    public static final String KEY_SESSION_ID = "SID";
    public static final String KEY_UM5_ID = "UM5";
    public static final boolean LID_DEF = true;
    public static final boolean LTVE_DEF = true;
    public static final boolean O1_DEF = true;
    public static final boolean SID_DEF = true;
    public static final boolean UM5_DEF = true;
    private static UID a;
    private boolean b;
    private boolean c;
    private boolean d;
    private boolean e;
    private boolean f;
    private boolean g;
    private boolean h;
    private String i;
    
    static {
        UID.a = new UID();
    }
    
    public UID() {
        this.b = true;
        this.c = true;
        this.d = true;
        this.e = false;
        this.f = true;
        this.g = true;
        this.h = true;
        this.i = null;
    }
    
    public UID(final Context context) {
        this.b = true;
        this.c = true;
        this.d = true;
        this.e = false;
        this.f = true;
        this.g = true;
        this.h = true;
        this.i = null;
        InternalSDKUtil.setContext(context);
    }
    
    public UID(final Context context, final Map fromMap) {
        this(context);
        this.setFromMap(fromMap);
    }
    
    public UID(final Map fromMap) {
        this.b = true;
        this.c = true;
        this.d = true;
        this.e = false;
        this.f = true;
        this.g = true;
        this.h = true;
        this.i = null;
        this.setFromMap(fromMap);
    }
    
    private Map a(final int n, final String s) {
        final int deviceIDMask = UserInfo.getInstance().getDeviceIDMask();
        final Context context = InternalSDKUtil.getContext();
        final HashMap<String, String> hashMap = new HashMap<String, String>();
        if (this.i == null) {
            this.i = UIDHelper.getPlatformId();
        }
        if (deviceIDMask <= 0) {
            if (this.b && UID.a.b && !InternalSDKUtil.isGooglePlayServicesJarIncluded()) {
                hashMap.put("O1", UIDHelper.getODIN1(this.i));
            }
            if (this.e && UID.a.e) {
                final String fbId = UIDHelper.getFBId(context);
                if (fbId != null) {
                    hashMap.put("FBA", fbId);
                }
            }
            if (this.f && UID.a.f && !InternalSDKUtil.isGooglePlayServicesJarIncluded()) {
                hashMap.put("UM5", UIDHelper.getUM5(this.i));
            }
        }
        else {
            if ((deviceIDMask & 0x2) != 0x2 && this.b && UID.a.b && !InternalSDKUtil.isGooglePlayServicesJarIncluded()) {
                hashMap.put("O1", UIDHelper.getODIN1(this.i));
            }
            if ((deviceIDMask & 0x4) != 0x4 && this.e && UID.a.e) {
                final String fbId2 = UIDHelper.getFBId(context);
                if (fbId2 != null) {
                    hashMap.put("FBA", fbId2);
                }
            }
            if ((deviceIDMask & 0x8) != 0x8 && this.f && UID.a.f && !InternalSDKUtil.isGooglePlayServicesJarIncluded()) {
                hashMap.put("UM5", UIDHelper.getUM5(this.i));
            }
        }
        if (this.d && UID.a.d) {
            final String idType = UserInfo.getInstance().getIDType(IMIDType.ID_LOGIN);
            if (idType != null) {
                hashMap.put("LID", idType);
            }
        }
        if (this.c && UID.a.c) {
            final String idType2 = UserInfo.getInstance().getIDType(IMIDType.ID_SESSION);
            if (idType2 != null) {
                hashMap.put("SID", idType2);
            }
        }
        if (this.g && UID.a.g) {
            final Long ltvId = AnalyticsInitializer.getRawConfigParams().getLTVId();
            if (ltvId != null) {
                hashMap.put("LTVID", new StringBuilder().append(ltvId).toString());
            }
        }
        if (this.h && UID.a.h) {
            final AdvertisingId advertisingId = UIDHelper.getAdvertisingId();
            if (advertisingId != null) {
                final String adId = advertisingId.getAdId();
                if (adId != null) {
                    hashMap.put("GPID", adId);
                }
            }
        }
        return hashMap;
    }
    
    private Map b(final int n, final String s) {
        final int deviceIDMask = UserInfo.getInstance().getDeviceIDMask();
        final Context context = InternalSDKUtil.getContext();
        final HashMap<String, String> hashMap = new HashMap<String, String>();
        if (this.i == null) {
            this.i = UIDHelper.getPlatformId();
        }
        if (deviceIDMask <= 0) {
            if (this.b && UID.a.b && !InternalSDKUtil.isGooglePlayServicesJarIncluded()) {
                hashMap.put("O1", UIDHelper.a(UIDHelper.getODIN1(this.i), s));
            }
            if (this.e && UID.a.e) {
                final String fbId = UIDHelper.getFBId(context);
                if (fbId != null) {
                    hashMap.put("FBA", UIDHelper.a(fbId, s));
                }
            }
            if (this.f && UID.a.f && !InternalSDKUtil.isGooglePlayServicesJarIncluded()) {
                hashMap.put("UM5", UIDHelper.a(UIDHelper.getUM5(this.i), s));
            }
        }
        else {
            if ((deviceIDMask & 0x2) != 0x2 && this.b && UID.a.b && !InternalSDKUtil.isGooglePlayServicesJarIncluded()) {
                hashMap.put("O1", UIDHelper.a(UIDHelper.getODIN1(this.i), s));
            }
            if ((deviceIDMask & 0x4) != 0x4 && this.e && UID.a.e) {
                final String fbId2 = UIDHelper.getFBId(context);
                if (fbId2 != null) {
                    hashMap.put("FBA", UIDHelper.a(fbId2, s));
                }
            }
            if ((deviceIDMask & 0x8) != 0x8 && this.f && UID.a.f && !InternalSDKUtil.isGooglePlayServicesJarIncluded()) {
                hashMap.put("UM5", UIDHelper.a(UIDHelper.getUM5(this.i), s));
            }
        }
        if (this.d && UID.a.d) {
            final String idType = UserInfo.getInstance().getIDType(IMIDType.ID_LOGIN);
            if (idType != null) {
                hashMap.put("LID", UIDHelper.a(idType, s));
            }
        }
        if (this.c && UID.a.c) {
            final String idType2 = UserInfo.getInstance().getIDType(IMIDType.ID_SESSION);
            if (idType2 != null) {
                hashMap.put("SID", UIDHelper.a(idType2, s));
            }
        }
        if (this.g && UID.a.g) {
            final Long ltvId = AnalyticsInitializer.getRawConfigParams().getLTVId();
            if (ltvId != null) {
                hashMap.put("LTVID", UIDHelper.a(new StringBuilder().append(ltvId).toString(), s));
            }
        }
        if (this.h && UID.a.h) {
            final AdvertisingId advertisingId = UIDHelper.getAdvertisingId();
            if (advertisingId != null) {
                final String adId = advertisingId.getAdId();
                if (adId != null) {
                    hashMap.put("GPID", UIDHelper.a(new StringBuilder().append(adId).toString(), s));
                }
            }
        }
        return hashMap;
    }
    
    public static UID getCommonsUid() {
        return UID.a;
    }
    
    public String getDefaultUidMap(final int n, final String s, final Map map) {
        final Map b = this.b(n, s);
        if (map != null) {
            for (final String s2 : map.keySet()) {
                final String s3 = (String)map.get(s2);
                if (s3 != null) {
                    b.put(s2, UIDHelper.a(s3, s));
                }
            }
        }
        return UIDUtil.getEncryptedJSON(b);
    }
    
    public String getDefaultUidMapWithoutXor(final int n, final String s, final Map map) {
        final Map a = this.a(n, s);
        if (map != null) {
            for (final String s2 : map.keySet()) {
                final String s3 = (String)map.get(s2);
                if (s3 != null) {
                    a.put(s2, s3);
                }
            }
        }
        return UIDUtil.getJSON(a);
    }
    
    public String getUidMap(final int n, final String s, final Map map) {
        try {
            InternalSDKUtil.initialize(InternalSDKUtil.getContext());
            return this.getDefaultUidMap(n, s, map);
        }
        catch (Exception ex) {
            Log.internal("commons", "Unable to initialize commons.");
            return this.getDefaultUidMap(n, s, map);
        }
    }
    
    public String getUidMapWitoutXOR(final int n, final String s, final Map map) {
        try {
            InternalSDKUtil.initialize(InternalSDKUtil.getContext());
            return this.getDefaultUidMapWithoutXor(n, s, map);
        }
        catch (Exception ex) {
            Log.internal("commons", "Unable to initialize commons.");
            return this.getDefaultUidMapWithoutXor(n, s, map);
        }
    }
    
    public boolean isFba() {
        return this.e;
    }
    
    public boolean isGPId() {
        return this.h;
    }
    
    public boolean isLid() {
        return this.d;
    }
    
    public boolean isLtve() {
        return this.g;
    }
    
    public boolean isO1() {
        return this.b;
    }
    
    public boolean isSid() {
        return this.c;
    }
    
    public boolean isUm5() {
        return this.f;
    }
    
    public final void setFromMap(final Map map) {
        this.b = InternalSDKUtil.getBooleanFromMap(map, "O1");
        this.c = InternalSDKUtil.getBooleanFromMap(map, "SID");
        this.d = InternalSDKUtil.getBooleanFromMap(map, "LID");
        this.e = InternalSDKUtil.getBooleanFromMap(map, "FBA");
        this.f = InternalSDKUtil.getBooleanFromMap(map, "UM5");
        this.g = InternalSDKUtil.getBooleanFromMap(map, "LTVID");
        this.h = InternalSDKUtil.getBooleanFromMap(map, "GPID");
    }
}
