// 
// Decompiled by Procyon v0.5.30
// 

package de.onyxbits.listmyapps;

import android.content.DialogInterface;
import java.util.Arrays;
import java.util.Vector;
import android.widget.ListAdapter;
import android.content.DialogInterface$OnClickListener;
import android.content.DialogInterface$OnMultiChoiceClickListener;

public class TagSelectionListener implements DialogInterface$OnMultiChoiceClickListener, DialogInterface$OnClickListener
{
    private ListAdapter adapter;
    private String[] items;
    private boolean[] states;
    
    public TagSelectionListener(final ListAdapter adapter) {
        this.adapter = adapter;
        final int count = adapter.getCount();
        final Vector<String> vector = new Vector<String>();
        for (int i = 0; i < count; ++i) {
            final String[] split = MainActivity.noNull(((SortablePackageInfo)adapter.getItem(i)).tags).split(",");
            for (int length = split.length, j = 0; j < length; ++j) {
                final String trim = split[j].trim();
                if (trim.length() > 0 && !vector.contains(trim)) {
                    vector.add(trim);
                }
            }
        }
        this.items = vector.toArray(new String[0]);
        this.states = new boolean[this.items.length];
        Arrays.sort(this.items);
    }
    
    protected String[] listTags() {
        return this.items;
    }
    
    public void onClick(final DialogInterface dialogInterface, final int n) {
        if (n == -1) {
            for (int count = this.adapter.getCount(), i = 0; i < count; ++i) {
                final SortablePackageInfo sortablePackageInfo = (SortablePackageInfo)this.adapter.getItem(i);
                sortablePackageInfo.selected = false;
                for (int j = 0; j < this.items.length; ++j) {
                    if (this.states[j] && MainActivity.noNull(sortablePackageInfo.tags).contains(this.items[j])) {
                        sortablePackageInfo.selected = true;
                        break;
                    }
                }
            }
            ((AppAdapter)this.adapter).notifyDataSetChanged();
        }
    }
    
    public void onClick(final DialogInterface dialogInterface, final int n, final boolean b) {
        this.states[n] = b;
    }
}
