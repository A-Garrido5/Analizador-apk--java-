// 
// Decompiled by Procyon v0.5.30
// 

package de.onyxbits.listmyapps;

import android.content.ContentValues;
import android.database.SQLException;
import android.database.Cursor;
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import java.util.HashMap;

public class AnnotationsSource
{
    private HashMap<String, String> comments;
    private SQLiteDatabase database;
    private Schema schema;
    private HashMap<String, String> tags;
    
    public AnnotationsSource(final Context context) {
        this.schema = new Schema(context);
        this.comments = new HashMap<String, String>();
        this.tags = new HashMap<String, String>();
    }
    
    public String getComment(final String s) {
        return this.comments.get(s);
    }
    
    public String getTags(final String s) {
        return this.tags.get(s);
    }
    
    public void open() throws SQLException {
        this.database = this.schema.getWritableDatabase();
        final Cursor query = this.database.query("annotations", new String[] { "packageid", "comment", "tags" }, (String)null, (String[])null, (String)null, (String)null, (String)null);
        query.moveToFirst();
        while (!query.isAfterLast()) {
            final String string = query.getString(0);
            this.comments.put(string, query.getString(1));
            this.tags.put(string, query.getString(2));
            query.moveToNext();
        }
        query.close();
    }
    
    public void putComment(final String s, final String s2) {
        this.comments.put(s, s2);
        final ContentValues contentValues = new ContentValues();
        contentValues.put("comment", s2);
        if (this.database.update("annotations", contentValues, "packageid='" + s + "'", (String[])null) != 1) {
            contentValues.put("packageid", s);
            this.database.insert("annotations", (String)null, contentValues);
        }
    }
    
    public void putTags(final String s, final String s2) {
        this.tags.put(s, s2);
        final ContentValues contentValues = new ContentValues();
        contentValues.put("tags", s2);
        if (this.database.update("annotations", contentValues, "packageid='" + s + "'", (String[])null) != 1) {
            contentValues.put("packageid", s);
            this.database.insert("annotations", (String)null, contentValues);
        }
    }
}
