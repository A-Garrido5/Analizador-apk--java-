// 
// Decompiled by Procyon v0.5.30
// 

package de.onyxbits.listmyapps;

import android.net.Uri;
import android.view.MenuItem;
import android.widget.ListView;
import android.app.AlertDialog$Builder;
import java.sql.Date;
import android.widget.TextView;
import java.text.DateFormat;
import android.widget.ScrollView;
import android.view.ViewGroup;
import android.view.View;
import android.widget.AdapterView;
import android.view.Menu;
import android.widget.ListAdapter;
import java.util.List;
import java.util.ArrayList;
import android.content.Context;
import android.os.Bundle;
import android.content.DialogInterface;
import android.widget.EditText;
import android.widget.AdapterView$OnItemLongClickListener;
import android.content.DialogInterface$OnClickListener;
import android.app.ListActivity;

public class AnnotationsActivity extends ListActivity implements DialogInterface$OnClickListener, AdapterView$OnItemLongClickListener
{
    private AnnotationsSource annotationsSource;
    private EditText comment;
    private SortablePackageInfo spi;
    private EditText tags;
    
    public void onClick(final DialogInterface dialogInterface, final int n) {
        if (n == -1) {
            this.spi.comment = this.comment.getText().toString();
            this.spi.tags = this.tags.getText().toString();
            this.annotationsSource.putComment(this.spi.packageName, this.spi.comment);
            this.annotationsSource.putTags(this.spi.packageName, this.spi.tags);
            ((AppAdapter)this.getListAdapter()).notifyDataSetChanged();
        }
    }
    
    protected void onCreate(final Bundle bundle) {
        super.onCreate(bundle);
        this.requestWindowFeature(2);
        this.setContentView(2130903040);
        this.setProgressBarIndeterminate(true);
        this.setProgressBarVisibility(true);
        this.getListView().setOnItemLongClickListener((AdapterView$OnItemLongClickListener)this);
        (this.annotationsSource = new AnnotationsSource((Context)this)).open();
        this.setListAdapter((ListAdapter)new AppAdapter((Context)this, 2130903046, new ArrayList<SortablePackageInfo>(), 2130903046));
        new ListTask(this, 2130903046).execute(new Object[] { "" });
    }
    
    public boolean onCreateOptionsMenu(final Menu menu) {
        this.getMenuInflater().inflate(2131296256, menu);
        return true;
    }
    
    public boolean onItemLongClick(final AdapterView<?> adapterView, final View view, final int n, final long n2) {
        final SortablePackageInfo sortablePackageInfo = (SortablePackageInfo)((AppAdapter)this.getListAdapter()).getItem(n);
        final View inflate = this.getLayoutInflater().inflate(2130903047, (ViewGroup)null);
        final ScrollView view2 = new ScrollView((Context)this);
        view2.addView(inflate);
        final DateFormat dateTimeInstance = DateFormat.getDateTimeInstance();
        ((TextView)inflate.findViewById(2131034135)).setText((CharSequence)sortablePackageInfo.version);
        ((TextView)inflate.findViewById(2131034137)).setText((CharSequence)("" + sortablePackageInfo.versionCode));
        ((TextView)inflate.findViewById(2131034139)).setText((CharSequence)dateTimeInstance.format(new Date(sortablePackageInfo.firstInstalled)));
        ((TextView)inflate.findViewById(2131034141)).setText((CharSequence)dateTimeInstance.format(new Date(sortablePackageInfo.lastUpdated)));
        ((TextView)inflate.findViewById(2131034143)).setText((CharSequence)("" + sortablePackageInfo.uid));
        ((TextView)inflate.findViewById(2131034145)).setText((CharSequence)sortablePackageInfo.dataDir);
        new AlertDialog$Builder((Context)this).setTitle((CharSequence)sortablePackageInfo.displayName).setIcon(sortablePackageInfo.appInfo.loadIcon(this.getPackageManager())).setView((View)view2).setNegativeButton((CharSequence)null, (DialogInterface$OnClickListener)null).setPositiveButton((CharSequence)null, (DialogInterface$OnClickListener)null).setNeutralButton((CharSequence)null, (DialogInterface$OnClickListener)null).show();
        return true;
    }
    
    public void onListItemClick(final ListView listView, final View view, final int n, final long n2) {
        this.spi = (SortablePackageInfo)((AppAdapter)this.getListAdapter()).getItem(n);
        final View inflate = this.getLayoutInflater().inflate(2130903044, (ViewGroup)null);
        final AlertDialog$Builder alertDialog$Builder = new AlertDialog$Builder((Context)this);
        (this.comment = (EditText)inflate.findViewById(2131034126)).setText((CharSequence)MainActivity.noNull(this.spi.comment));
        (this.tags = (EditText)inflate.findViewById(2131034127)).setText((CharSequence)MainActivity.noNull(this.spi.tags));
        alertDialog$Builder.setTitle((CharSequence)this.spi.displayName).setView(inflate).setIcon(this.spi.appInfo.loadIcon(this.getPackageManager())).setPositiveButton(2131099691, (DialogInterface$OnClickListener)this).setNegativeButton(2131099692, (DialogInterface$OnClickListener)this).show();
    }
    
    public boolean onOptionsItemSelected(final MenuItem menuItem) {
        switch (menuItem.getItemId()) {
            default: {
                return super.onOptionsItemSelected(menuItem);
            }
            case 2131034112: {
                MainActivity.openUri((Context)this, Uri.parse(this.getString(2131099698)));
                return true;
            }
        }
    }
}
